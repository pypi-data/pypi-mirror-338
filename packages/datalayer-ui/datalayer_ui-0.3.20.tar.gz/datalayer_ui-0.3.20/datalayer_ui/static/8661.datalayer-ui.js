"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[8661],{66416:(e,t,s)=>{s.r(t),s.d(t,{CellEdit:()=>S,default:()=>I});var i=s(9387),r=s(45222),n=s(20568),o=s(79026),a=s(97096),l=s(98754),d=s(99180),c=s(38621),u=s(17810),h=s(23530),p=s(97734),m=s(53850),g=s(50906),j=s(47785),_=s(55388),w=s(68914),y=s(18683);const x=()=>{const{getSpaceDatasets:e,refreshSpaceDatasets:t}=(0,m.E)(),s=(0,g.mt)(),r=(0,_.LC)(),n=s.layout().space,o=s.layout().organization,[a,l]=(0,i.useState)(e()),d=a.filter((e=>e.public)),u=a.filter((e=>!e.public));return(0,i.useEffect)((()=>{n&&t(n,o).then((t=>{t.success&&l(e())}))}),[n]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(j.l,{showDividers:!0,role:"menu",children:[(0,y.jsxs)(j.l.Group,{children:[(0,y.jsx)(j.l.GroupHeading,{children:"My public datasets"}),d.map((e=>(0,y.jsxs)(j.l.Item,{onClick:t=>{t.preventDefault(),r.setDataset("cell",e)},children:[(0,y.jsx)(j.l.LeadingVisual,{children:(0,y.jsx)(c.bN0,{})}),e.name,(0,y.jsx)(j.l.Description,{children:(0,w.b)(e.description)})]},e.id))),0===d.length&&(0,y.jsx)(j.l.Item,{disabled:!0,children:"No public dataset"})]}),(0,y.jsxs)(j.l.Group,{children:[(0,y.jsx)(j.l.GroupHeading,{children:"My private datasets"}),u.map((e=>(0,y.jsxs)(j.l.Item,{onClick:t=>{t.preventDefault(),r.setDataset("cell",e)},children:[(0,y.jsx)(j.l.LeadingVisual,{children:(0,y.jsx)(c.bN0,{})}),e.name,(0,y.jsx)(j.l.Description,{children:(0,w.b)(e.description)})]},e.id))),0===u.length&&(0,y.jsx)(j.l.Item,{disabled:!0,children:"No private dataset"})]})]})})};var v=s(88996),f=s(48371),b=s(64664),C=s(92985),E=s(85545),A=s(87237),O=s(27199),$=s(76818),R=s(26858);const D=e=>{const{cell:t}=e,s=((0,h.Z)(),t.outputshotUrl||t.outputshotData);return(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(R.Zp,{border:!0,rounded:"medium",shadow:"medium",sx:{maxWidth:360},children:[(0,y.jsx)(R.Zp.Header,{title:"Cell",description:(0,w.b)(t.name,100)}),(0,y.jsx)(R.Zp.Image,{height:200,image:s}),(0,y.jsx)(R.Zp.Content,{children:(0,y.jsx)($.A,{color:"fg.muted",children:(0,w.b)(t.description,100)})})]})})},k=(0,C.t)((0,E.Y)((()=>Promise.all([s.e(7583),s.e(754)]).then(s.bind(s,60754))))),T=()=>{const{cell:e,update:t}=(0,A.Xp)();if(!e)return(0,y.jsx)(y.Fragment,{});const{updateCell:s}=(0,m.E)(),{space:r,showBackdrop:n,triggerItemsRefresh:o,hideBackdrop:a}=(0,O.l5)(),{enqueueToast:c}=(0,p.d)(),[u,h]=(0,i.useState)(!1),[g,j]=(0,i.useState)({name:e.name,description:e.description}),[_,w]=(0,i.useState)({name:!0,description:!0});return(0,i.useEffect)((()=>{w({..._,name:void 0===g.name?void 0:g.name.length>2,description:void 0===g.description?void 0:g.description.length>2})}),[g]),(0,y.jsx)(y.Fragment,{children:(0,y.jsxs)(l.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[(0,y.jsxs)(l.A,{sx:{label:{marginTop:2}},children:[(0,y.jsxs)(v.A,{children:[(0,y.jsx)(v.A.Label,{children:"Name"}),(0,y.jsx)(f.A,{block:!0,value:g.name,onChange:e=>{j((t=>({...t,name:e.target.value}))),t({name:e.target.value})}}),!1===_.name&&(0,y.jsx)(v.A.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,y.jsxs)(v.A,{children:[(0,y.jsx)(v.A.Label,{children:"Description"}),(0,y.jsx)(b.Ay,{block:!0,value:g.description,onChange:e=>{j((t=>({...t,description:e.target.value}))),t({description:e.target.value})}}),!1===_.description&&(0,y.jsx)(v.A.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,y.jsx)(v.A,{sx:{marginTop:3},children:(0,y.jsxs)(l.A,{display:"flex",children:[(0,y.jsx)(d.Q,{variant:"primary",disabled:u||!_.name||!_.description,onClick:()=>{e?.outputshotData.length>3e5?c(`Output screenshot is too large (actual size is ${e?.outputshotData.length}, the maximum allowed is 300000)`,{variant:"error"}):(n(),h(!0),s({id:e?.id,name:e?.name,description:e?.description,source:e.source,outputshotUrl:e.outputshotUrl,outputshotData:e?.outputshotUrl?void 0:e?.outputshotData,spaceId:r?.id}).then((s=>{if(h(!1),s.success){const s={...e,public:e.public,description:e.description,source:e.source,outputshotUrl:e.outputshotUrl,outputshotData:e.outputshotData};o(),t(s),c("The cell is successfully updated.",{variant:"success"})}})).finally((()=>{h(!1),a()})))},children:u?"Updating cell...":"Update cell"}),(0,y.jsx)(l.A,{ml:3,children:(0,y.jsx)(k,{})})]})})]}),(0,y.jsx)(l.A,{ml:3,children:(0,y.jsx)(D,{cell:e})})]})})};var M=s(83799);const W=e=>{const{source:t,outputshotRef:s,cellId:i}=e;return(0,y.jsx)(l.A,{ref:s,style:{marginTop:"8px"},children:(0,y.jsx)(M.f,{startDefaultKernel:!0,source:t,id:i,autoStart:!0,showToolbar:!1})})},S=()=>{const{cellId:e}=(0,n.g)();if(!e)return(0,y.jsx)(y.Fragment,{});const t=(0,u.J)(),s=(0,g.mt)(),j=s.layout().space,_=s.cell().cell,w=(0,o.S)(),v=(0,h.Z)(),{enqueueToast:f}=(0,p.d)(),{getCell:b,refreshCell:C,cloneCell:E}=(0,m.E)(),[A,O]=(0,i.useState)(),[$,R]=(0,i.useState)(!1),D=(0,i.useMemo)((()=>(0,i.createRef)()),[]);(0,i.useEffect)((()=>{const t=document.getElementById("right-panel-id"),i=(0,r.createPortal)((0,y.jsx)(x,{}),t);return s.layout().setRightPortal({portal:i,pinned:!1}),C(e).then((t=>{if(t.success){const t=b(e);t?(O(t.source),s.cell().update(t),s.layout().setItem(t),O(t.source)):v("/")}})),()=>{s.layout().setItem(void 0)}}),[e]);const k=(0,i.useCallback)((async i=>{w({title:"Are you sure?",content:"Please confirm you want to clone this cell in your private library."}).then((i=>{i&&E(e).then((e=>{e.success&&(f(e.message,{variant:"success"}),s.layout().triggerItemsRefresh(),v(`/${t?.handle}/library/cells`))}))}))}),[w,_]);return(0,y.jsx)(y.Fragment,{children:_&&A&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(a.z,{role:"header","aria-label":"Cell Editor",children:[(0,y.jsx)(a.z.TitleArea,{variant:"subtitle",children:(0,y.jsx)(a.z.Title,{children:"Cell Editor"})}),(0,y.jsxs)(a.z.Actions,{children:[(0,y.jsx)(l.A,{children:$?(0,y.jsx)(d.Q,{variant:"invisible",size:"small",onClick:()=>R(!1),children:"Hide details"}):(0,y.jsx)(d.Q,{variant:"invisible",size:"small",onClick:()=>R(!0),children:"Show details"})}),(0,y.jsx)(l.A,{ml:1,children:t&&j&&(0,y.jsx)(d.Q,{variant:"invisible",size:"small",leadingVisual:c.Nc$,onClick:k,children:"Clone"})})]})]}),(0,y.jsxs)(l.A,{children:[$&&(0,y.jsx)(l.A,{children:(0,y.jsx)(T,{})}),(0,y.jsx)(l.A,{children:(0,y.jsx)(W,{source:A,outputshotRef:D,cellId:_?.id})})]})]})})},I=S},85112:(e,t,s)=>{async function i(e,t,s,i,r,n=!1,o){let a=!0;r&&Array.isArray(r.tags)&&-1!==r.tags.indexOf("raises-exception")&&(a=!1);const l=i.execute(t,{model:s.model,stopOnError:a,suppressCodeExecutionErrors:n,onExecutionPhaseChanged:o}).future;return s._onIOPub=l.onIOPub,s._onExecuteReply=l.onReply,s.future=l,l?.done}s.d(t,{g:()=>i})},92727:(e,t,s)=>{s.d(t,{y:()=>$});var i={};s.r(i),s.d(i,{OutputModel:()=>E,OutputView:()=>A});var r=s(14809),n=s(55553),o=s(97164),a=s(5190),l=s(48319),d=s(16608),c=s(23316),u=s(62613),h=s(53054),p=s(89915),m=s(89462),g=s(30115),j=s(42418),_=s(40093),w=s(17603),y=s(35901),x=s(65325),v=s.n(x),f=s(46186),b=s.n(f),C=s(15500);b()(C.A,{insert:"head",singleton:!1}),C.A.locals;class E extends _.L1{defaults(){return Object.assign(Object.assign({},super.defaults()),{msg_id:"",outputs:[]})}initialize(e,t){super.initialize(e,t),this._outputs=new w.c({trusted:!0}),this.listenTo(this,"change:outputs",this.setOutputs),this.setOutputs()}get outputs(){return this._outputs}clear_output(e=!1){this._outputs.clear(e)}setOutputs(e,t,s){s&&s.newMessage||(this.clear_output(),this._outputs.fromJSON(JSON.parse(JSON.stringify(this.get("outputs")))))}}class A extends _.Ni{_createElement(e){return this.luminoWidget=new j.JupyterLuminoPanelWidget({view:this}),this.luminoWidget.node}_setElement(e){if(this.el||e!==this.luminoWidget.node)throw new Error("Cannot reset the DOM element.");this.el=this.luminoWidget.node,this.$el=v()(this.luminoWidget.node)}render(){super.render(),this._outputView=new y.Bw({rendermime:this.model.widget_manager.renderMime,model:this.model.outputs}),this.luminoWidget.insertWidget(0,this._outputView),this.luminoWidget.addClass("jupyter-widgets"),this.luminoWidget.addClass("widget-output"),this.update()}remove(){return this._outputView.dispose(),super.remove()}}class O extends u.FI{_viewList;constructor(e){super(),this.loader=e?.loader,this.renderMime=new h.K({initialFactories:p.dn}),this.renderMime.addFactory({safe:!1,mimeTypes:[m.a],createRenderer:e=>new m.u(e,this)},0),this._viewList=new Set,window.addEventListener("resize",(()=>{this._viewList.forEach((e=>{c.Mu.postMessage(e.luminoWidget,r.x0.ResizeMessage.UnknownSize)}))}))}async display_view(e,t){let s;try{s=await e}catch(t){const i=`Could not create a view for ${e}`;console.error(i);const r=new(j.createErrorWidgetModel(t,i));s=new j.ErrorWidgetView({model:r}),s.render()}r.x0.attach(s.luminoWidget,t),this._viewList.add(s),s.once("remove",(()=>{this._viewList.delete(s)}))}_get_comm_info(){return Promise.resolve({})}_create_comm(e,t,s,i,r){return Promise.resolve({on_close:()=>{},on_msg:()=>{},close:()=>{}})}loadClass(e,t,s){return new Promise(((e,r)=>{"@jupyter-widgets/base"===t?e(j):"@jupyter-widgets/controls"===t?e(g):"@jupyter-widgets/output"===t?e(i):void 0!==this.loader?e(this.loader(t,s)):r(`Could not load module ${t}@${s}`)})).then((i=>i[e]?i[e]:Promise.reject(`Class ${e} not found in module ${t}@${s}`)))}renderMime;loader}class $ extends O{_kernelConnection;_commRegistration;_onError;_registry;constructor(e){super(e);const t=document.createElement("script"),i=document.createElement("script");i.setAttribute("data-jupyter-widgets-cdn-only","true"),document.body.appendChild(i),t.src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js",document.body.appendChild(t),t.onload=()=>{window.define("@jupyter-widgets/base",j),window.define("@jupyter-widgets/controls",g),this._registry=new l.R,this.register=this.register.bind(this),this.registerWithKernel=this.registerWithKernel.bind(this),this._getRegistry=this._getRegistry.bind(this),this._handleCommOpen=this._handleCommOpen.bind(this),this.register({name:"@jupyter-widgets/base",version:j.JUPYTER_WIDGETS_VERSION,exports:()=>Promise.resolve().then(s.bind(s,42418))}),this.register({name:"@jupyter-widgets/controls",version:g.JUPYTER_CONTROLS_VERSION,exports:()=>Promise.resolve().then(s.bind(s,30115))})}}async _loadFromNotebook(e){const t=e.getMetadata("widgets");if(t&&t[d.s]){let e=t[d.s];e=this.filterExistingModelState(e),await this.set_state(e)}}registerWithKernel(e){this._kernelConnection=e,this._commRegistration&&this._commRegistration.dispose(),e&&e.registerCommTarget(this.comm_target_name,this._handleCommOpen)}async _handleCommOpen(e,t){const s=new n.J.services.Comm(e);await this.handle_comm_open(s,t)}_getRegistry(){return this._registry}get onError(){return this._onError}display_view(e,t){return Promise.resolve(e).then((e=>{r.x0.attach(e.luminoWidget,t),e.on("remove",(()=>{console.log("The IPyWidgets view is removed",e)}))}))}async loadClass(e,t,s){"@jupyter-widgets/base"!==t&&"@jupyter-widgets/controls"!==t||!(0,o.valid)(s)||(s=`^${s}`);let i=this._getRegistry().getAllVersions(t);const r=2===s.split(".").length?s+".0":s;if(!i){const e=await(0,a.l)(t,r),s={name:t,version:r.replaceAll("^",""),exports:{...e}};if(this.register(s),i=this._getRegistry().getAllVersions(t),!i)throw new Error(`No version of module ${t} is registered`)}const n=this._getRegistry().get(t,r);if(!n){const e=Object.keys(i);throw new Error(`Module ${t}, version ${r} is not registered, however,         ${e.join(",")} ${e.length>1?"are":"is"}`)}let l;l="function"==typeof n?await n():await n;const d=l[e];if(!d)throw new Error(`Class ${e} not found in module ${t}`);return d}callbacks(e){const t=super.callbacks(e);return Object.assign({},t,{iopub:{output:e=>this._onError.emit(e)}})}_create_comm(e,t,s,i,r){const o=this._kernelConnection?.createComm(e,t);return(s||i)&&o?.open(s,i),Promise.resolve(new n.J.services.Comm(o))}_get_comm_info(){return this._kernelConnection.requestCommInfo({target_name:this.comm_target_name}).then((e=>e.content.comms))}register(e){this._getRegistry().set(e.name,e.version,e.exports)}}},89462:(e,t,s)=>{s.d(t,{a:()=>r,u:()=>n});var i=s(14809);const r="application/vnd.jupyter.widget-view+json";class n extends i.x0{constructor(e,t){super(),this.mimeType=e.mimeType,this._manager=t}async renderModel(e){const t=e.data[this.mimeType];if(!this._manager.has_model(t.model_id))return this.node.textContent="Error creating widget: could not find model",void this.addClass("jupyter-widgets");try{const e=await this._manager.get_model(t.model_id),s=await this._manager.create_view(e);i.x0.attach(s.luminoWidget,this.node)}catch(e){console.log("Error displaying widget"),console.log(e),this.node.textContent="Error displaying widget",this.addClass("jupyter-widgets")}}mimeType;_manager}},5190:(e,t,s)=>{s.d(t,{l:()=>a});let i="https://cdn.jsdelivr.net/npm/",r=!0;const n=document.getElementsByTagName("script");Array.prototype.forEach.call(n,(e=>{i=e.getAttribute("data-jupyter-widgets-cdn")||i,r=r&&Boolean(e.getAttribute("data-jupyter-widgets-cdn-only"))}));const o=function(e){return new Promise(((t,s)=>{const i=window.requirejs;void 0===i?s("Requirejs is needed, please ensure it is loaded on the page."):i(e,t,s)}))};function a(e,t){const s=window.requirejs;if(void 0===s)throw new Error("Requirejs is needed, please ensure it is loaded on the page.");function n(){const r={paths:{}};return r.paths[e]=function(e,t){let s=e,r="index",n=e.indexOf("/");return-1!=n&&"@"==e[0]&&(n=e.indexOf("/",n+1)),-1!=n&&(r=e.substr(n+1),s=e.substr(0,n)),"@widgetti/jupyter-react"===s&&(t=t.replace("0.4.2","0.4.1")),`${i}${s}@${t}/dist/${r}`}(e,t),s.config(r),o([`${e}`])}return r?(console.log(`Loading from ${i} for ${e}@${t}`),n()):o([`${e}`]).catch((r=>{const o=r.requireModules&&r.requireModules[0];if(o)return s.undef(o),console.log(`Falling back to ${i} for ${e}@${t}`),n()}))}},16608:(e,t,s)=>{s.d(t,{s:()=>i});const i="application/vnd.jupyter.widget-state+json"},48319:(e,t,s)=>{s.d(t,{R:()=>r});var i=s(97164);class r{set(e,t,s){e in this._cache||(this._cache[e]=Object.create(null)),t in this._cache[e]?console.warn(`Version ${t} of key ${e} already registered.`):this._cache[e][t]=s}get(e,t){if(e in this._cache){const s=this._cache[e],r=(0,i.maxSatisfying)(Object.keys(s),t);if(null!==r)return s[r]}}getAllVersions(e){if(e in this._cache)return this._cache[e]}_cache=Object.create(null)}},40093:(e,t,s)=>{s.d(t,{Us:()=>r,L1:()=>n,Ni:()=>o});var i=s(42418);const r="1.0.0";class n extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:"OutputModel",_view_name:"OutputView",_model_module:"@jupyter-widgets/output",_view_module:"@jupyter-widgets/output",_model_module_version:r,_view_module_version:r})}}class o extends i.DOMWidgetView{}},15500:(e,t,s)=>{s.d(t,{A:()=>a});var i=s(52908),r=s.n(i),n=s(10293),o=s.n(n)()(r());o.push([e.id,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\n\n/* <DEPRECATED> */\n.jupyter-widgets.widget-output .jp-OutputArea-prompt, /* <DEPRECATED> */\n.jupyter-widgets.jupyter-widget-output .jp-OutputArea-prompt {\n  display: none;\n}\n",""]);const a=o}}]);