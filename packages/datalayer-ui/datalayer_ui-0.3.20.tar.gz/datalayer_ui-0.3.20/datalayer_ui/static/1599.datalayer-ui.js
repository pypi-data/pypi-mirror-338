"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[1599,9882,3303],{42552:(e,t,s)=>{s.r(t),s.d(t,{ExerciseEdit:()=>k,default:()=>S});var r=s(9387),n=s(20568),i=s(79026),a=s(97096),o=s(98754),c=s(8586),d=s(14722),l=s(99180),u=s(88996),h=s(48371),p=s(64664),x=s(47785),_=s(77672),m=s(76818),j=s(38621),y=s(5907),g=s(55388),f=s(63222),A=s(17810),b=s(53850),T=s(23530),E=s(97734),w=s(68914),C=s(50906),v=s(320),P=s(18683);const k=()=>{const{accountHandle:e,spaceHandle:t,exerciseId:s}=(0,n.g)();if(!s)return(0,P.jsx)(P.Fragment,{});const k=(0,A.J)(),{kernelManager:S,defaultKernel:I}=(0,y.PD)(),M=(0,C.mt)(),O=((0,v._O)(),(0,g.LC)()),R=M.layout().organization,D=M.layout().space,$=(0,r.useMemo)((()=>I),[S]),{cloneExercise:J,getExercise:L,getSpaceDatasets:F,refreshExercise:N,refreshSpaceDatasets:V,updateExercise:q}=(0,b.E)(),[W,Y]=(0,r.useState)(F()),z=O.outputs?.get("exercise-pre")?.input,Q=O.outputs?.get("exercise-solution")?.input,B=O.outputs?.get("exercise-question")?.input,K=O.outputs?.get("exercise-test")?.input,U=(0,i.S)(),[X,H]=(0,r.useState)(!1),Z=(0,T.Z)(),{enqueueToast:G}=(0,E.d)(),[ee,te]=(0,r.useState)();(0,r.useEffect)((()=>{N(s).then((e=>{if(e.success){const e=L(s);e?(te(e),M.layout().setItem(e),re((t=>({...t,name:e.name,description:e.description,help:e.help})))):Z("/")}}))}),[s]),(0,r.useEffect)((()=>{D&&V(D,R).then((e=>{e.success&&Y(F())}))}),[D]);const[se,re]=(0,r.useState)({name:"",description:"",help:'Use the assignment operator "=" to create the variable "x".'}),[ne,ie]=(0,r.useState)({name:!1,description:!1,help:!0});(0,r.useEffect)((()=>{ie({...ne,name:se.name.length>2,description:se.description.length>2})}),[se]);const ae=(0,r.useCallback)((async e=>{U({title:"Are you sure?",content:"Please confirm you want to clone this exercise in your private library."}).then((e=>{e&&J(s).then((e=>{e.success&&(G(e.message,{variant:"success"}),M.layout().triggerItemsRefresh(),Z(`/${k?.handle}/library/exercises`))}))}))}),[U,ee]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(a.z,{children:(0,P.jsxs)(o.A,{display:"flex",children:[(0,P.jsx)(o.A,{flex:1,children:(0,P.jsx)(c.A,{sx:{fontSize:3},children:"Exercise editor"})}),(0,P.jsx)(o.A,{children:(0,P.jsxs)(d.A,{children:[(0,P.jsx)(l.Q,{variant:"default",size:"small",onClick:()=>Z(`/${e}/${t}/exercises/${ee?.id}/take`),children:"Take this exercise"}),D&&(0,P.jsx)(l.Q,{variant:"default",size:"small",leadingVisual:j.Nc$,onClick:ae,children:"Clone"})]})})]})}),ee&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsxs)(o.A,{children:[(0,P.jsxs)(o.A,{sx:{label:{marginTop:2}},children:[(0,P.jsxs)(u.A,{children:[(0,P.jsx)(u.A.Label,{children:"Name"}),(0,P.jsx)(h.A,{block:!0,value:se.name,onChange:e=>{re((t=>({...t,name:e.target.value})))}}),!ne.name&&(0,P.jsx)(u.A.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,P.jsxs)(u.A,{children:[(0,P.jsx)(u.A.Label,{children:"Description"}),(0,P.jsx)(p.Ay,{block:!0,value:se.description,onChange:e=>{re((t=>({...t,description:e.target.value})))}}),!ne.description&&(0,P.jsx)(u.A.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,P.jsxs)(o.A,{display:"grid",gridTemplateColumns:"1fr 1fr",sx:{gap:3},children:[(0,P.jsxs)(o.A,{children:[(0,P.jsxs)(u.A,{children:[(0,P.jsx)(u.A.Label,{children:"Preliminary code"}),(0,P.jsx)(u.A.Caption,{children:"This is the preliminary code that will be run before the exercise is taken."})]}),(0,P.jsx)(f.k,{showEditor:!0,autoRun:!0,kernel:$,code:ee.codePre,id:"exercise-pre"})]}),(0,P.jsxs)(o.A,{children:[(0,P.jsxs)(u.A,{children:[(0,P.jsx)(u.A.Label,{children:"Datasets"}),(0,P.jsx)(u.A.Caption,{children:"Select the datasets to be used in the prelimary code."})]}),(0,P.jsx)(x.l,{showDividers:!0,role:"listbox","aria-label":"Select assignees",children:W.map((e=>(0,P.jsxs)(x.l.Item,{role:"option",onClick:t=>{t.preventDefault(),O.setDataset("exercise-pre",e)},children:[(0,P.jsx)(x.l.LeadingVisual,{children:(0,P.jsx)(j.bN0,{})}),e.name,(0,P.jsxs)(x.l.Description,{children:[e.mimeType," ",(0,w.b)(e.description)]})]},e.id)))})]})]}),(0,P.jsxs)(u.A,{children:[(0,P.jsx)(u.A.Label,{children:"Solution Code"}),(0,P.jsx)(u.A.Caption,{children:"This is the expected solution code. The student will never see this content."})]}),(0,P.jsx)(f.k,{showEditor:!0,autoRun:!0,kernel:$,id:"exercise-solution",code:ee.codeSolution}),(0,P.jsxs)(u.A,{children:[(0,P.jsx)(u.A.Label,{children:"Question code"}),(0,P.jsx)(u.A.Caption,{children:"This the question code that will be shown to the student."})]}),(0,P.jsx)(f.k,{showEditor:!0,autoRun:!1,kernel:$,id:"exercise-question",code:ee.codeQuestion}),(0,P.jsx)(o.A,{children:(0,P.jsxs)(u.A,{children:[(0,P.jsx)(u.A.Label,{children:"Help for the student"}),(0,P.jsx)(u.A.Caption,{children:"This a help that will be shown to the student if he asks for it."}),(0,P.jsx)(p.Ay,{block:!0,value:se.help,onChange:e=>{re((t=>({...t,help:e.target.value})))}}),!ne.help&&(0,P.jsx)(u.A.Validation,{variant:"error",children:"Hint must have more than 2 characters"})]})}),(0,P.jsxs)(u.A,{children:[(0,P.jsx)(u.A.Label,{children:"Test the Solution code"}),(0,P.jsxs)(u.A.Caption,{children:["Write the test code that will be run on the student's code during the exercise. Please refer to the ",(0,P.jsx)(_.A,{href:"https://nbgrader.readthedocs.io/en/latest/user_guide/autograding_resources.html",target:"_blank",children:"nbgrader"})," documentation."]})]}),(0,P.jsx)(f.k,{showEditor:!0,autoRun:!1,disableRun:!0,kernel:$,id:"exercise-test",code:ee.codeTest})]}),(0,P.jsx)(m.A,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:'Validate you tests with this button. It will run the "Preliminary code", then will run the "Test code" on the "Solution code". When a student will take the exercise, the "Test code" will be run on the "Student code".'}),(0,P.jsx)(l.Q,{variant:"danger",leadingVisual:j.Qvf,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),O.setExecuteRequest("exercise-test",`\nsetup_state(stu_code = """${ee.codePre}\n${B}""", sol_code = """${ee.codePre}\n${Q}""")\n${K}\n`)},children:"Test"}),(0,P.jsx)(m.A,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"Once you are confident with your test, you can create the exercise. Don't worry, you can still update it before making it public."}),(0,P.jsx)(l.Q,{variant:"primary",disabled:!ne.name||!ne.description,sx:{marginTop:2},onClick:async()=>{q({id:ee?.id,name:se.name,description:se.description,help:se.help,codePre:z??"",codeSolution:Q??"",codeQuestion:B??"",codeTest:K??""}).then((e=>{e.success&&(G("The exercise is successfully updated.",{variant:"success"}),M.layout().triggerItemsRefresh())}))},children:"Update exercise"})]}),(0,P.jsxs)(o.A,{children:[(0,P.jsx)(c.A,{as:"h2",sx:{fontSize:4,fontWeight:"normal",color:"danger.fg",mb:2},children:"Danger zone"}),(0,P.jsxs)(o.A,{sx:{border:"1px solid",borderColor:"danger.emphasis",borderRadius:2,p:3,display:"flex",alignItems:"center",justifyContent:"space-between",gap:3},children:[(0,P.jsxs)(o.A,{sx:{display:"grid",gap:1},children:[(0,P.jsx)(m.A,{sx:{fontSize:1,fontWeight:"bold",color:"danger.fg"},children:"Delete exercise"}),(0,P.jsx)(m.A,{sx:{fontSize:1,color:"fg.muted"},children:"Are you sure you don't want to just upgrade your account?"})]}),(0,P.jsx)(l.Q,{variant:"danger",onClick:e=>H(!0),disabled:!0,children:"Delete exercise"})]})]})]})]})},S=k},5190:(e,t,s)=>{s.d(t,{l:()=>o});let r="https://cdn.jsdelivr.net/npm/",n=!0;const i=document.getElementsByTagName("script");Array.prototype.forEach.call(i,(e=>{r=e.getAttribute("data-jupyter-widgets-cdn")||r,n=n&&Boolean(e.getAttribute("data-jupyter-widgets-cdn-only"))}));const a=function(e){return new Promise(((t,s)=>{const r=window.requirejs;void 0===r?s("Requirejs is needed, please ensure it is loaded on the page."):r(e,t,s)}))};function o(e,t){const s=window.requirejs;if(void 0===s)throw new Error("Requirejs is needed, please ensure it is loaded on the page.");function i(){const n={paths:{}};return n.paths[e]=function(e,t){let s=e,n="index",i=e.indexOf("/");return-1!=i&&"@"==e[0]&&(i=e.indexOf("/",i+1)),-1!=i&&(n=e.substr(i+1),s=e.substr(0,i)),"@widgetti/jupyter-react"===s&&(t=t.replace("0.4.2","0.4.1")),`${r}${s}@${t}/dist/${n}`}(e,t),s.config(n),a([`${e}`])}return n?(console.log(`Loading from ${r} for ${e}@${t}`),i()):a([`${e}`]).catch((n=>{const a=n.requireModules&&n.requireModules[0];if(a)return s.undef(a),console.log(`Falling back to ${r} for ${e}@${t}`),i()}))}},16608:(e,t,s)=>{s.d(t,{s:()=>r});const r="application/vnd.jupyter.widget-state+json"},48319:(e,t,s)=>{s.d(t,{R:()=>n});var r=s(97164);class n{set(e,t,s){e in this._cache||(this._cache[e]=Object.create(null)),t in this._cache[e]?console.warn(`Version ${t} of key ${e} already registered.`):this._cache[e][t]=s}get(e,t){if(e in this._cache){const s=this._cache[e],n=(0,r.maxSatisfying)(Object.keys(s),t);if(null!==n)return s[n]}}getAllVersions(e){if(e in this._cache)return this._cache[e]}_cache=Object.create(null)}},69882:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{APPLICATION_JAVASCRIPT_MIMETYPE:()=>APPLICATION_JAVASCRIPT_MIMETYPE,ExperimentalRenderedJavascript:()=>ExperimentalRenderedJavascript,TEXT_JAVASCRIPT_MIMETYPE:()=>TEXT_JAVASCRIPT_MIMETYPE,default:()=>__WEBPACK_DEFAULT_EXPORT__,rendererFactory:()=>rendererFactory});var _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54704);const TEXT_JAVASCRIPT_MIMETYPE="text/javascript",APPLICATION_JAVASCRIPT_MIMETYPE="application/javascript";function evalInContext(code,element,document,window){return eval(code)}class ExperimentalRenderedJavascript extends _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__.TS{render(e){const t=this.translator.load("jupyterlab"),s=()=>{try{const t=e.data[this.mimeType];return t&&evalInContext(t,this.node,document,window),Promise.resolve()}catch(e){return Promise.reject(e)}};if(!e.trusted){const e=document.createElement("pre");e.textContent=t.__("Are you sure that you want to run arbitrary Javascript within your JupyterLab session?");const r=document.createElement("button");return r.textContent=t.__("Run"),this.node.appendChild(e),this.node.appendChild(r),r.onclick=e=>{this.node.textContent="",s()},Promise.resolve()}return s()}}const rendererFactory={safe:!1,mimeTypes:[TEXT_JAVASCRIPT_MIMETYPE,APPLICATION_JAVASCRIPT_MIMETYPE],createRenderer:e=>new ExperimentalRenderedJavascript(e)},extension={id:"@jupyterlab/javascript-extension:factory",description:"Adds renderer for JavaScript content.",rendererFactory,rank:0,dataType:"string"},__WEBPACK_DEFAULT_EXPORT__=extension},83303:(e,t,s)=>{s.r(t),s.d(t,{MIME_TYPE:()=>c,MIME_TYPES_JSONL:()=>d,RenderedJSON:()=>l,default:()=>h,rendererFactory:()=>u});var r=s(30808),n=s(85181),i=s(14809),a=s(9387),o=s(72447);const c="application/json",d=["text/jsonl","application/jsonl","application/json-lines"];class l extends i.x0{constructor(e){super(),this._rootDOM=null,this.addClass("jp-RenderedJSON"),this.addClass("CodeMirror"),this._mimeType=e.mimeType,this.translator=e.translator||n.wK}[r._.symbol](){return()=>r._.printWidget(this)}async renderModel(e){const{Component:t}=await s.e(1671).then(s.bind(s,74052));let r;if(d.indexOf(this._mimeType)>=0){const t=(e.data[this._mimeType]||"").trim().split(/\n/);r=JSON.parse(`[${t.join(",")}]`)}else r=e.data[this._mimeType]||{};const n=e.metadata[this._mimeType]||{};return null===this._rootDOM&&(this._rootDOM=(0,o.H)(this.node)),new Promise(((e,s)=>{this._rootDOM.render(a.createElement(t,{data:r,metadata:n,translator:this.translator,forwardedRef:()=>e()}))}))}onBeforeDetach(e){this._rootDOM&&(this._rootDOM.unmount(),this._rootDOM=null)}}const u={safe:!0,mimeTypes:[c,...d],createRenderer:e=>new l(e)},h=[{id:"@jupyterlab/json-extension:factory",description:"Adds renderer for JSON content.",rendererFactory:u,rank:0,dataType:"json",documentWidgetFactoryOptions:{name:"JSON",primaryFileType:"json",fileTypes:["json","notebook","geojson"],defaultFor:["json"]}},{id:"@jupyterlab/json-lines-extension:factory",description:"Adds renderer for JSONLines content.",rendererFactory:u,rank:0,dataType:"string",documentWidgetFactoryOptions:{name:"JSONLines",primaryFileType:"jsonl",fileTypes:["jsonl","ndjson"],defaultFor:["jsonl","ndjson"]}}]}}]);