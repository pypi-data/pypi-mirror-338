!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("node_modules/@microsoft/immersive-reader-sdk/lib/immersive-reader-sdk",[],t):"object"==typeof exports?exports.ImmersiveReader=t():e.ImmersiveReader=t()}(window,function(){return function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CookiePolicy=void 0,(n=t.CookiePolicy||(t.CookiePolicy={}))[n.Disable=0]="Disable",n[n.Enable=1]="Enable"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CookiePolicy=t.launchAsync=t.close=t.renderButtons=void 0;var n=r(2);Object.defineProperty(t,"renderButtons",{enumerable:!0,get:function(){return n.renderButtons}});var o=r(3);Object.defineProperty(t,"close",{enumerable:!0,get:function(){return o.close}}),Object.defineProperty(t,"launchAsync",{enumerable:!0,get:function(){return o.launchAsync}});var i=r(0);Object.defineProperty(t,"CookiePolicy",{enumerable:!0,get:function(){return i.CookiePolicy}}),"undefined"!=typeof window&&window.addEventListener("load",function(){var e;window.hasOwnProperty("Promise")||("https://contentstorage.onenote.office.net/onenoteltir/permanent-static-resources/promise-polyfill.min.js",(e=document.createElement("script")).src="https://contentstorage.onenote.office.net/onenoteltir/permanent-static-resources/promise-polyfill.min.js",document.head.appendChild(e)),n.renderButtons()})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderButtons=void 0;var n={af:"Indompelende leser",am:"በህያው ስሜት ፈጣሪ ዕይታ አንባቢ",ar:"القارئ الشامل",as:"ইমাৰচিভ ৰিডাৰ",az:"İmmersiv Oxuyucu",be:"Імерсіўны чытальнік",bg:"Концентриран четец",bn:"মনোগ্রাহী পাঠক","bn-bd":"ইমার্সিভ পাঠক",bs:"Koncentrirani čitalac",ca:"Lector immersiu",cs:"Asistivní čtečka","cy-gb":"Darllenydd Ymdrwythol",da:"Forenklet læser",de:"Plastischer Reader",el:"Προηγμένο πρόγραμμα ανάγνωσης",en:"Immersive Reader",es:"Lector inmersivo",et:"Süvaluger",eu:"Irakurgailu murgiltzailea",fa:"خواننده همه‌جانبه",fi:"Syventävä lukuohjelma",fil:"Immersive Reader",fr:"Lecteur immersif","ga-ie":"Léitheoir tumthach",gd:"An leughadair ùr-nòsach",gl:"Lector avanzado",gu:"ઇમર્સિવ રીડર",ha:"Mai karatu Mai barbazawa",he:"תצוגת קריאה מודרנית",hi:"इमर्सिव रीडर",hr:"Stopljeni čitač",hu:"Modern olvasó",hy:"Խորասուզված ընթերցիչ",id:"Pembaca Imersif",ig:"Ọgụụ Kenzipụtara",is:"Aðgengilegt lestrarumhverfi",it:"Strumento di lettura immersiva",ja:"イマーシブ リーダー",ka:"იმერსიული წამკითხველი",kk:"Иммерсивті оқу құралы",km:"កម្មវិធីអានពណ៌រំលេចនៅលើអេក្រង់",kn:"ಇಮ್ಮರ್ಸಿವ್ ಓದುಗ",ko:"몰입형 리더",kok:"तंद्री लागिल्लो वाचक","ku-arab":"خوێنەری پڕ",ky:"Курчаган Окугуч",lb:"Immersive Reader",lo:"ຕົວອ່ານອິມເມີສີບ",lt:"Įtraukianti skaitytuvė",lv:"Tīrskata lasītājs",mi:"Pūpānui Rumaki",mk:"Сеопфатен читач",ml:"ഇമ്മേഴ്‌സീവ് റീഡർ",mn:"Идэвхтэй уншигч",mr:"इमर्सिव्ह वाचक",ms:"Pembaca Imersif",mt:"Qarrej Immersiv",ne:"इमेर्सिभ रिडर",nl:"Insluitende lezer","nn-no":"Engasjerande lesar",no:"Engasjerende leser",nso:"Go Bala ka Mongwalo o Mokoto",or:"ଇମରସିଭ୍ ରିଡର୍",pa:"ਇਮਰਸਿਵ ਰੀਡਰ","pa-arab":"گھیرن آلا مطالعہ کار",pl:"Czytnik immersyjny",prs:"خواننده نمایش",pt:"Leitura Avançada",quc:"Nim ucholajil sik'inel uwach",quz:"Wankisqa Ñawiq",ro:"Immersive Reader",ru:"Иммерсивное средство чтения",rw:"Insakazasoma",sd:"امرسو ريڊر",si:"ගිලෙන සුළු කියවනය",sk:"Imerzná čítačka",sl:"Potopni bralnik",sq:"Lexuesi kredhës","sr-cyrl-ba":"Концентрисани читалац","sr-cyrl-rs":"Концентрисани читалац","sr-latn-rs":"Koncentrisani čitalac",sv:"Avancerad läsare",sw:"Kisomaji cha Kuzamisha",ta:"அற்புதமான ரீடர்",te:"మంత్రముగ్ధులను చేసే పఠన సాధనం","tg-cyrl-tj":"Хонандаи фарогир",th:"โปรแกรมช่วยอ่าน",ti:"ኣንባቢ ሕሉው ስምዒት ፈጣሪ",tk:"Giňişleýin okaýjy",tn:"Sebadi sa Imesife",tr:"Tam Ekran Okuyucu",tt:"Чолгап алучы уку чарасы","ug-cn":"چۆكمە ئوقۇغۇچ",uk:"Занурення в текст",ur:"امرسیو مطالعہ کار",uz:"Immersiv mutolaa vositasi",vi:"Trình đọc Chân thực",wo:"Jàngukaay bu Rafet",xh:"Isifundi Esikhulu",yo:"Ìwò Alámùtán",zh:"沉浸式阅读器","zh-hant":"沈浸式閱讀程式",zu:"Isifundi Sokuzizwisa"};function l(e){var t=document.createElement("img");t.src="https://contentstorage.onenote.office.net/onenoteltir/permanent-static-resources/immersive-reader-icon.svg";var r=e.getAttribute("data-icon-px-size")||"20";t.style.height=t.style.width=r+"px",t.style.verticalAlign="middle",t.style.marginTop="-2px";var n=e.getAttribute("data-locale")||"en";t.alt=c(n),e.appendChild(t)}function u(e){var t=document.createElement("span"),r=e.getAttribute("data-locale")||"en";t.textContent=c(r),e.appendChild(t)}function c(e){return e=e.toLowerCase(),n[e]?n[e]:"zh-hk"===e||"zh-mo"===e||"zh-tw"===e?n["zh-hant"]:(e=e.substring(0,e.lastIndexOf("-")),n[e]?n[e]:(e=e.substring(0,e.lastIndexOf("-")),n[e]?n[e]:n.en))}t.renderButtons=function(e){var t=document.createElement("style");t.innerHTML=".immersive-reader-button{cursor:pointer;display:inline-block;padding:5px;} .immersive-reader-button:hover{background:rgba(0,0,0,.05);border-radius:2px",document.head.appendChild(t);var r,n,o=[].slice.call(document.getElementsByClassName("immersive-reader-button"));e&&e.elements&&(o=e.elements);for(var i=0,a=o;i<a.length;i++){var s=a[i];s.setAttribute("role","button");var d=s.getAttribute("data-locale")||"en";switch(s.setAttribute("aria-label",c(d)),s.getAttribute("data-button-style")||"icon"){case"icon":l(s);break;case"text":u(s);break;case"iconAndText":l(s),r=s,n=void 0,(n=document.createElement("span")).style.marginLeft="8px",r.appendChild(n),u(s)}}}},function(e,t,r){"use strict";var h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidSubdomain=t.close=t.launchAsync=void 0;var b=r(0),y=r(4),g={};g[y.ErrorCode.TokenExpired]="The access token supplied is expired.",g[y.ErrorCode.Throttled]="You have exceeded your quota.",g[y.ErrorCode.ServerError]="An error occurred when calling the server to process the text.";var k=!(g[y.ErrorCode.InvalidSubdomain]="The subdomain supplied is invalid.");function w(e){return!!e&&new RegExp("^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])$").test(e)}t.launchAsync=function(m,p,f,v){return k?Promise.reject("Immersive Reader is already launching"):new Promise(function(i,a){if(m)if(f)if(f.chunks)if(f.chunks.length)if(w(p)||v&&v.customDomain){k=!0;var s=Date.now();(v=h({uiZIndex:1e3,timeout:15e3,useWebview:!1,allowFullscreen:!0,hideExitButton:!1,cookiePolicy:b.CookiePolicy.Disable},v)).uiZIndex&&"number"==typeof v.uiZIndex||(v.uiZIndex=1e3);var e=null,d=document.createElement("div"),l=v.useWebview?document.createElement("webview"):document.createElement("iframe");l.allow="autoplay";var t=document.createElement("style");t.innerHTML="body{height:100%;overflow:hidden;}";var u=function(){e&&(window.clearTimeout(e),e=null)},r=function(){document.body.contains(d)&&document.body.removeChild(d),window.removeEventListener("message",n),u(),t.parentNode&&t.parentNode.removeChild(t)},c=function(){if(r(),v.onExit)try{v.onExit()}catch(e){}};r();var n=function(e){if(e&&e.data&&"string"==typeof e.data)if("ImmersiveReader-ReadyForContent"===e.data){u();var t={cogSvcsAccessToken:m,cogSvcsSubdomain:p,request:f,launchToPostMessageSentDurationInMs:Date.now()-s,disableFirstRun:v.disableFirstRun,readAloudOptions:v.readAloudOptions,translationOptions:v.translationOptions,displayOptions:v.displayOptions,sendPreferences:!!v.onPreferencesChanged,preferences:v.preferences};l.contentWindow.postMessage(JSON.stringify({messageType:"Content",messageValue:t}),"*")}else if("ImmersiveReader-Exit"===e.data)c();else if(e.data.startsWith("ImmersiveReader-LaunchResponse:")){var r=null,n=null,o=null;try{o=JSON.parse(e.data.substring("ImmersiveReader-LaunchResponse:".length))}catch(e){}o&&o.success?r={container:d,sessionId:o.sessionId,charactersProcessed:o.meteredContentSize}:n=o&&!o.success?{code:o.errorCode,message:g[o.errorCode],sessionId:o.sessionId}:{code:y.ErrorCode.ServerError,message:g[y.ErrorCode.ServerError]},k=!1,r?(u(),i(r)):n&&(c(),a(n))}else if(e.data.startsWith("ImmersiveReader-Preferences:")&&v.onPreferencesChanged&&"function"==typeof v.onPreferencesChanged)try{v.onPreferencesChanged(e.data.substring("ImmersiveReader-Preferences:".length))}catch(e){}};window.addEventListener("message",n),e=window.setTimeout(function(){r(),k=!1,a({code:y.ErrorCode.Timeout,message:"Page failed to load after timeout ("+v.timeout+" ms)"})},v.timeout),v.allowFullscreen&&l.setAttribute("allowfullscreen",""),l.style.cssText="position: static; width: 100vw; height: 100vh; left: 0; top: 0; border-width: 0",v.useWebview&&l.addEventListener("loadstop",function(){l.contentWindow.postMessage(JSON.stringify({messageType:"WebviewHost"}),"*")});var o=(v.customDomain?v.customDomain:"https://"+p+".cognitiveservices.azure.com/immersivereader/webapp/v1.0/")+"reader?exitCallback=ImmersiveReader-Exit&sdkPlatform=js&sdkVersion=1.1.0";o+="&cookiePolicy="+(v.cookiePolicy===b.CookiePolicy.Enable?"enable":"disable"),v.hideExitButton&&(o+="&hideExitButton=true"),v.uiLang&&(o+="&omkt="+v.uiLang),l.src=o,d.style.cssText="position: fixed; width: 100vw; height: 100vh; left: 0; top: 0; border-width: 0; -webkit-perspective: 1px; z-index: "+v.uiZIndex+"; background: white; overflow: hidden",d.appendChild(l),document.body.appendChild(d),document.head.appendChild(t)}else a({code:y.ErrorCode.InvalidSubdomain,message:g[y.ErrorCode.InvalidSubdomain]});else a({code:y.ErrorCode.BadArgument,message:"Chunks must not be empty"});else a({code:y.ErrorCode.BadArgument,message:"Chunks must not be null"});else a({code:y.ErrorCode.BadArgument,message:"Content must not be null"});else a({code:y.ErrorCode.BadArgument,message:"Token must not be null"})})},t.close=function(){window.postMessage("ImmersiveReader-Exit","*")},t.isValidSubdomain=w},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0,(n=t.ErrorCode||(t.ErrorCode={})).BadArgument="BadArgument",n.Timeout="Timeout",n.TokenExpired="TokenExpired",n.Throttled="Throttled",n.ServerError="ServerError",n.InvalidSubdomain="InvalidSubdomain"}])}),require(["jquery","node_modules/@microsoft/immersive-reader-sdk/lib/immersive-reader-sdk"],function(i,a){"use strict";i(document).ready(function(){function e(){new Promise(function(t,r){i.ajax({url:i("body").data("portalUrl")+"/@immersive-reader-token",type:"GET",headers:{Accept:"application/json"},success:function(e){e.error?r(e.error):t(e)},error:function(e){r(e)}})}).then(function(e){var t=e.token,r=e.subdomain,n="";if(i("body").hasClass("template-rernews_view"))n=i(".news-text").html()||"";else if(i("body").hasClass("portaltype-bando"))n=i(".rer-contextual-text").html()||"";else if(i("body").hasClass("portaltype-event")){n=(i(".event.summary.details").html()||"")+(i("#parent-fieldname-text").html()||"")}else n=i("body").hasClass("template-collection_bandi_view")||i("body").hasClass("template-collection_bandi_tipologia_view")?i("#content .document-text").html()||"":i("#content-core").html()||"";var o={title:i("h1.documentFirstHeading").text(),chunks:[{content:n,mimeType:"text/html"}]};a.launchAsync(t,r,o,{uiZIndex:2e3}).catch(function(e){alert("Impossibile caricare Immersive Reader."),console.error(e)})}).catch(function(e){alert("Impossibile caricare Immersive Reader."),console.error(e)})}i(".template-rernews_view #immersive-reader-wrapper").insertBefore(".template-rernews_view .news-text"),i(".immersive-reader-link").click(function(){e()})})}),define("js/src/index.js",function(){});
//# sourceMappingURL=rer-immersive-reader-compiled.min.js.map