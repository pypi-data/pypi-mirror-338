{"version":3,"file":"2309.a0dcf0081e6bb6bd.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/resources/codemirror.ts"],"sourcesContent":["import { indentLess, indentMore } from \"@codemirror/commands\";\nimport {\n  foldService,\n  HighlightStyle,\n  StreamLanguage,\n  syntaxHighlighting,\n} from \"@codemirror/language\";\nimport { jinja2 } from \"@codemirror/legacy-modes/mode/jinja2\";\nimport { yaml } from \"@codemirror/legacy-modes/mode/yaml\";\nimport { Compartment } from \"@codemirror/state\";\nimport type { KeyBinding } from \"@codemirror/view\";\nimport { EditorView } from \"@codemirror/view\";\nimport { tags } from \"@lezer/highlight\";\n\nexport { autocompletion } from \"@codemirror/autocomplete\";\nexport { defaultKeymap, history, historyKeymap } from \"@codemirror/commands\";\nexport { highlightingFor, foldGutter } from \"@codemirror/language\";\nexport { highlightSelectionMatches, searchKeymap } from \"@codemirror/search\";\nexport { EditorState } from \"@codemirror/state\";\nexport {\n  crosshairCursor,\n  drawSelection,\n  EditorView,\n  highlightActiveLine,\n  keymap,\n  lineNumbers,\n  rectangularSelection,\n} from \"@codemirror/view\";\nexport { indentationMarkers } from \"@replit/codemirror-indentation-markers\";\nexport { tags } from \"@lezer/highlight\";\n\nexport const langs = {\n  jinja2: StreamLanguage.define(jinja2),\n  yaml: StreamLanguage.define(yaml),\n};\n\nexport const langCompartment = new Compartment();\nexport const readonlyCompartment = new Compartment();\nexport const linewrapCompartment = new Compartment();\nexport const foldingCompartment = new Compartment();\n\nexport const tabKeyBindings: KeyBinding[] = [\n  { key: \"Tab\", run: indentMore },\n  {\n    key: \"Shift-Tab\",\n    run: indentLess,\n  },\n];\n\nexport const haTheme = EditorView.theme({\n  \"&\": {\n    color: \"var(--primary-text-color)\",\n    backgroundColor:\n      \"var(--code-editor-background-color, var(--mdc-text-field-fill-color, whitesmoke))\",\n    borderRadius:\n      \"var(--mdc-shape-small, 4px) var(--mdc-shape-small, 4px) 0px 0px\",\n    caretColor: \"var(--secondary-text-color)\",\n    height: \"var(--code-mirror-height, auto)\",\n    maxHeight: \"var(--code-mirror-max-height, unset)\",\n  },\n\n  \"&.cm-editor.cm-focused\": {\n    outline: \"none\",\n  },\n\n  \"&.cm-focused .cm-cursor\": {\n    borderLeftColor: \"var(--secondary-text-color)\",\n  },\n\n  \".cm-selectionBackground, ::selection\": {\n    backgroundColor: \"rgba(var(--rgb-primary-color), 0.1)\",\n  },\n\n  \"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground\": {\n    backgroundColor: \"rgba(var(--rgb-primary-color), 0.2)\",\n  },\n\n  \".cm-activeLine\": {\n    backgroundColor: \"rgba(var(--rgb-secondary-text-color), 0.1)\",\n  },\n\n  \".cm-scroller\": { outline: \"none\" },\n\n  \".cm-content\": {\n    caretColor: \"var(--secondary-text-color)\",\n    paddingTop: \"16px\",\n    paddingBottom: \"16px\",\n  },\n\n  \".cm-panels\": {\n    backgroundColor: \"var(--primary-background-color)\",\n    color: \"var(--primary-text-color)\",\n  },\n  \".cm-panels.top\": { borderBottom: \"1px solid var(--divider-color)\" },\n  \".cm-panels.bottom\": { borderTop: \"1px solid var(--divider-color)\" },\n\n  \".cm-button\": {\n    border: \"1px solid var(--primary-color)\",\n    padding: \"0px 16px\",\n    textTransform: \"uppercase\",\n    margin: \"4px\",\n    background: \"none\",\n    color: \"var(--primary-color)\",\n    fontFamily:\n      \"var(--mdc-typography-button-font-family, var(--mdc-typography-font-family, Roboto, sans-serif))\",\n    fontSize: \"var(--mdc-typography-button-font-size, 0.875rem)\",\n    height: \"36px\",\n    fontWeight: \"var(--mdc-typography-button-font-weight, 500)\",\n    borderRadius: \"4px\",\n    letterSpacing: \"var(--mdc-typography-button-letter-spacing, 0.0892857em)\",\n  },\n\n  \".cm-textfield\": {\n    padding: \"4px 0px 5px\",\n    borderRadius: \"0\",\n    fontSize: \"16px\",\n    color: \"var(--primary-text-color)\",\n    border: \"0\",\n    background: \"none\",\n    fontFamily: \"Roboto\",\n    borderBottom: \"1px solid var(--secondary-text-color)\",\n    margin: \"4px 4px 0\",\n    \"& ::placeholder\": {\n      color: \"var(--secondary-text-color)\",\n    },\n    \"&:focus\": {\n      outline: \"none\",\n      borderBottom: \"2px solid var(--primary-color)\",\n      paddingBottom: \"4px\",\n    },\n  },\n\n  \".cm-tooltip\": {\n    color: \"var(--primary-text-color)\",\n    backgroundColor:\n      \"var(--code-editor-background-color, var(--card-background-color))\",\n    border: \"1px solid var(--divider-color)\",\n    borderRadius: \"var(--mdc-shape-medium, 4px)\",\n    boxShadow:\n      \"0px 5px 5px -3px rgb(0 0 0 / 20%), 0px 8px 10px 1px rgb(0 0 0 / 14%), 0px 3px 14px 2px rgb(0 0 0 / 12%)\",\n  },\n\n  \"& .cm-tooltip.cm-tooltip-autocomplete > ul > li\": {\n    padding: \"4px 8px\",\n  },\n\n  \"& .cm-tooltip-autocomplete ul li[aria-selected]\": {\n    background: \"var(--primary-color)\",\n    color: \"var(--text-primary-color)\",\n  },\n\n  \".cm-completionIcon\": {\n    display: \"none\",\n  },\n\n  \".cm-completionDetail\": {\n    fontFamily: \"Roboto\",\n    color: \"var(--secondary-text-color)\",\n  },\n\n  \"li[aria-selected] .cm-completionDetail\": {\n    color: \"var(--text-primary-color)\",\n  },\n\n  \"& .cm-completionInfo.cm-completionInfo-right\": {\n    left: \"calc(100% + 4px)\",\n  },\n\n  \"& .cm-tooltip.cm-completionInfo\": {\n    padding: \"4px 8px\",\n    marginTop: \"-5px\",\n  },\n\n  \".cm-selectionMatch\": {\n    backgroundColor: \"rgba(var(--rgb-primary-color), 0.1)\",\n  },\n\n  \".cm-searchMatch\": {\n    backgroundColor: \"rgba(var(--rgb-accent-color), .2)\",\n    outline: \"1px solid rgba(var(--rgb-accent-color), .4)\",\n  },\n  \".cm-searchMatch.selected\": {\n    backgroundColor: \"rgba(var(--rgb-accent-color), .4)\",\n    outline: \"1px solid var(--accent-color)\",\n  },\n\n  \".cm-gutters\": {\n    backgroundColor:\n      \"var(--code-editor-gutter-color, var(--secondary-background-color, whitesmoke))\",\n    color: \"var(--paper-dialog-color, var(--secondary-text-color))\",\n    border: \"none\",\n    borderRight: \"1px solid var(--secondary-text-color)\",\n    paddingRight: \"1px\",\n  },\n  \"&.cm-focused .cm-gutters\": {\n    borderRight: \"2px solid var(--primary-color)\",\n    paddingRight: \"0\",\n  },\n  \".cm-gutterElement.lineNumber\": { color: \"inherit\" },\n});\n\nconst haHighlightStyle = HighlightStyle.define([\n  { tag: tags.keyword, color: \"var(--codemirror-keyword, #6262FF)\" },\n  {\n    tag: [\n      tags.name,\n      tags.deleted,\n      tags.character,\n      tags.propertyName,\n      tags.macroName,\n    ],\n    color: \"var(--codemirror-property, #905)\",\n  },\n  {\n    tag: [tags.function(tags.variableName), tags.labelName],\n    color: \"var(--codemirror-variable, #07a)\",\n  },\n  {\n    tag: [tags.color, tags.constant(tags.name), tags.standard(tags.name)],\n    color: \"var(--codemirror-qualifier, #690)\",\n  },\n  {\n    tag: [tags.definition(tags.name), tags.separator],\n    color: \"var(--codemirror-def, #8DA6CE)\",\n  },\n  {\n    tag: [\n      tags.typeName,\n      tags.className,\n      tags.number,\n      tags.changed,\n      tags.annotation,\n      tags.modifier,\n      tags.self,\n      tags.namespace,\n    ],\n    color: \"var(--codemirror-number, #ca7841)\",\n  },\n  {\n    tag: [\n      tags.operator,\n      tags.operatorKeyword,\n      tags.url,\n      tags.escape,\n      tags.regexp,\n      tags.link,\n      tags.special(tags.string),\n    ],\n    color: \"var(--codemirror-operator, #cda869)\",\n  },\n  { tag: tags.comment, color: \"var(--codemirror-comment, #777)\" },\n  {\n    tag: tags.meta,\n    color: \"var(--codemirror-meta, var(--primary-text-color))\",\n  },\n  { tag: tags.strong, fontWeight: \"bold\" },\n  { tag: tags.emphasis, fontStyle: \"italic\" },\n  {\n    tag: tags.link,\n    color: \"var(--primary-color)\",\n    textDecoration: \"underline\",\n  },\n  { tag: tags.heading, fontWeight: \"bold\" },\n  { tag: tags.atom, color: \"var(--codemirror-atom, #F90)\" },\n  { tag: tags.bool, color: \"var(--codemirror-atom, #F90)\" },\n  {\n    tag: tags.special(tags.variableName),\n    color: \"var(--codemirror-variable-2, #690)\",\n  },\n  { tag: tags.processingInstruction, color: \"var(--secondary-text-color)\" },\n  { tag: tags.string, color: \"var(--codemirror-string, #07a)\" },\n  { tag: tags.inserted, color: \"var(--codemirror-string2, #07a)\" },\n  { tag: tags.invalid, color: \"var(--error-color)\" },\n]);\n\nexport const haSyntaxHighlighting = syntaxHighlighting(haHighlightStyle);\n\n// A folding service for indent-based languages such as YAML.\nexport const foldingOnIndent = foldService.of((state, from, to) => {\n  const line = state.doc.lineAt(from);\n\n  // empty lines continue their indentation from surrounding lines\n  if (!line.length || !line.text.trim().length) {\n    return null;\n  }\n\n  let onlyEmptyNext = true;\n\n  const lineCount = state.doc.lines;\n  const indent = line.text.search(/\\S|$/); // Indent level of the first line\n\n  let foldStart = from; // Start of the fold\n  let foldEnd = to; // End of the fold\n\n  // Check if the next line is on a deeper indent level\n  // If so, continue subsequent lines\n  // If not, go on with the foldEnd\n  let nextLine = line;\n  while (nextLine.number < lineCount) {\n    nextLine = state.doc.line(nextLine.number + 1); // Next line\n    const nextIndent = nextLine.text.search(/\\S|$/); // Indent level of the next line\n\n    // If the next line is on a deeper indent level, add it to the fold\n    // empty lines continue their indentation from surrounding lines\n    if (\n      !nextLine.length ||\n      !nextLine.text.trim().length ||\n      nextIndent > indent\n    ) {\n      if (onlyEmptyNext) {\n        onlyEmptyNext = nextLine.text.trim().length === 0;\n      }\n      // include this line in the fold and continue\n      foldEnd = nextLine.to;\n    } else {\n      // If the next line is not on a deeper indent level, we found the end of the region\n      break;\n    }\n  }\n\n  // Don't create fold if it's a single line\n  if (\n    onlyEmptyNext ||\n    state.doc.lineAt(foldStart).number === state.doc.lineAt(foldEnd).number\n  ) {\n    return null;\n  }\n\n  // Set the fold start to the end of the first line\n  // With this, the fold will not include the first line\n  foldStart = line.to;\n\n  // Return a fold that covers the entire indent level\n  return { from: foldStart, to: foldEnd };\n});\n"],"names":["langs","jinja2","StreamLanguage","yaml","langCompartment","Compartment","readonlyCompartment","linewrapCompartment","foldingCompartment","tabKeyBindings","key","run","indentMore","indentLess","haTheme","EditorView","color","backgroundColor","borderRadius","caretColor","height","maxHeight","outline","borderLeftColor","paddingTop","paddingBottom","borderBottom","borderTop","border","padding","textTransform","margin","background","fontFamily","fontSize","fontWeight","letterSpacing","boxShadow","display","left","marginTop","borderRight","paddingRight","haHighlightStyle","HighlightStyle","tag","tags","fontStyle","textDecoration","haSyntaxHighlighting","syntaxHighlighting","foldingOnIndent","foldService","state","from","to","line","doc","lineAt","length","text","trim","onlyEmptyNext","lineCount","lines","indent","search","foldStart","foldEnd","nextLine","number","nextIndent"],"mappings":"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"}