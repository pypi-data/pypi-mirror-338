{"version":3,"file":"sort-filter-worker.deb67eaa75b9d41a.js","sources":["webpack://knx-frontend/./node_modules/memoize-one/dist/memoize-one.esm.js","webpack://knx-frontend/./homeassistant-frontend/src/common/string/compare.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/string/strip-diacritics.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/data-table/sort-filter-worker.ts","webpack://knx-frontend/./node_modules/core-js/internals/array-sort.js","webpack://knx-frontend/./node_modules/core-js/internals/environment-ff-version.js","webpack://knx-frontend/./node_modules/core-js/internals/environment-is-ie-or-edge.js","webpack://knx-frontend/./node_modules/core-js/internals/environment-webkit-version.js","webpack://knx-frontend/./node_modules/core-js/modules/es.array.sort.js"],"sourcesContent":["var safeIsNaN = Number.isNaN ||\n    function ponyfill(value) {\n        return typeof value === 'number' && value !== value;\n    };\nfunction isEqual(first, second) {\n    if (first === second) {\n        return true;\n    }\n    if (safeIsNaN(first) && safeIsNaN(second)) {\n        return true;\n    }\n    return false;\n}\nfunction areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (!isEqual(newInputs[i], lastInputs[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var cache = null;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (cache && cache.lastThis === this && isEqual(newArgs, cache.lastArgs)) {\n            return cache.lastResult;\n        }\n        var lastResult = resultFn.apply(this, newArgs);\n        cache = {\n            lastResult: lastResult,\n            lastArgs: newArgs,\n            lastThis: this,\n        };\n        return lastResult;\n    }\n    memoized.clear = function clear() {\n        cache = null;\n    };\n    return memoized;\n}\n\nexport { memoizeOne as default };\n","import memoizeOne from \"memoize-one\";\n\nconst collator = memoizeOne(\n  (language: string | undefined) => new Intl.Collator(language)\n);\n\nconst caseInsensitiveCollator = memoizeOne(\n  (language: string | undefined) =>\n    new Intl.Collator(language, { sensitivity: \"accent\" })\n);\n\nconst fallbackStringCompare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const stringCompare = (\n  a: string,\n  b: string,\n  language: string | undefined = undefined\n) => {\n  // @ts-ignore\n  if (Intl?.Collator) {\n    return collator(language).compare(a, b);\n  }\n\n  return fallbackStringCompare(a, b);\n};\n\nexport const caseInsensitiveStringCompare = (\n  a: string,\n  b: string,\n  language: string | undefined = undefined\n) => {\n  // @ts-ignore\n  if (Intl?.Collator) {\n    return caseInsensitiveCollator(language).compare(a, b);\n  }\n\n  return fallbackStringCompare(a.toLowerCase(), b.toLowerCase());\n};\n\nexport const orderCompare = (order: string[]) => (a: string, b: string) => {\n  const idxA = order.indexOf(a);\n  const idxB = order.indexOf(b);\n\n  if (idxA === idxB) {\n    return 0;\n  }\n\n  if (idxA === -1) {\n    return 1;\n  }\n\n  if (idxB === -1) {\n    return -1;\n  }\n\n  return idxA - idxB;\n};\n","export const stripDiacritics = (str: string) =>\n  str.normalize(\"NFD\").replace(/[\\u0300-\\u036F]/g, \"\");\n","import { expose } from \"comlink\";\nimport { stringCompare } from \"../../common/string/compare\";\nimport { stripDiacritics } from \"../../common/string/strip-diacritics\";\nimport type {\n  ClonedDataTableColumnData,\n  DataTableRowData,\n  SortableColumnContainer,\n  SortingDirection,\n} from \"./ha-data-table\";\n\nconst filterData = (\n  data: DataTableRowData[],\n  columns: SortableColumnContainer,\n  filter: string\n) => {\n  filter = stripDiacritics(filter.toLowerCase());\n  return data.filter((row) =>\n    Object.entries(columns).some((columnEntry) => {\n      const [key, column] = columnEntry;\n      if (column.filterable) {\n        const value = String(\n          column.filterKey\n            ? row[column.valueColumn || key][column.filterKey]\n            : row[column.valueColumn || key]\n        );\n\n        if (stripDiacritics(value).toLowerCase().includes(filter)) {\n          return true;\n        }\n      }\n      return false;\n    })\n  );\n};\n\nconst sortData = (\n  data: DataTableRowData[],\n  column: ClonedDataTableColumnData,\n  direction: SortingDirection,\n  sortColumn: string,\n  language?: string\n) =>\n  data.sort((a, b) => {\n    let sort = 1;\n    if (direction === \"desc\") {\n      sort = -1;\n    }\n\n    let valA = column.filterKey\n      ? a[column.valueColumn || sortColumn][column.filterKey]\n      : a[column.valueColumn || sortColumn];\n\n    let valB = column.filterKey\n      ? b[column.valueColumn || sortColumn][column.filterKey]\n      : b[column.valueColumn || sortColumn];\n\n    if (column.type === \"numeric\") {\n      valA = isNaN(valA) ? undefined : Number(valA);\n      valB = isNaN(valB) ? undefined : Number(valB);\n    } else if (typeof valA === \"string\" && typeof valB === \"string\") {\n      return sort * stringCompare(valA, valB, language);\n    }\n\n    // Ensure \"undefined\" and \"null\" are always sorted to the bottom\n    if (valA == null && valB != null) {\n      return 1;\n    }\n    if (valB == null && valA != null) {\n      return -1;\n    }\n\n    if (valA < valB) {\n      return sort * -1;\n    }\n    if (valA > valB) {\n      return sort * 1;\n    }\n    return 0;\n  });\n\nconst api = {\n  filterData,\n  sortData,\n};\n\nexport type Api = typeof api;\n\nexpose(api);\n","'use strict';\n\nvar arraySlice = require('../internals/array-slice');\nvar floor = Math.floor;\nvar sort = function (array, comparefn) {\n  var length = array.length;\n  if (length < 8) {\n    // insertion sort\n    var i = 1;\n    var element, j;\n    while (i < length) {\n      j = i;\n      element = array[i];\n      while (j && comparefn(array[j - 1], element) > 0) {\n        array[j] = array[--j];\n      }\n      if (j !== i++) array[j] = element;\n    }\n  } else {\n    // merge sort\n    var middle = floor(length / 2);\n    var left = sort(arraySlice(array, 0, middle), comparefn);\n    var right = sort(arraySlice(array, middle), comparefn);\n    var llength = left.length;\n    var rlength = right.length;\n    var lindex = 0;\n    var rindex = 0;\n    while (lindex < llength || rindex < rlength) {\n      array[lindex + rindex] = lindex < llength && rindex < rlength ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++] : lindex < llength ? left[lindex++] : right[rindex++];\n    }\n  }\n  return array;\n};\nmodule.exports = sort;","'use strict';\n\nvar userAgent = require('../internals/environment-user-agent');\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\nmodule.exports = !!firefox && +firefox[1];","'use strict';\n\nvar UA = require('../internals/environment-user-agent');\nmodule.exports = /MSIE|Trident/.test(UA);","'use strict';\n\nvar userAgent = require('../internals/environment-user-agent');\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\nmodule.exports = !!webkit && +webkit[1];","'use strict';\n\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar deletePropertyOrThrow = require('../internals/delete-property-or-throw');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/environment-ff-version');\nvar IE_OR_EDGE = require('../internals/environment-is-ie-or-edge');\nvar V8 = require('../internals/environment-v8-version');\nvar WEBKIT = require('../internals/environment-webkit-version');\nvar test = [];\nvar nativeSort = uncurryThis(test.sort);\nvar push = uncurryThis(test.push);\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n    switch (code) {\n      case 66:\n      case 69:\n      case 70:\n      case 72:\n        value = 3;\n        break;\n      case 68:\n      case 71:\n        value = 4;\n        break;\n      default:\n        value = 2;\n    }\n    for (index = 0; index < 47; index++) {\n      test.push({\n        k: chr + index,\n        v: value\n      });\n    }\n  }\n  test.sort(function (a, b) {\n    return b.v - a.v;\n  });\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n  return result !== 'DGBEFHACIJK';\n});\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({\n  target: 'Array',\n  proto: true,\n  forced: FORCED\n}, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n    var array = toObject(this);\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort(array) : nativeSort(array, comparefn);\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) push(items, array[index]);\n    }\n    internalSort(items, getSortCompare(comparefn));\n    itemsLength = lengthOfArrayLike(items);\n    index = 0;\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) deletePropertyOrThrow(array, index++);\n    return array;\n  }\n});"],"names":["safeIsNaN","Number","isNaN","value","areInputsEqual","newInputs","lastInputs","length","i","first","second","memoizeOne","resultFn","isEqual","cache","memoized","newArgs","_i","arguments","lastThis","this","lastArgs","lastResult","apply","clear","collator","language","Intl","Collator","fallbackStringCompare","sensitivity","a","b","stripDiacritics","str","normalize","replace","api","filterData","data","columns","filter","toLowerCase","row","Object","entries","some","columnEntry","key","column","filterable","String","filterKey","valueColumn","includes","sortData","direction","sortColumn","sort","valA","valB","type","undefined","stringCompare","compare","expose","arraySlice","floor","Math","array","comparefn","element","j","middle","left","right","llength","rlength","lindex","rindex","module","exports","firefox","match","UA","test","webkit","$","uncurryThis","aCallable","toObject","lengthOfArrayLike","deletePropertyOrThrow","toString","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","nativeSort","push","FAILS_ON_UNDEFINED","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","index","result","fromCharCode","k","v","charAt","target","proto","forced","itemsLength","items","arrayLength","x","y","getSortCompare"],"mappings":"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"}