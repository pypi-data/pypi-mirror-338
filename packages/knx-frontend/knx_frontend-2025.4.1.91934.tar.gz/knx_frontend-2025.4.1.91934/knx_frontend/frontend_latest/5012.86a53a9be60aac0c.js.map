{"version":3,"file":"5012.86a53a9be60aac0c.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-code-editor.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-template.ts","webpack://knx-frontend/./homeassistant-frontend/src/util/documentation-url.ts"],"sourcesContent":["import type {\n  Completion,\n  CompletionContext,\n  CompletionResult,\n  CompletionSource,\n} from \"@codemirror/autocomplete\";\nimport type { Extension, TransactionSpec } from \"@codemirror/state\";\nimport type { EditorView, KeyBinding, ViewUpdate } from \"@codemirror/view\";\nimport type { HassEntities } from \"home-assistant-js-websocket\";\nimport type { PropertyValues } from \"lit\";\nimport { css, ReactiveElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport memoizeOne from \"memoize-one\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { stopPropagation } from \"../common/dom/stop_propagation\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-icon\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"editor-save\": undefined;\n  }\n}\n\nconst saveKeyBinding: KeyBinding = {\n  key: \"Mod-s\",\n  run: (view: EditorView) => {\n    fireEvent(view.dom, \"editor-save\");\n    return true;\n  },\n};\n\nconst renderIcon = (completion: Completion) => {\n  const icon = document.createElement(\"ha-icon\");\n  icon.icon = completion.label;\n  return icon;\n};\n\n@customElement(\"ha-code-editor\")\nexport class HaCodeEditor extends ReactiveElement {\n  public codemirror?: EditorView;\n\n  @property() public mode = \"yaml\";\n\n  public hass?: HomeAssistant;\n\n  // eslint-disable-next-line lit/no-native-attributes\n  @property({ type: Boolean }) public autofocus = false;\n\n  @property({ attribute: \"read-only\", type: Boolean }) public readOnly = false;\n\n  @property({ type: Boolean }) public linewrap = false;\n\n  @property({ type: Boolean, attribute: \"autocomplete-entities\" })\n  public autocompleteEntities = false;\n\n  @property({ type: Boolean, attribute: \"autocomplete-icons\" })\n  public autocompleteIcons = false;\n\n  @property({ type: Boolean }) public error = false;\n\n  @state() private _value = \"\";\n\n  // eslint-disable-next-line @typescript-eslint/consistent-type-imports\n  private _loadedCodeMirror?: typeof import(\"../resources/codemirror\");\n\n  private _iconList?: Completion[];\n\n  public set value(value: string) {\n    this._value = value;\n  }\n\n  public get value(): string {\n    return this.codemirror ? this.codemirror.state.doc.toString() : this._value;\n  }\n\n  public get hasComments(): boolean {\n    if (!this.codemirror || !this._loadedCodeMirror) {\n      return false;\n    }\n    const className = this._loadedCodeMirror.highlightingFor(\n      this.codemirror.state,\n      [this._loadedCodeMirror.tags.comment]\n    );\n    return !!this.renderRoot.querySelector(`span.${className}`);\n  }\n\n  public connectedCallback() {\n    super.connectedCallback();\n    // Force update on reconnection so editor is recreated\n    if (this.hasUpdated) {\n      this.requestUpdate();\n    }\n    this.addEventListener(\"keydown\", stopPropagation);\n    // This is unreachable as editor will not exist yet,\n    // but focus should not behave like this for good a11y.\n    // (@steverep to fix in autofocus PR)\n    if (!this.codemirror) {\n      return;\n    }\n    if (this.autofocus !== false) {\n      this.codemirror.focus();\n    }\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback();\n    this.removeEventListener(\"keydown\", stopPropagation);\n    this.updateComplete.then(() => {\n      this.codemirror!.destroy();\n      delete this.codemirror;\n    });\n  }\n\n  // Ensure CodeMirror module is loaded before any update\n  protected override async scheduleUpdate() {\n    this._loadedCodeMirror ??= await import(\"../resources/codemirror\");\n    super.scheduleUpdate();\n  }\n\n  protected update(changedProps: PropertyValues): void {\n    super.update(changedProps);\n    if (!this.codemirror) {\n      this._createCodeMirror();\n      return;\n    }\n    const transactions: TransactionSpec[] = [];\n    if (changedProps.has(\"mode\")) {\n      transactions.push({\n        effects: [\n          this._loadedCodeMirror!.langCompartment!.reconfigure(this._mode),\n          this._loadedCodeMirror!.foldingCompartment.reconfigure(\n            this._getFoldingExtensions()\n          ),\n        ],\n      });\n    }\n    if (changedProps.has(\"readOnly\")) {\n      transactions.push({\n        effects: this._loadedCodeMirror!.readonlyCompartment!.reconfigure(\n          this._loadedCodeMirror!.EditorView!.editable.of(!this.readOnly)\n        ),\n      });\n    }\n    if (changedProps.has(\"linewrap\")) {\n      transactions.push({\n        effects: this._loadedCodeMirror!.linewrapCompartment!.reconfigure(\n          this.linewrap ? this._loadedCodeMirror!.EditorView.lineWrapping : []\n        ),\n      });\n    }\n    if (changedProps.has(\"_value\") && this._value !== this.value) {\n      transactions.push({\n        changes: {\n          from: 0,\n          to: this.codemirror.state.doc.length,\n          insert: this._value,\n        },\n      });\n    }\n    if (transactions.length > 0) {\n      this.codemirror.dispatch(...transactions);\n    }\n    if (changedProps.has(\"error\")) {\n      this.classList.toggle(\"error-state\", this.error);\n    }\n  }\n\n  private get _mode() {\n    return this._loadedCodeMirror!.langs[this.mode];\n  }\n\n  private _createCodeMirror() {\n    if (!this._loadedCodeMirror) {\n      throw new Error(\"Cannot create editor before CodeMirror is loaded\");\n    }\n    const extensions: Extension[] = [\n      this._loadedCodeMirror.lineNumbers(),\n      this._loadedCodeMirror.history(),\n      this._loadedCodeMirror.drawSelection(),\n      this._loadedCodeMirror.EditorState.allowMultipleSelections.of(true),\n      this._loadedCodeMirror.rectangularSelection(),\n      this._loadedCodeMirror.crosshairCursor(),\n      this._loadedCodeMirror.highlightSelectionMatches(),\n      this._loadedCodeMirror.highlightActiveLine(),\n      this._loadedCodeMirror.indentationMarkers({\n        thickness: 0,\n        activeThickness: 1,\n        colors: {\n          activeLight: \"var(--secondary-text-color)\",\n          activeDark: \"var(--secondary-text-color)\",\n        },\n      }),\n      this._loadedCodeMirror.keymap.of([\n        ...this._loadedCodeMirror.defaultKeymap,\n        ...this._loadedCodeMirror.searchKeymap,\n        ...this._loadedCodeMirror.historyKeymap,\n        ...this._loadedCodeMirror.tabKeyBindings,\n        saveKeyBinding,\n      ]),\n      this._loadedCodeMirror.langCompartment.of(this._mode),\n      this._loadedCodeMirror.haTheme,\n      this._loadedCodeMirror.haSyntaxHighlighting,\n      this._loadedCodeMirror.readonlyCompartment.of(\n        this._loadedCodeMirror.EditorView.editable.of(!this.readOnly)\n      ),\n      this._loadedCodeMirror.linewrapCompartment.of(\n        this.linewrap ? this._loadedCodeMirror.EditorView.lineWrapping : []\n      ),\n      this._loadedCodeMirror.EditorView.updateListener.of(this._onUpdate),\n      this._loadedCodeMirror.foldingCompartment.of(\n        this._getFoldingExtensions()\n      ),\n    ];\n\n    if (!this.readOnly) {\n      const completionSources: CompletionSource[] = [];\n      if (this.autocompleteEntities && this.hass) {\n        completionSources.push(this._entityCompletions.bind(this));\n      }\n      if (this.autocompleteIcons) {\n        completionSources.push(this._mdiCompletions.bind(this));\n      }\n      if (completionSources.length > 0) {\n        extensions.push(\n          this._loadedCodeMirror.autocompletion({\n            override: completionSources,\n            maxRenderedOptions: 10,\n          })\n        );\n      }\n    }\n\n    this.codemirror = new this._loadedCodeMirror.EditorView({\n      state: this._loadedCodeMirror.EditorState.create({\n        doc: this._value,\n        extensions,\n      }),\n      parent: this.renderRoot,\n    });\n  }\n\n  private _getStates = memoizeOne((states: HassEntities): Completion[] => {\n    if (!states) {\n      return [];\n    }\n    const options = Object.keys(states).map((key) => ({\n      type: \"variable\",\n      label: key,\n      detail: states[key].attributes.friendly_name,\n      info: `State: ${states[key].state}`,\n    }));\n\n    return options;\n  });\n\n  private _entityCompletions(\n    context: CompletionContext\n  ): CompletionResult | null | Promise<CompletionResult | null> {\n    const entityWord = context.matchBefore(/[a-z_]{3,}\\.\\w*/);\n\n    if (\n      !entityWord ||\n      (entityWord.from === entityWord.to && !context.explicit)\n    ) {\n      return null;\n    }\n\n    const states = this._getStates(this.hass!.states);\n\n    if (!states || !states.length) {\n      return null;\n    }\n\n    return {\n      from: Number(entityWord.from),\n      options: states,\n      validFor: /^[a-z_]{3,}\\.\\w*$/,\n    };\n  }\n\n  private _getIconItems = async (): Promise<Completion[]> => {\n    if (!this._iconList) {\n      let iconList: {\n        name: string;\n        keywords: string[];\n      }[];\n      if (__SUPERVISOR__) {\n        iconList = [];\n      } else {\n        iconList = (await import(\"../../build/mdi/iconList.json\")).default;\n      }\n\n      this._iconList = iconList.map((icon) => ({\n        type: \"variable\",\n        label: `mdi:${icon.name}`,\n        detail: icon.keywords.join(\", \"),\n        info: renderIcon,\n      }));\n    }\n\n    return this._iconList;\n  };\n\n  private async _mdiCompletions(\n    context: CompletionContext\n  ): Promise<CompletionResult | null> {\n    const match = context.matchBefore(/mdi:\\S*/);\n\n    if (!match || (match.from === match.to && !context.explicit)) {\n      return null;\n    }\n\n    const iconItems = await this._getIconItems();\n\n    return {\n      from: Number(match.from),\n      options: iconItems,\n      validFor: /^mdi:\\S*$/,\n    };\n  }\n\n  private _onUpdate = (update: ViewUpdate): void => {\n    if (!update.docChanged) {\n      return;\n    }\n    this._value = update.state.doc.toString();\n    fireEvent(this, \"value-changed\", { value: this._value });\n  };\n\n  private _getFoldingExtensions = (): Extension => {\n    if (this.mode === \"yaml\") {\n      return [\n        this._loadedCodeMirror!.foldGutter(),\n        this._loadedCodeMirror!.foldingOnIndent,\n      ];\n    }\n\n    return [];\n  };\n\n  static styles = css`\n    :host(.error-state) .cm-gutters {\n      border-color: var(--error-state-color, red);\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-code-editor\": HaCodeEditor;\n  }\n}\n","import { css, html, nothing, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { HomeAssistant } from \"../../types\";\nimport { documentationUrl } from \"../../util/documentation-url\";\nimport \"../ha-code-editor\";\nimport \"../ha-input-helper-text\";\nimport \"../ha-alert\";\n\nconst WARNING_STRINGS = [\"template:\", \"sensor:\", \"state:\", \"trigger: template\"];\n\n@customElement(\"ha-selector-template\")\nexport class HaTemplateSelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public value?: string;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  @state() private warn: string | undefined = undefined;\n\n  protected render() {\n    return html`\n      ${this.warn\n        ? html`<ha-alert alert-type=\"warning\"\n            >${this.hass.localize(\n              \"ui.components.selectors.template.yaml_warning\",\n              { string: this.warn }\n            )}\n            <br />\n            <a\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              href=${documentationUrl(\n                this.hass,\n                \"/docs/configuration/templating/\"\n              )}\n              >${this.hass.localize(\n                \"ui.components.selectors.template.learn_more\"\n              )}</a\n            ></ha-alert\n          >`\n        : nothing}\n      ${this.label\n        ? html`<p>${this.label}${this.required ? \"*\" : \"\"}</p>`\n        : nothing}\n      <ha-code-editor\n        mode=\"jinja2\"\n        .hass=${this.hass}\n        .value=${this.value}\n        .readOnly=${this.disabled}\n        autofocus\n        autocomplete-entities\n        autocomplete-icons\n        @value-changed=${this._handleChange}\n        dir=\"ltr\"\n        linewrap\n      ></ha-code-editor>\n      ${this.helper\n        ? html`<ha-input-helper-text>${this.helper}</ha-input-helper-text>`\n        : nothing}\n    `;\n  }\n\n  private _handleChange(ev) {\n    let value = ev.target.value;\n    if (this.value === value) {\n      return;\n    }\n    this.warn = WARNING_STRINGS.find((str) => value.includes(str));\n    if (value === \"\" && !this.required) {\n      value = undefined;\n    }\n    fireEvent(this, \"value-changed\", { value });\n  }\n\n  static styles = css`\n    p {\n      margin-top: 0;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-template\": HaTemplateSelector;\n  }\n}\n","import type { HomeAssistant } from \"../types\";\n\nexport const documentationUrl = (hass: HomeAssistant, path: string) =>\n  `https://${\n    hass.config.version.includes(\"b\")\n      ? \"rc\"\n      : hass.config.version.includes(\"dev\")\n        ? \"next\"\n        : \"www\"\n  }.home-assistant.io${path}`;\n"],"names":["saveKeyBinding","key","run","view","fireEvent","dom","renderIcon","completion","icon","document","createElement","label","_decorate","customElement","_initialize","_ReactiveElement","HaCodeEditor","constructor","args","F","d","kind","value","decorators","property","type","Boolean","attribute","state","this","_value","codemirror","doc","toString","_loadedCodeMirror","className","highlightingFor","tags","comment","renderRoot","querySelector","_superPropGet","hasUpdated","requestUpdate","addEventListener","stopPropagation","autofocus","focus","removeEventListener","updateComplete","then","destroy","changedProps","_createCodeMirror","transactions","has","push","effects","langCompartment","reconfigure","_mode","foldingCompartment","_getFoldingExtensions","readonlyCompartment","EditorView","editable","of","readOnly","linewrapCompartment","linewrap","lineWrapping","changes","from","to","length","insert","dispatch","classList","toggle","error","langs","mode","Error","extensions","lineNumbers","history","drawSelection","EditorState","allowMultipleSelections","rectangularSelection","crosshairCursor","highlightSelectionMatches","highlightActiveLine","indentationMarkers","thickness","activeThickness","colors","activeLight","activeDark","keymap","defaultKeymap","searchKeymap","historyKeymap","tabKeyBindings","haTheme","haSyntaxHighlighting","updateListener","_onUpdate","completionSources","autocompleteEntities","hass","_entityCompletions","bind","autocompleteIcons","_mdiCompletions","autocompletion","override","maxRenderedOptions","create","parent","memoizeOne","states","Object","keys","map","detail","attributes","friendly_name","info","context","entityWord","matchBefore","explicit","_getStates","Number","options","validFor","async","_iconList","iconList","default","name","keywords","join","match","iconItems","_getIconItems","update","docChanged","foldGutter","foldingOnIndent","static","css","ReactiveElement","WARNING_STRINGS","HaTemplateSelector","_LitElement","html","warn","localize","string","documentationUrl","nothing","required","disabled","_handleChange","helper","ev","target","find","str","includes","undefined","LitElement","path","config","version"],"mappings":"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"}