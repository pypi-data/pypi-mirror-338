{"version":3,"file":"7014.59a6476e7080a13d.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/panels/config/helpers/forms/ha-counter-form.ts"],"sourcesContent":["import type { CSSResultGroup } from \"lit\";\nimport { css, html, LitElement, nothing } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport \"../../../../components/ha-icon-picker\";\nimport \"../../../../components/ha-switch\";\nimport type { HaSwitch } from \"../../../../components/ha-switch\";\nimport \"../../../../components/ha-textfield\";\nimport type { Counter } from \"../../../../data/counter\";\nimport { haStyle } from \"../../../../resources/styles\";\nimport type { HomeAssistant } from \"../../../../types\";\n\n@customElement(\"ha-counter-form\")\nclass HaCounterForm extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ type: Boolean }) public new = false;\n\n  private _item?: Partial<Counter>;\n\n  @state() private _name!: string;\n\n  @state() private _icon!: string;\n\n  @state() private _maximum?: number;\n\n  @state() private _minimum?: number;\n\n  @state() private _restore?: boolean;\n\n  @state() private _initial?: number;\n\n  @state() private _step?: number;\n\n  set item(item: Counter) {\n    this._item = item;\n    if (item) {\n      this._name = item.name || \"\";\n      this._icon = item.icon || \"\";\n      this._maximum = item.maximum ?? undefined;\n      this._minimum = item.minimum ?? undefined;\n      this._restore = item.restore ?? true;\n      this._step = item.step ?? 1;\n      this._initial = item.initial ?? 0;\n    } else {\n      this._name = \"\";\n      this._icon = \"\";\n      this._maximum = undefined;\n      this._minimum = undefined;\n      this._restore = true;\n      this._step = 1;\n      this._initial = 0;\n    }\n  }\n\n  public focus() {\n    this.updateComplete.then(() =>\n      (\n        this.shadowRoot?.querySelector(\"[dialogInitialFocus]\") as HTMLElement\n      )?.focus()\n    );\n  }\n\n  protected render() {\n    if (!this.hass) {\n      return nothing;\n    }\n\n    return html`\n      <div class=\"form\">\n        <ha-textfield\n          .value=${this._name}\n          .configValue=${\"name\"}\n          @input=${this._valueChanged}\n          .label=${this.hass!.localize(\n            \"ui.dialogs.helper_settings.generic.name\"\n          )}\n          autoValidate\n          required\n          .validationMessage=${this.hass!.localize(\n            \"ui.dialogs.helper_settings.required_error_msg\"\n          )}\n          dialogInitialFocus\n        ></ha-textfield>\n        <ha-icon-picker\n          .hass=${this.hass}\n          .value=${this._icon}\n          .configValue=${\"icon\"}\n          @value-changed=${this._valueChanged}\n          .label=${this.hass!.localize(\n            \"ui.dialogs.helper_settings.generic.icon\"\n          )}\n        ></ha-icon-picker>\n        <ha-textfield\n          .value=${this._minimum}\n          .configValue=${\"minimum\"}\n          type=\"number\"\n          @input=${this._valueChanged}\n          .label=${this.hass!.localize(\n            \"ui.dialogs.helper_settings.counter.minimum\"\n          )}\n        ></ha-textfield>\n        <ha-textfield\n          .value=${this._maximum}\n          .configValue=${\"maximum\"}\n          type=\"number\"\n          @input=${this._valueChanged}\n          .label=${this.hass!.localize(\n            \"ui.dialogs.helper_settings.counter.maximum\"\n          )}\n        ></ha-textfield>\n        <ha-textfield\n          .value=${this._initial}\n          .configValue=${\"initial\"}\n          type=\"number\"\n          @input=${this._valueChanged}\n          .label=${this.hass!.localize(\n            \"ui.dialogs.helper_settings.counter.initial\"\n          )}\n        ></ha-textfield>\n        ${this.hass.userData?.showAdvanced\n          ? html`\n              <ha-textfield\n                .value=${this._step}\n                .configValue=${\"step\"}\n                type=\"number\"\n                @input=${this._valueChanged}\n                .label=${this.hass!.localize(\n                  \"ui.dialogs.helper_settings.counter.step\"\n                )}\n              ></ha-textfield>\n              <div class=\"row\">\n                <ha-switch\n                  .checked=${this._restore}\n                  .configValue=${\"restore\"}\n                  @change=${this._valueChanged}\n                >\n                </ha-switch>\n                <div>\n                  ${this.hass.localize(\n                    \"ui.dialogs.helper_settings.counter.restore\"\n                  )}\n                </div>\n              </div>\n            `\n          : \"\"}\n      </div>\n    `;\n  }\n\n  private _valueChanged(ev: CustomEvent) {\n    if (!this.new && !this._item) {\n      return;\n    }\n    ev.stopPropagation();\n    const target = ev.target as any;\n    const configValue = target.configValue;\n    const value =\n      target.type === \"number\"\n        ? target.value !== \"\"\n          ? Number(target.value)\n          : undefined\n        : target.localName === \"ha-switch\"\n          ? (ev.target as HaSwitch).checked\n          : ev.detail?.value || target.value;\n    if (this[`_${configValue}`] === value) {\n      return;\n    }\n    const newValue = { ...this._item };\n    if (value === undefined || value === \"\") {\n      delete newValue[configValue];\n    } else {\n      newValue[configValue] = value;\n    }\n    fireEvent(this, \"value-changed\", {\n      value: newValue,\n    });\n  }\n\n  static get styles(): CSSResultGroup {\n    return [\n      haStyle,\n      css`\n        .form {\n          color: var(--primary-text-color);\n        }\n        .row {\n          margin-top: 12px;\n          margin-bottom: 12px;\n          color: var(--primary-text-color);\n          display: flex;\n          align-items: center;\n        }\n        .row div {\n          margin-left: 16px;\n          margin-inline-start: 16px;\n          margin-inline-end: initial;\n        }\n        ha-textfield {\n          display: block;\n          margin: 8px 0;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-counter-form\": HaCounterForm;\n  }\n}\n"],"names":["_decorate","customElement","_initialize","_LitElement","F","constructor","args","d","kind","decorators","property","attribute","key","value","type","Boolean","state","item","this","_item","_name","name","_icon","icon","_maximum","maximum","undefined","_minimum","minimum","_restore","restore","_step","step","_initial","initial","updateComplete","then","shadowRoot","querySelector","focus","hass","html","_valueChanged","localize","userData","showAdvanced","nothing","ev","new","stopPropagation","target","configValue","Number","localName","checked","detail","newValue","fireEvent","static","haStyle","css","LitElement"],"mappings":"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"}