{"version":3,"file":"4608.2fe2b43befe67fef.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-form/ha-form-float.ts"],"sourcesContent":["import type { TemplateResult, PropertyValues } from \"lit\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, query } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { HaTextField } from \"../ha-textfield\";\nimport \"../ha-textfield\";\nimport type {\n  HaFormElement,\n  HaFormFloatData,\n  HaFormFloatSchema,\n} from \"./types\";\nimport type { LocalizeFunc } from \"../../common/translations/localize\";\n\n@customElement(\"ha-form-float\")\nexport class HaFormFloat extends LitElement implements HaFormElement {\n  @property({ attribute: false }) public localize?: LocalizeFunc;\n\n  @property({ attribute: false }) public schema!: HaFormFloatSchema;\n\n  @property({ attribute: false }) public data!: HaFormFloatData;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @query(\"ha-textfield\") private _input?: HaTextField;\n\n  public focus() {\n    if (this._input) {\n      this._input.focus();\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <ha-textfield\n        type=\"number\"\n        inputMode=\"decimal\"\n        step=\"any\"\n        .label=${this.label}\n        .helper=${this.helper}\n        helperPersistent\n        .value=${this.data !== undefined ? this.data : \"\"}\n        .disabled=${this.disabled}\n        .required=${this.schema.required}\n        .autoValidate=${this.schema.required}\n        .suffix=${this.schema.description?.suffix}\n        .validationMessage=${this.schema.required\n          ? this.localize?.(\"ui.common.error_required\")\n          : undefined}\n        @input=${this._valueChanged}\n      ></ha-textfield>\n    `;\n  }\n\n  protected updated(changedProps: PropertyValues): void {\n    if (changedProps.has(\"schema\")) {\n      this.toggleAttribute(\"own-margin\", !!this.schema.required);\n    }\n  }\n\n  private _valueChanged(ev: Event) {\n    const source = ev.target as HaTextField;\n    const rawValue = source.value.replace(\",\", \".\");\n\n    let value: number | undefined;\n\n    if (rawValue.endsWith(\".\")) {\n      return;\n    }\n\n    // Allow user to start typing a negative value\n    if (rawValue === \"-\") {\n      return;\n    }\n\n    if (rawValue !== \"\") {\n      value = parseFloat(rawValue);\n      if (isNaN(value)) {\n        value = undefined;\n      }\n    }\n\n    // Detect anything changed\n    if (this.data === value) {\n      return;\n    }\n\n    fireEvent(this, \"value-changed\", {\n      value,\n    });\n  }\n\n  static styles = css`\n    :host([own-margin]) {\n      margin-bottom: 5px;\n    }\n    ha-textfield {\n      display: block;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-form-float\": HaFormFloat;\n  }\n}\n"],"names":["HaFormFloat","_decorate","customElement","_initialize","_LitElement","F","constructor","args","d","kind","decorators","property","attribute","key","value","type","Boolean","query","this","_input","focus","html","label","helper","undefined","data","disabled","schema","required","description","suffix","localize","_valueChanged","changedProps","has","toggleAttribute","ev","rawValue","target","replace","endsWith","parseFloat","isNaN","fireEvent","static","css","LitElement"],"mappings":"yLAaA,IACaA,GAAWC,EAAAA,EAAAA,GAAA,EADvBC,EAAAA,EAAAA,IAAc,mBAAgB,SAAAC,EAAAC,GA0F9B,OAAAC,EA1FD,cACwBD,EAA6CE,WAAAA,IAAAC,GAAA,SAAAA,GAAAJ,EAAA,QAA7CK,EAAA,EAAAC,KAAA,QAAAC,WAAA,EACrBC,EAAAA,EAAAA,IAAS,CAAEC,WAAW,KAAQC,IAAA,WAAAC,WAAA,IAAAL,KAAA,QAAAC,WAAA,EAE9BC,EAAAA,EAAAA,IAAS,CAAEC,WAAW,KAAQC,IAAA,SAAAC,WAAA,IAAAL,KAAA,QAAAC,WAAA,EAE9BC,EAAAA,EAAAA,IAAS,CAAEC,WAAW,KAAQC,IAAA,OAAAC,WAAA,IAAAL,KAAA,QAAAC,WAAA,EAE9BC,EAAAA,EAAAA,OAAUE,IAAA,QAAAC,WAAA,IAAAL,KAAA,QAAAC,WAAA,EAEVC,EAAAA,EAAAA,OAAUE,IAAA,SAAAC,WAAA,IAAAL,KAAA,QAAAC,WAAA,EAEVC,EAAAA,EAAAA,IAAS,CAAEI,KAAMC,WAAUH,IAAA,WAAAC,KAAAA,GAAA,OAAmB,CAAK,IAAAL,KAAA,QAAAC,WAAA,EAEnDO,EAAAA,EAAAA,IAAM,iBAAeJ,IAAA,SAAAC,WAAA,IAAAL,KAAA,SAAAI,IAAA,QAAAC,MAEtB,WACMI,KAAKC,QACPD,KAAKC,OAAOC,OAEhB,GAAC,CAAAX,KAAA,SAAAI,IAAA,SAAAC,MAED,WACE,OAAOO,EAAAA,EAAI;;;;;iBAKEH,KAAKI;kBACJJ,KAAKK;;sBAEQC,IAAdN,KAAKO,KAAqBP,KAAKO,KAAO;oBACnCP,KAAKQ;oBACLR,KAAKS,OAAOC;wBACRV,KAAKS,OAAOC;kBAClBV,KAAKS,OAAOE,aAAaC;6BACdZ,KAAKS,OAAOC,SAC7BV,KAAKa,WAAW,iCAChBP;iBACKN,KAAKc;;KAGpB,GAAC,CAAAvB,KAAA,SAAAI,IAAA,UAAAC,MAED,SAAkBmB,GACZA,EAAaC,IAAI,WACnBhB,KAAKiB,gBAAgB,eAAgBjB,KAAKS,OAAOC,SAErD,GAAC,CAAAnB,KAAA,SAAAI,IAAA,gBAAAC,MAED,SAAsBsB,GACpB,MACMC,EADSD,EAAGE,OACMxB,MAAMyB,QAAQ,IAAK,KAE3C,IAAIzB,EAEAuB,EAASG,SAAS,MAKL,MAAbH,IAIa,KAAbA,IACFvB,EAAQ2B,WAAWJ,GACfK,MAAM5B,KACRA,OAAQU,IAKRN,KAAKO,OAASX,IAIlB6B,EAAAA,EAAAA,GAAUzB,KAAM,gBAAiB,CAC/BJ,UAEJ,GAAC,CAAAL,KAAA,QAAAmC,QAAA,EAAA/B,IAAA,SAAAC,KAAAA,GAAA,OAEe+B,EAAAA,EAAG;;;;;;;GAOlB,OAxF8BC,EAAAA,G"}