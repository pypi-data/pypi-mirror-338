"use strict";(self.webpackChunkknx_frontend=self.webpackChunkknx_frontend||[]).push([["9009"],{73386:function(e,t,i){i.d(t,{I:()=>s,k:()=>a});i(71695),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(47021);const a=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function s(e){return a.has(e)?`var(--${e}-color)`:e}},21930:function(e,t,i){i.a(e,(async function(e,t){try{var a=i(73577),s=(i(19083),i(71695),i(9359),i(68107),i(56475),i(1331),i(31526),i(70104),i(52924),i(19423),i(40251),i(92519),i(42179),i(89256),i(24931),i(88463),i(57449),i(19814),i(61006),i(47021),i(57243)),l=i(50778),n=i(35359),o=i(27486),d=i(11297),r=i(79575),c=i(19039),u=i(92374),h=i(11960),b=i(44573),v=i(87022),k=i(69484),f=(i(59897),i(74064),i(10508),e([k]));k=(f.then?(await f)():f)[0];let _,y,p,m=e=>e;const g="___ADD_NEW___",C="___NO_LABELS___",$="___ADD_NEW_SUGGESTION___",x=e=>(0,s.dy)(_||(_=m`<ha-list-item
    graphic="icon"
    class=${0}
  >
    ${0}
    ${0}
  </ha-list-item>`),(0,n.$)({"add-new":e.label_id===g}),e.icon?(0,s.dy)(y||(y=m`<ha-icon slot="graphic" .icon=${0}></ha-icon>`),e.icon):s.Ld,e.name);(0,a.Z)([(0,l.Mo)("ha-label-picker")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"value",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Boolean,attribute:"no-add"})],key:"noAdd",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Array,attribute:"exclude-label"})],key:"excludeLabels",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"required",value(){return!1}},{kind:"field",decorators:[(0,l.SB)()],key:"_opened",value:void 0},{kind:"field",decorators:[(0,l.SB)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,l.IO)("ha-combo-box",!0)],key:"comboBox",value:void 0},{kind:"field",key:"_suggestion",value:void 0},{kind:"field",key:"_init",value(){return!1}},{kind:"method",key:"open",value:async function(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.open())}},{kind:"method",key:"focus",value:async function(){var e;await this.updateComplete,await(null===(e=this.comboBox)||void 0===e?void 0:e.focus())}},{kind:"method",key:"hassSubscribe",value:function(){return[(0,h.f4)(this.hass.connection,(e=>{this._labels=e}))]}},{kind:"field",key:"_getLabels",value(){return(0,o.Z)(((e,t,i,a,s,l,n,o,d,c,h)=>{let b,v,k={};(s||l||n||o||d)&&(k=(0,u.R6)(a),b=i,v=a.filter((e=>e.labels.length>0)),s&&(b=b.filter((e=>{const t=k[e.id];return!(!t||!t.length)&&k[e.id].some((e=>s.includes((0,r.M)(e.entity_id))))})),v=v.filter((e=>s.includes((0,r.M)(e.entity_id))))),l&&(b=b.filter((e=>{const t=k[e.id];return!t||!t.length||a.every((e=>!l.includes((0,r.M)(e.entity_id))))})),v=v.filter((e=>!l.includes((0,r.M)(e.entity_id))))),n&&(b=b.filter((e=>{const t=k[e.id];return!(!t||!t.length)&&k[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&(t.attributes.device_class&&n.includes(t.attributes.device_class))}))})),v=v.filter((e=>{const t=this.hass.states[e.entity_id];return t.attributes.device_class&&n.includes(t.attributes.device_class)}))),o&&(b=b.filter((e=>o(e)))),d&&(b=b.filter((e=>{const t=k[e.id];return!(!t||!t.length)&&k[e.id].some((e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)}))})),v=v.filter((e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)}))));let f=e;const _=new Set;let y;return b&&(y=b.filter((e=>e.area_id)).map((e=>e.area_id)),b.forEach((e=>{e.labels.forEach((e=>_.add(e)))}))),v&&(y=(null!=y?y:[]).concat(v.filter((e=>e.area_id)).map((e=>e.area_id))),v.forEach((e=>{e.labels.forEach((e=>_.add(e)))}))),y&&y.forEach((e=>{t[e].labels.forEach((e=>_.add(e)))})),h&&(f=f.filter((e=>!h.includes(e.label_id)))),(b||v)&&(f=f.filter((e=>_.has(e.label_id)))),f.length||(f=[{label_id:C,name:this.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null,description:null,created_at:0,modified_at:0}]),c?f:[...f,{label_id:g,name:this.hass.localize("ui.components.label-picker.add_new"),icon:"mdi:plus",color:null,description:null,created_at:0,modified_at:0}]}))}},{kind:"method",key:"updated",value:function(e){if(!this._init&&this.hass&&this._labels||this._init&&e.has("_opened")&&this._opened){this._init=!0;const e=this._getLabels(this._labels,this.hass.areas,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeLabels).map((e=>Object.assign(Object.assign({},e),{},{strings:[e.label_id,e.name]})));this.comboBox.items=e,this.comboBox.filteredItems=e}}},{kind:"method",key:"render",value:function(){var e;return(0,s.dy)(p||(p=m`
      <ha-combo-box
        .hass=${0}
        .helper=${0}
        item-value-path="label_id"
        item-id-path="label_id"
        item-label-path="name"
        .value=${0}
        .disabled=${0}
        .required=${0}
        .label=${0}
        .placeholder=${0}
        .renderer=${0}
        @filter-changed=${0}
        @opened-changed=${0}
        @value-changed=${0}
      >
      </ha-combo-box>
    `),this.hass,this.helper,this._value,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.label"):this.label,this.placeholder?null===(e=this._labels)||void 0===e||null===(e=e.find((e=>e.label_id===this.placeholder)))||void 0===e?void 0:e.name:void 0,x,this._filterChanged,this._openedChanged,this._labelChanged)}},{kind:"method",key:"_filterChanged",value:function(e){var t;const i=e.target,a=e.detail.value;if(!a)return void(this.comboBox.filteredItems=this.comboBox.items);const s=(0,c.q)(a,(null===(t=i.items)||void 0===t?void 0:t.filter((e=>![C,g].includes(e.label_id))))||[]);0===s.length?this.noAdd?this.comboBox.filteredItems=[{label_id:C,name:this.hass.localize("ui.components.label-picker.no_match"),icon:null,color:null}]:(this._suggestion=a,this.comboBox.filteredItems=[{label_id:$,name:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:this._suggestion}),icon:"mdi:plus",color:null}]):this.comboBox.filteredItems=s}},{kind:"get",key:"_value",value:function(){return this.value||""}},{kind:"method",key:"_openedChanged",value:function(e){this._opened=e.detail.value}},{kind:"method",key:"_labelChanged",value:function(e){e.stopPropagation();let t=e.detail.value;if(t===C)return t="",void this.comboBox.setInputValue("");[$,g].includes(t)?(e.target.value=this._value,this.hass.loadFragmentTranslation("config"),(0,v.T)(this,{entry:void 0,suggestedName:t===$?this._suggestion:"",createEntry:async e=>{const t=await(0,h.jo)(this.hass,e),i=[...this._labels,t];return this.comboBox.filteredItems=this._getLabels(i,this.hass.areas,Object.values(this.hass.devices),Object.values(this.hass.entities),this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.noAdd,this.excludeLabels),await this.updateComplete,await this.comboBox.updateComplete,this._setValue(t.label_id),t}}),this._suggestion=void 0,this.comboBox.setInputValue("")):t!==this._value&&this._setValue(t)}},{kind:"method",key:"_setValue",value:function(e){this.value=e,setTimeout((()=>{(0,d.B)(this,"value-changed",{value:e}),(0,d.B)(this,"change")}),0)}}]}}),(0,b.f)(s.oi));t()}catch(_){t(_)}}))},35760:function(e,t,i){i.a(e,(async function(e,t){try{var a=i(73577),s=(i(19083),i(71695),i(61893),i(9359),i(56475),i(31526),i(70104),i(40251),i(61006),i(47021),i(57243)),l=i(50778),n=i(91583),o=i(27486),d=i(73386),r=i(11297),c=i(32770),u=i(11960),h=i(44573),b=i(87022),v=(i(84573),i(13978),i(21930)),k=e([v]);v=(k.then?(await k)():k)[0];let f,_,y,p,m,g=e=>e;(0,a.Z)([(0,l.Mo)("ha-labels-picker")],(function(e,t){return{F:class extends t{constructor(...t){super(...t),e(this)}},d:[{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"label",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"value",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"helper",value:void 0},{kind:"field",decorators:[(0,l.Cb)()],key:"placeholder",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Boolean,attribute:"no-add"})],key:"noAdd",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({type:Array,attribute:"include-domains"})],key:"includeDomains",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Array,attribute:"exclude-domains"})],key:"excludeDomains",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Array,attribute:"include-device-classes"})],key:"includeDeviceClasses",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Array,attribute:"exclude-label"})],key:"excludeLabels",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"deviceFilter",value:void 0},{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"entityFilter",value:void 0},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"disabled",value(){return!1}},{kind:"field",decorators:[(0,l.Cb)({type:Boolean})],key:"required",value(){return!1}},{kind:"field",decorators:[(0,l.SB)()],key:"_labels",value:void 0},{kind:"field",decorators:[(0,l.IO)("ha-label-picker",!0)],key:"labelPicker",value:void 0},{kind:"method",key:"open",value:async function(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.open())}},{kind:"method",key:"focus",value:async function(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.focus())}},{kind:"method",key:"hassSubscribe",value:function(){return[(0,u.f4)(this.hass.connection,(e=>{const t={};e.forEach((e=>{t[e.label_id]=e})),this._labels=t}))]}},{kind:"field",key:"_sortedLabels",value(){return(0,o.Z)(((e,t,i)=>null==e?void 0:e.map((e=>null==t?void 0:t[e])).sort(((e,t)=>(0,c.$K)((null==e?void 0:e.name)||"",(null==t?void 0:t.name)||"",i)))))}},{kind:"method",key:"render",value:function(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return(0,s.dy)(f||(f=g`
      ${0}
      <ha-label-picker
        .hass=${0}
        .helper=${0}
        .disabled=${0}
        .required=${0}
        .label=${0}
        .placeholder=${0}
        .excludeLabels=${0}
        @value-changed=${0}
      >
      </ha-label-picker>
    `),null!=e&&e.length?(0,s.dy)(_||(_=g`<ha-chip-set>
            ${0}
          </ha-chip-set>`),(0,n.r)(e,(e=>null==e?void 0:e.label_id),(e=>{const t=null!=e&&e.color?(0,d.I)(e.color):void 0;return(0,s.dy)(y||(y=g`
                  <ha-input-chip
                    .item=${0}
                    @remove=${0}
                    @click=${0}
                    .label=${0}
                    selected
                    style=${0}
                  >
                    ${0}
                  </ha-input-chip>
                `),e,this._removeItem,this._openDetail,null==e?void 0:e.name,t?`--color: ${t}`:"",null!=e&&e.icon?(0,s.dy)(p||(p=g`<ha-icon
                          slot="icon"
                          .icon=${0}
                        ></ha-icon>`),e.icon):s.Ld)}))):s.Ld,this.hass,this.helper,this.disabled,this.required,void 0===this.label&&this.hass?this.hass.localize("ui.components.label-picker.add_label"):this.label,this.placeholder,this.value,this._labelChanged)}},{kind:"get",key:"_value",value:function(){return this.value||[]}},{kind:"method",key:"_removeItem",value:function(e){const t=e.currentTarget.item;this._setValue(this._value.filter((e=>e!==t.label_id)))}},{kind:"method",key:"_openDetail",value:function(e){const t=e.currentTarget.item;(0,b.T)(this,{entry:t,updateEntry:async e=>await(0,u.$0)(this.hass,t.label_id,e)})}},{kind:"method",key:"_labelChanged",value:function(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}},{kind:"method",key:"_setValue",value:function(e){this.value=e,setTimeout((()=>{(0,r.B)(this,"value-changed",{value:e}),(0,r.B)(this,"change")}),0)}},{kind:"field",static:!0,key:"styles",value(){return(0,s.iv)(m||(m=g`
    ha-chip-set {
      margin-bottom: 8px;
    }
    ha-input-chip {
      --md-input-chip-selected-container-color: var(--color, var(--grey-color));
      --ha-input-chip-selected-container-opacity: 0.5;
      --md-input-chip-selected-outline-width: 1px;
    }
  `))}}]}}),(0,h.f)(s.oi));t()}catch(f){t(f)}}))},11960:function(e,t,i){i.d(t,{$0:()=>c,f4:()=>d,jo:()=>r});i(61893),i(19423);var a=i(94787),s=i(32770),l=i(56587);const n=e=>e.sendMessagePromise({type:"config/label_registry/list"}).then((e=>e.sort(((e,t)=>(0,s.$K)(e.name,t.name))))),o=(e,t)=>e.subscribeEvents((0,l.D)((()=>n(e).then((e=>t.setState(e,!0)))),500,!0),"label_registry_updated"),d=(e,t)=>(0,a.B)("_labelRegistry",n,o,e,t),r=(e,t)=>e.callWS(Object.assign({type:"config/label_registry/create"},t)),c=(e,t,i)=>e.callWS(Object.assign({type:"config/label_registry/update",label_id:t},i))},44573:function(e,t,i){i.d(t,{f:()=>n});var a=i(73577),s=i(72621),l=(i(19083),i(71695),i(9359),i(52924),i(40251),i(61006),i(47021),i(50778));const n=e=>(0,a.Z)(null,(function(e,t){class i extends t{constructor(...t){super(...t),e(this)}}return{F:i,d:[{kind:"field",decorators:[(0,l.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",key:"hassSubscribeRequiredHostProps",value:void 0},{kind:"field",key:"__unsubs",value:void 0},{kind:"method",key:"connectedCallback",value:function(){(0,s.Z)(i,"connectedCallback",this,3)([]),this._checkSubscribed()}},{kind:"method",key:"disconnectedCallback",value:function(){if((0,s.Z)(i,"disconnectedCallback",this,3)([]),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then((e=>e())):e()}this.__unsubs=void 0}}},{kind:"method",key:"updated",value:function(e){if((0,s.Z)(i,"updated",this,3)([e]),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}},{kind:"method",key:"hassSubscribe",value:function(){return[]}},{kind:"method",key:"_checkSubscribed",value:function(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some((e=>void 0===this[e]))||(this.__unsubs=this.hassSubscribe())}}]}}),e)},87022:function(e,t,i){i.d(t,{T:()=>l});i(71695),i(40251),i(47021);var a=i(11297);const s=()=>i.e("3693").then(i.bind(i,57834)),l=(e,t)=>{(0,a.B)(e,"show-dialog",{dialogTag:"dialog-label-detail",dialogImport:s,dialogParams:t})}},94787:function(e,t,i){i.d(t,{B:()=>l});i(52247),i(92745),i(19423),i(40251);const a=e=>{let t=[];function i(i,a){e=a?i:Object.assign(Object.assign({},e),i);let s=t;for(let t=0;t<s.length;t++)s[t](e)}return{get state(){return e},action(t){function a(e){i(e,!1)}return function(){let i=[e];for(let e=0;e<arguments.length;e++)i.push(arguments[e]);let s=t.apply(this,i);if(null!=s)return s instanceof Promise?s.then(a):a(s)}},setState:i,clearState(){e=void 0},subscribe(e){return t.push(e),()=>{!function(e){let i=[];for(let a=0;a<t.length;a++)t[a]===e?e=null:i.push(t[a]);t=i}(e)}}}},s=(e,t,i,s,l={unsubGrace:!0})=>{if(e[t])return e[t];let n,o,d=0,r=a();const c=()=>{if(!i)throw new Error("Collection does not support refresh");return i(e).then((e=>r.setState(e,!0)))},u=()=>c().catch((t=>{if(e.connected)throw t})),h=()=>{o=void 0,n&&n.then((e=>{e()})),r.clearState(),e.removeEventListener("ready",c),e.removeEventListener("disconnected",b)},b=()=>{o&&(clearTimeout(o),h())};return e[t]={get state(){return r.state},refresh:c,subscribe(t){d++,1===d&&(()=>{if(void 0!==o)return clearTimeout(o),void(o=void 0);s&&(n=s(e,r)),i&&(e.addEventListener("ready",u),u()),e.addEventListener("disconnected",b)})();const a=r.subscribe(t);return void 0!==r.state&&setTimeout((()=>t(r.state)),0),()=>{a(),d--,d||(l.unsubGrace?o=setTimeout(h,5e3):h())}}},e[t]},l=(e,t,i,a,l)=>s(a,e,t,i).subscribe(l)}}]);
//# sourceMappingURL=9009.143582ef9bbff17d.js.map