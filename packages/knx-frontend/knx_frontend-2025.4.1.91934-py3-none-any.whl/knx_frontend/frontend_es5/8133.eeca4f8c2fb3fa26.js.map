{"version":3,"file":"8133.eeca4f8c2fb3fa26.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-config-entry-picker.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-config-entry.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/integration.ts","webpack://knx-frontend/./homeassistant-frontend/src/util/brands-url.ts"],"sourcesContent":["import \"@material/mwc-list/mwc-list-item\";\nimport type { ComboBoxLitRenderer } from \"@vaadin/combo-box/lit\";\nimport { html, LitElement, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport { caseInsensitiveStringCompare } from \"../common/string/compare\";\nimport type { ConfigEntry } from \"../data/config_entries\";\nimport { getConfigEntries } from \"../data/config_entries\";\nimport { domainToName } from \"../data/integration\";\nimport type { ValueChangedEvent, HomeAssistant } from \"../types\";\nimport { brandsUrl } from \"../util/brands-url\";\nimport \"./ha-combo-box\";\nimport type { HaComboBox } from \"./ha-combo-box\";\n\nexport interface ConfigEntryExtended extends ConfigEntry {\n  localized_domain_name?: string;\n}\n\n@customElement(\"ha-config-entry-picker\")\nclass HaConfigEntryPicker extends LitElement {\n  public hass!: HomeAssistant;\n\n  @property() public integration?: string;\n\n  @property() public label?: string;\n\n  @property() public value = \"\";\n\n  @property() public helper?: string;\n\n  @state() private _configEntries?: ConfigEntryExtended[];\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = false;\n\n  @query(\"ha-combo-box\") private _comboBox!: HaComboBox;\n\n  public open() {\n    this._comboBox?.open();\n  }\n\n  public focus() {\n    this._comboBox?.focus();\n  }\n\n  protected firstUpdated() {\n    this._getConfigEntries();\n  }\n\n  private _rowRenderer: ComboBoxLitRenderer<ConfigEntryExtended> = (item) =>\n    html`<mwc-list-item twoline graphic=\"icon\">\n      <span\n        >${item.title ||\n        this.hass.localize(\n          \"ui.panel.config.integrations.config_entry.unnamed_entry\"\n        )}</span\n      >\n      <span slot=\"secondary\">${item.localized_domain_name}</span>\n      <img\n        alt=\"\"\n        slot=\"graphic\"\n        src=${brandsUrl({\n          domain: item.domain,\n          type: \"icon\",\n          darkOptimized: this.hass.themes?.darkMode,\n        })}\n        crossorigin=\"anonymous\"\n        referrerpolicy=\"no-referrer\"\n        @error=${this._onImageError}\n        @load=${this._onImageLoad}\n      />\n    </mwc-list-item>`;\n\n  protected render() {\n    if (!this._configEntries) {\n      return nothing;\n    }\n    return html`\n      <ha-combo-box\n        .hass=${this.hass}\n        .label=${this.label === undefined && this.hass\n          ? this.hass.localize(\"ui.components.config-entry-picker.config_entry\")\n          : this.label}\n        .value=${this._value}\n        .required=${this.required}\n        .disabled=${this.disabled}\n        .helper=${this.helper}\n        .renderer=${this._rowRenderer}\n        .items=${this._configEntries}\n        item-value-path=\"entry_id\"\n        item-id-path=\"entry_id\"\n        item-label-path=\"title\"\n        @value-changed=${this._valueChanged}\n      ></ha-combo-box>\n    `;\n  }\n\n  private _onImageLoad(ev) {\n    ev.target.style.visibility = \"initial\";\n  }\n\n  private _onImageError(ev) {\n    ev.target.style.visibility = \"hidden\";\n  }\n\n  private async _getConfigEntries() {\n    getConfigEntries(this.hass, {\n      type: [\"device\", \"hub\", \"service\"],\n      domain: this.integration,\n    }).then((configEntries) => {\n      this._configEntries = configEntries\n        .map(\n          (entry: ConfigEntry): ConfigEntryExtended => ({\n            ...entry,\n            localized_domain_name: domainToName(\n              this.hass.localize,\n              entry.domain\n            ),\n          })\n        )\n        .sort((conf1, conf2) =>\n          caseInsensitiveStringCompare(\n            conf1.localized_domain_name + conf1.title,\n            conf2.localized_domain_name + conf2.title,\n            this.hass.locale.language\n          )\n        );\n    });\n  }\n\n  private get _value() {\n    return this.value || \"\";\n  }\n\n  private _valueChanged(ev: ValueChangedEvent<string>) {\n    ev.stopPropagation();\n    const newValue = ev.detail.value;\n\n    if (newValue !== this._value) {\n      this._setValue(newValue);\n    }\n  }\n\n  private _setValue(value: string) {\n    this.value = value;\n    setTimeout(() => {\n      fireEvent(this, \"value-changed\", { value });\n      fireEvent(this, \"change\");\n    }, 0);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-config-entry-picker\": HaConfigEntryPicker;\n  }\n}\n","import { css, html, LitElement } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport type { ConfigEntrySelector } from \"../../data/selector\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-config-entry-picker\";\n\n@customElement(\"ha-selector-config_entry\")\nexport class HaConfigEntrySelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: ConfigEntrySelector;\n\n  @property() public value?: any;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  protected render() {\n    return html`<ha-config-entry-picker\n      .hass=${this.hass}\n      .value=${this.value}\n      .label=${this.label}\n      .helper=${this.helper}\n      .disabled=${this.disabled}\n      .required=${this.required}\n      .integration=${this.selector.config_entry?.integration}\n      allow-custom-entity\n    ></ha-config-entry-picker>`;\n  }\n\n  static styles = css`\n    ha-config-entry-picker {\n      width: 100%;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-config_entry\": HaConfigEntrySelector;\n  }\n}\n","import type { Connection } from \"home-assistant-js-websocket\";\nimport { createCollection } from \"home-assistant-js-websocket\";\nimport type { LocalizeFunc } from \"../common/translations/localize\";\nimport type { HomeAssistant } from \"../types\";\nimport { debounce } from \"../common/util/debounce\";\n\nexport const integrationsWithPanel = {\n  bluetooth: \"config/bluetooth\",\n  matter: \"config/matter\",\n  mqtt: \"config/mqtt\",\n  thread: \"config/thread\",\n  zha: \"config/zha/dashboard\",\n  zwave_js: \"config/zwave_js/dashboard\",\n};\n\nexport type IntegrationType =\n  | \"device\"\n  | \"helper\"\n  | \"hub\"\n  | \"service\"\n  | \"hardware\"\n  | \"entity\"\n  | \"system\";\n\nexport interface IntegrationManifest {\n  is_built_in: boolean;\n  overwrites_built_in?: boolean;\n  domain: string;\n  name: string;\n  config_flow: boolean;\n  documentation: string;\n  issue_tracker?: string;\n  dependencies?: string[];\n  after_dependencies?: string[];\n  codeowners?: string[];\n  requirements?: string[];\n  ssdp?: { manufacturer?: string; modelName?: string; st?: string }[];\n  zeroconf?: string[];\n  homekit?: { models: string[] };\n  integration_type?: IntegrationType;\n  loggers?: string[];\n  quality_scale?:\n    | \"bronze\"\n    | \"silver\"\n    | \"gold\"\n    | \"platinum\"\n    | \"no_score\"\n    | \"internal\"\n    | \"legacy\"\n    | \"custom\";\n  iot_class:\n    | \"assumed_state\"\n    | \"cloud_polling\"\n    | \"cloud_push\"\n    | \"local_polling\"\n    | \"local_push\";\n  single_config_entry?: boolean;\n  version?: string;\n}\nexport interface IntegrationSetup {\n  domain: string;\n  seconds?: number;\n}\n\nexport interface IntegrationLogInfo {\n  domain: string;\n  level?: number;\n}\n\nexport enum LogSeverity {\n  CRITICAL = 50,\n  ERROR = 40,\n  WARNING = 30,\n  INFO = 20,\n  DEBUG = 10,\n  NOTSET = 0,\n}\n\nexport type IntegrationLogPersistance = \"none\" | \"once\" | \"permanent\";\n\nexport const integrationIssuesUrl = (\n  domain: string,\n  manifest: IntegrationManifest\n) =>\n  manifest.issue_tracker ||\n  `https://github.com/home-assistant/core/issues?q=is%3Aissue+is%3Aopen+label%3A%22integration%3A+${domain}%22`;\n\nexport const domainToName = (\n  localize: LocalizeFunc,\n  domain: string,\n  manifest?: IntegrationManifest\n) => localize(`component.${domain}.title`) || manifest?.name || domain;\n\nexport const fetchIntegrationManifests = (\n  hass: HomeAssistant,\n  integrations?: string[]\n) => {\n  const params: any = {\n    type: \"manifest/list\",\n  };\n  if (integrations) {\n    params.integrations = integrations;\n  }\n  return hass.callWS<IntegrationManifest[]>(params);\n};\n\nexport const fetchIntegrationManifest = (\n  hass: HomeAssistant,\n  integration: string\n) => hass.callWS<IntegrationManifest>({ type: \"manifest/get\", integration });\n\nexport const fetchIntegrationSetups = (hass: HomeAssistant) =>\n  hass.callWS<IntegrationSetup[]>({ type: \"integration/setup_info\" });\n\nexport const fetchIntegrationLogInfo = (conn) =>\n  conn.sendMessagePromise({\n    type: \"logger/log_info\",\n  });\n\nexport const setIntegrationLogLevel = (\n  hass: HomeAssistant,\n  integration: string,\n  level: string,\n  persistence: IntegrationLogPersistance\n) =>\n  hass.callWS({\n    type: \"logger/integration_log_level\",\n    integration,\n    level,\n    persistence,\n  });\n\nconst subscribeLogInfoUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchIntegrationLogInfo(conn).then((log_infos) =>\n          store.setState(log_infos, true)\n        ),\n      200,\n      true\n    ),\n    \"logging_changed\"\n  );\n\nexport const subscribeLogInfo = (\n  conn: Connection,\n  onChange: (devices: IntegrationLogInfo[]) => void\n) =>\n  createCollection<IntegrationLogInfo[]>(\n    \"_integration_log_info\",\n    fetchIntegrationLogInfo,\n    subscribeLogInfoUpdates,\n    conn,\n    onChange\n  );\n","export interface BrandsOptions {\n  domain: string;\n  type: \"icon\" | \"logo\" | \"icon@2x\" | \"logo@2x\";\n  useFallback?: boolean;\n  darkOptimized?: boolean;\n  brand?: boolean;\n}\n\nexport interface HardwareBrandsOptions {\n  category: string;\n  model?: string;\n  manufacturer: string;\n  darkOptimized?: boolean;\n}\n\nexport const brandsUrl = (options: BrandsOptions): string =>\n  `https://brands.home-assistant.io/${options.brand ? \"brands/\" : \"\"}${\n    options.useFallback ? \"_/\" : \"\"\n  }${options.domain}/${options.darkOptimized ? \"dark_\" : \"\"}${\n    options.type\n  }.png`;\n\nexport const hardwareBrandsUrl = (options: HardwareBrandsOptions): string =>\n  `https://brands.home-assistant.io/hardware/${options.category}/${\n    options.darkOptimized ? \"dark_\" : \"\"\n  }${options.manufacturer}${options.model ? `_${options.model}` : \"\"}.png`;\n\nexport const extractDomainFromBrandUrl = (url: string) => url.split(\"/\")[4];\n\nexport const isBrandUrl = (thumbnail: string | \"\"): boolean =>\n  thumbnail.startsWith(\"https://brands.home-assistant.io/\");\n"],"names":["_decorate","customElement","_initialize","_LitElement","F","constructor","args","d","kind","key","value","decorators","property","state","type","Boolean","query","_this$_comboBox","this","_comboBox","open","_this$_comboBox2","focus","_getConfigEntries","item","_this$hass$themes","html","_t","_","title","hass","localize","localized_domain_name","brandsUrl","domain","darkOptimized","themes","darkMode","_onImageError","_onImageLoad","_configEntries","_t2","undefined","label","_value","required","disabled","helper","_rowRenderer","_valueChanged","nothing","ev","target","style","visibility","getConfigEntries","integration","then","configEntries","map","entry","Object","assign","domainToName","sort","conf1","conf2","caseInsensitiveStringCompare","locale","language","stopPropagation","newValue","detail","_setValue","setTimeout","fireEvent","LitElement","HaConfigEntrySelector","attribute","_this$selector$config","selector","config_entry","static","css","manifest","name","fetchIntegrationManifests","integrations","params","callWS","fetchIntegrationManifest","options","brand","useFallback","extractDomainFromBrandUrl","url","split","isBrandUrl","thumbnail","startsWith"],"mappings":"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"}