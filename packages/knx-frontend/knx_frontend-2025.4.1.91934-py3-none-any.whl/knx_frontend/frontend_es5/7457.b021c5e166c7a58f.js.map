{"version":3,"file":"7457.b021c5e166c7a58f.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-image.ts"],"sourcesContent":["import { css, html, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport type { ImageSelector } from \"../../data/selector\";\nimport type { HomeAssistant } from \"../../types\";\nimport \"../ha-icon-button\";\nimport \"../ha-textarea\";\nimport \"../ha-textfield\";\nimport \"../ha-picture-upload\";\nimport \"../ha-radio\";\nimport \"../ha-formfield\";\nimport type { HaPictureUpload } from \"../ha-picture-upload\";\nimport { URL_PREFIX } from \"../../data/image_upload\";\n\n@customElement(\"ha-selector-image\")\nexport class HaImageSelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property() public value?: any;\n\n  @property() public name?: string;\n\n  @property() public label?: string;\n\n  @property() public placeholder?: string;\n\n  @property() public helper?: string;\n\n  @property({ attribute: false }) public selector!: ImageSelector;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  @state() private showUpload = false;\n\n  protected firstUpdated(changedProps): void {\n    super.firstUpdated(changedProps);\n\n    if (!this.value || this.value.startsWith(URL_PREFIX)) {\n      this.showUpload = true;\n    }\n  }\n\n  protected render() {\n    return html`\n      <div>\n        <label>\n          ${this.hass.localize(\n            \"ui.components.selectors.image.select_image_with_label\",\n            {\n              label:\n                this.label ||\n                this.hass.localize(\"ui.components.selectors.image.image\"),\n            }\n          )}\n          <ha-formfield\n            .label=${this.hass.localize(\"ui.components.selectors.image.upload\")}\n          >\n            <ha-radio\n              name=\"mode\"\n              value=\"upload\"\n              .checked=${this.showUpload}\n              @change=${this._radioGroupPicked}\n            ></ha-radio>\n          </ha-formfield>\n          <ha-formfield\n            .label=${this.hass.localize(\"ui.components.selectors.image.url\")}\n          >\n            <ha-radio\n              name=\"mode\"\n              value=\"url\"\n              .checked=${!this.showUpload}\n              @change=${this._radioGroupPicked}\n            ></ha-radio>\n          </ha-formfield>\n        </label>\n        ${!this.showUpload\n          ? html`\n              <ha-textfield\n                .name=${this.name}\n                .value=${this.value || \"\"}\n                .placeholder=${this.placeholder || \"\"}\n                .helper=${this.helper}\n                helperPersistent\n                .disabled=${this.disabled}\n                @input=${this._handleChange}\n                .label=${this.label || \"\"}\n                .required=${this.required}\n              ></ha-textfield>\n            `\n          : html`\n              <ha-picture-upload\n                .hass=${this.hass}\n                .value=${this.value?.startsWith(URL_PREFIX) ? this.value : null}\n                .original=${this.selector.image?.original}\n                .cropOptions=${this.selector.image?.crop}\n                select-media\n                @change=${this._pictureChanged}\n              ></ha-picture-upload>\n            `}\n      </div>\n    `;\n  }\n\n  private _radioGroupPicked(ev): void {\n    this.showUpload = ev.target.value === \"upload\";\n  }\n\n  private _pictureChanged(ev) {\n    const value = (ev.target as HaPictureUpload).value;\n\n    fireEvent(this, \"value-changed\", { value: value ?? undefined });\n  }\n\n  private _handleChange(ev) {\n    let value = ev.target.value;\n    if (this.value === value) {\n      return;\n    }\n    if (value === \"\" && !this.required) {\n      value = undefined;\n    }\n\n    fireEvent(this, \"value-changed\", { value });\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n      position: relative;\n    }\n    div {\n      display: flex;\n      flex-direction: column;\n    }\n    label {\n      display: flex;\n      flex-direction: column;\n    }\n    ha-textarea,\n    ha-textfield {\n      width: 100%;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-image\": HaImageSelector;\n  }\n}\n"],"names":["HaImageSelector","_decorate","customElement","_initialize","_LitElement","constructor","args","F","d","kind","decorators","property","attribute","key","value","type","Boolean","state","changedProps","_superPropGet","this","startsWith","URL_PREFIX","showUpload","_this$value","_this$selector$image","_this$selector$image2","html","_t","_","hass","localize","label","_radioGroupPicked","_t3","selector","image","original","crop","_pictureChanged","_t2","name","placeholder","helper","disabled","_handleChange","required","ev","target","fireEvent","undefined","static","css","_t4","LitElement"],"mappings":"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"}