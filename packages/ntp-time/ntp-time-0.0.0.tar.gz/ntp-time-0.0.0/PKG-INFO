Metadata-Version: 2.1
Name: ntp-time
Version: 0.0.0
Summary: A tool for obtaining accurate time using NTP servers.
Home-page: https://github.co.jp/
Author: bib_inf
Author-email: contact.bibinf@gmail.com
License: CC0 v1.0
Classifier: Programming Language :: Python :: 3
Classifier: Topic :: Software Development :: Libraries
Classifier: License :: CC0 1.0 Universal (CC0 1.0) Public Domain Dedication
Description-Content-Type: text/markdown

English description follows Japanese.

## ğŸ“˜ `ntp-time` ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆæ—¥æœ¬èªï¼‰

### æ¦‚è¦

`ntp-time` ã¯ã€NTP (Network Time Protocol) ã‚µãƒ¼ãƒãƒ¼ã¨åŒæœŸã—ãŸã€Œæ¯”è¼ƒçš„æ­£ç¢ºãªæ™‚åˆ»ã€ã‚’å–å¾—ã§ãã‚‹ Python ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚æ¨™æº–ã® `time.time()` ã®ã‚ˆã†ã«æ‰±ãˆã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æŒã¡ã¤ã¤ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆè¶Šã—ã®æ™‚åˆ»è£œæ­£ã‚„ã€é…å»¶ã®è£œå„Ÿã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰åŒæœŸãªã©ã®å·¥å¤«ãŒãªã•ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install ntp-time
```

### ä½¿ã„æ–¹

```python
import ntp_time

# æ­£ç¢ºãªç¾åœ¨æ™‚åˆ»ã‚’å–å¾—
t = ntp_time.now()

print(t)  # ä¾‹: 1743499065.294967 (floatå‹ã®UNIXã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—)
```

### ç‰¹å¾´

- `ntp_time.now()` ã¯å‘¼ã³å‡ºã—æ™‚ã«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’ä¼´ã‚ãªã„ãŸã‚ã€é«˜é »åº¦ã«å‘¼ã³å‡ºã—ã¦ã‚‚é«˜é€Ÿã‹ã¤è² è·ãŒå°‘ãªã„ã€‚
- NTPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã£ãŸæ­£ç¢ºãªæ™‚åˆ»å–å¾—ãŒå¯èƒ½ã€‚
- `time.time()` ã®ã‚ˆã†ã« UNIX ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— (floatå‹) ã¨ã—ã¦åˆ©ç”¨å¯èƒ½ã€‚
- é€šä¿¡é…å»¶ã¯è‡ªå‹•çš„ã«è£œæ­£ã•ã‚Œã¾ã™ï¼ˆãŸã ã—å®Œå…¨ãªæ­£ç¢ºæ€§ã¯ä¿è¨¼ã•ã‚Œã¾ã›ã‚“ï¼‰ã€‚
- è£œæ­£ã®éš›ã€æ™‚åˆ»ãŒã€Œå·»ãæˆ»ã‚‹ã€ã“ã¨ã«ã‚ˆã‚‹ä¸å…·åˆã‚’é¿ã‘ã‚‹ãŸã‚ã€è£œæ­£ã¯æœ€å¤§10ç§’ã‹ã‘ã¦å¾ã€…ã«è¡Œã‚ã‚Œã¾ã™ã€‚
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§1åˆ†ã”ã¨ã«è‡ªå‹•çš„ã«å†åŒæœŸï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¹ãƒ¬ãƒƒãƒ‰ã§å‹•ä½œï¼‰ã€‚
- åŒæœŸå…ˆã¯ `pool.ntp.org`ï¼ˆè¤‡æ•°ã®NTPã‚µãƒ¼ãƒãƒ¼ã«è‡ªå‹•åˆ†æ•£ï¼‰ã€‚
- NTPæ¥ç¶šå¤±æ•—æ™‚ã«ã¯ã€1ç§’ã€3ç§’ã€9ç§’ã€27ç§’å¾Œã«å†è©¦è¡Œã€‚ã™ã¹ã¦å¤±æ•—ã—ãŸå ´åˆã¯ä¾‹å¤–ã‚’æŠ•ã’ã¦åœæ­¢ã€‚
- èµ·å‹•ã‹ã‚‰ç´„10ç§’å¾Œã«ã¯æ­£ç¢ºãªæ™‚åˆ»ã«åæŸã€‚

### æ³¨æ„ç‚¹

- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåˆæœŸåŒ–å¾Œã™ãã® `now()` ã¯ã€ã¾ã NTPåŒæœŸã•ã‚Œã¦ã„ãªã„ãŸã‚ã€æ•°ç§’é–“ã¯æ™‚åˆ»ãŒãšã‚Œã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
- æ™‚åˆ»è£œæ­£ã¯å¸¸ã«ã€Œé€²ã‚€ã€æ–¹å‘ã«ãªã‚‹ã¨ã¯é™ã‚Šã¾ã›ã‚“ï¼ˆãŸã ã—ã€Œæˆ»ã‚‹ã€å ´åˆã¯æ»‘ã‚‰ã‹ã«è£œæ­£ã•ã‚Œã¾ã™ï¼‰ã€‚
- é•·æ™‚é–“å‹•ä½œã•ã›ã‚‹å ´åˆã‚„ã€æ­£ç¢ºãªæ™‚åˆ»ãŒé‡è¦ãªå‡¦ç†ã§ã¯ã€`now()` ã®å‡ºåŠ›ã‚’å®šæœŸçš„ã«ç¢ºèªã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

---

## ğŸ“˜ `ntp-time` Documentation (English)

### Overview

`ntp-time` is a lightweight Python library that provides relatively accurate current time using NTP (Network Time Protocol) servers. It mimics `time.time()` by returning UNIX timestamps (floats), while internally handling synchronization, delay compensation, and background updates.

### Features

- `ntp_time.now()` does **not** perform any network access at the time of the call â€” making it fast and safe for frequent use.
- Provides accurate current time using NTP servers.
- Returns UNIX timestamp as `float`, just like `time.time()`.
- Internet communication delays are compensated (note: not guaranteed to be perfectly accurate).
- To prevent issues from "time going backward," corrections are smoothed over 10 seconds.
- By default, synchronization happens every minute in a **background thread** â€” no need to manage it manually.
- Synchronizes with `pool.ntp.org`, which provides access to multiple reliable NTP servers.
- On connection failure, automatic retries occur after 1s, 3s, 9s, and 27s. If all fail, the program raises an exception and exits.
- Accurate time is typically established within the first ~10 seconds of runtime.

### Installation

```bash
pip install ntp-time
```

### Usage

```python
import ntp_time

# Get the accurate current time
t = ntp_time.now()

print(t)  # e.g., 1743499065.294967 (float UNIX timestamp)
```

### Notes

- `now()` may return slightly inaccurate values for the first few seconds after startup, until synchronization completes.
- Time correction does not guarantee only forward movement; if time goes "backward", the library interpolates smoothly over 10 seconds.
- For long-running processes or time-critical applications, consider monitoring the output of `now()` periodically.
