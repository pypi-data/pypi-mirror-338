import"../chunks/Bg9kRutz.js";import{p as at,a as s,s as i,f as k,b as ot,c as _,d as a,g as e,e as ue,r as n,h as U,t as lt}from"../chunks/AM9C8FsA.js";import{s as oe}from"../chunks/B6F1ZNoe.js";import{p as o,i as z}from"../chunks/D-bC_bvq.js";import{e as ge,i as pe}from"../chunks/C3oA2Kkp.js";import{t as f,a as r,c as W}from"../chunks/CmMFD2-g.js";import{d as rt}from"../chunks/DY_kk6CS.js";import{S as nt,c as he,d as st,f as it,B as ct}from"../chunks/B0llF2z6.js";import{A as fe}from"../chunks/Rklybz_u.js";import{R as me}from"../chunks/CrHIdHvl.js";var dt=($,F)=>{F()},_t=f("<option> </option>"),vt=($,F)=>{F()},ut=f("<option> </option>"),gt=f('<h3>Technology Type</h3> <select class="form-select"></select> <!>',1),pt=($,F)=>{F()},ht=f("<option> </option>"),ft=f('<h3>Carrier</h3> <select class="form-select"><!> </select>',1),mt=f("<h3>Technology</h3> <!>",1),yt=f("<h3>Node</h3> <!>",1),bt=f('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Data Selection</button></h2> <div id="collapseThree" class="accordion-collapse collapse show"><div class="accordion-body"><div class="row"><div class="col-6"><h3>Aggregation</h3> <!></div> <div class="col-6"><h3>Normalisation</h3> <!></div></div> <!> <h3>Year</h3> <!></div></div></div>'),xt=f('<div class="accordion-item variable-selection"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Variable Selection</button></h2> <div id="collapseTwo" class="accordion-collapse collapse show"><div class="accordion-body"><h3>Variable</h3> <select class="form-select"></select> <!> <!></div></div></div> <!>',1),wt=f('<div class="text-center"><div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div></div>'),Tt=f('<div class="text-center">No technologies with this selection.</div>'),Nt=f('<div class="text-center">No carriers with this selection.</div>'),zt=f('<div class="text-center">No solution selected.</div>'),St=f('<div class="text-center">No data with this selection.</div>'),kt=f('<div class="text-center">No locations with this selection.</div>'),At=f('<div class="text-center">No data with this selection.</div>'),Ct=f('<h2>Capacity</h2> <div class="z-1 position-relative"><div class="filters"><div class="accordion" id="accordionExample"><div class="accordion-item solution-selection"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button></h2> <div id="collapseOne" class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div> <!></div></div></div> <div class="mt-4"><!></div>',1);function Pt($,F){at(F,!0);let Ve=["conversion","storage","transport"],R=s(null),J=s(null),je=["capacity","capacity_addition"],C=s(o([])),V=s(o([])),X=s(o([])),E=s(o([])),u=s(null),De=o(["technology","node"]);const Fe=["not_normalized","normalized"],ye=["energy","power"];let le=null,j=s(null),L=s(null),ee=s("energy"),K=s("technology"),N=s(null),P=s(o([])),te=s(o([])),q=s(o([])),ae=s("not_normalized"),O=s(!1),Y=s(!1),be=s(""),xe=s(o([])),Le=o([]),we=s(""),Pe=ue(()=>({type:"bar",data:{datasets:e(xe),labels:Le},options:{responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Year"}},y:{stacked:!0,title:{display:!0,text:e(we)}}}}}));function Te(){a(ae,"not_normalized"),a(q,o(e(V))),a(P,o(e(E))),a(te,o(e(X))),a(K,"node")}async function qe(){if(a(Y,!0),a(R,null),await lt(),e(j)===null){a(Y,!1);return}st(e(u).solution_name,e(j),e(u).scenario_name,e(u).detail.system.reference_year,e(u).detail.system.interval_between_years).then(t=>{a(R,o(t.data)),le=t.unit,a(Y,!1)})}function Ge(){a(R,null),a(j,null),a(J,null),a(N,null),a(L,null)}function He(){qe()}function Ne(){Je(),ke(),ze(),Te(),G()}function Ie(){ke(),ze(),Te(),G()}function Je(){if(a(C,o([])),e(R)===null||e(N)===null)return;let t=Se();e(R).data.forEach(c=>{let y=c.technology,S=e(u).detail.reference_carrier[y];!e(C).includes(S)&&t.includes(c.technology)&&e(C).push(S)}),e(C).length>0&&a(L,o(e(C)[0]))}function ze(){a(V,o([])),e(R).data.forEach(t=>{let c=t.technology,y=e(u).detail.reference_carrier[c];e(E).includes(t.technology)&&!e(V).includes(t.location)&&e(V).push(t.location),!e(C).includes(y)&&e(E).includes(t.technology)&&e(C).push(y)}),a(q,o(e(V)))}function Se(){if(!e(u)||!e(N))return[];switch(e(N)){case"conversion":return e(u).detail.system.set_conversion_technologies;case"storage":return e(u).detail.system.set_storage_technologies;case"transport":return e(u).detail.system.set_transport_technologies}return[]}function Ke(){if(le!=null){for(const t of le.data)if(t.capacity_type&&!(e(N)=="storage"&&e(ee)!=t.capacity_type)&&e(E)[0]==t.technology)return t[0]||t.units||""}return""}function ke(){if(e(N)===null)return;let t=Se();a(E,o(t.filter(c=>{var y;return((y=e(u))==null?void 0:y.detail.reference_carrier[c])==e(L)}))),a(P,o(e(E)))}function G(){var H;if(e(K)=="technology"?a(q,o(e(V))):a(P,o(e(E))),e(j)==null||e(q).length==0||e(te).length==0||e(P).length==0||e(R)===null){a(J,null);return}let t={},c={};e(K)=="technology"?(t.location=e(q),c.technology=e(P)):(t.technology=e(P),c.location=e(q)),e(N)=="storage"?c.capacity_type=[e(ee)]:c.capacity_type=ye;let y=e(X).filter(b=>!e(te).includes(b));a(J,o(it(e(R).data,t,c,y,e(ae)=="normalized"))),a(xe,o(e(J))),a(we,e(j)+" ["+Ke()+"]");let S=e(u).solution_name.split(".");a(be,o([S[(S==null?void 0:S.length)-1],(H=e(u))==null?void 0:H.scenario_name,e(j),e(N),e(L)].join("_")))}var Ae=Ct(),re=i(k(Ae),2),Ce=_(re),Ee=_(Ce),ne=_(Ee),Oe=i(_(ne),2),Ye=_(Oe),Me=_(Ye);const Qe=ue(()=>!e(Y)&&!e(O));nt(Me,{solution_selected:Ge,get enabled(){return e(Qe)},get years(){return e(X)},set years(t){a(X,o(t))},get selected_solution(){return e(u)},set selected_solution(t){a(u,o(t))},get loading(){return e(O)},set loading(t){a(O,o(t))}}),n(Ye),n(Oe),n(ne);var Ue=i(ne,2);{var We=t=>{var c=xt(),y=k(c),S=i(_(y),2),H=_(S),b=i(_(H),2);b.__change=[dt,He],ge(b,21,()=>je,pe,(g,m)=>{var l=_t(),p={},w=_(l,!0);n(l),U(()=>{p!==(p=e(m))&&(l.value=(l.__value=e(m))==null?"":e(m)),oe(w,e(m))}),r(g,l)}),n(b);var I=i(b,2);{var se=g=>{var m=gt(),l=i(k(m),2);l.__change=[vt,Ne],ge(l,21,()=>Ve,pe,(h,x)=>{var v=ut(),T={},A=_(v,!0);n(v),U(()=>{T!==(T=e(x))&&(v.value=(v.__value=e(x))==null?"":e(x)),oe(A,e(x))}),r(h,v)}),n(l);var p=i(l,2);{var w=h=>{const x=ue(()=>!e(Y)&&!e(O));me(h,{options:ye,selection_changed:Ne,get enabled(){return e(x)},get selected_option(){return e(ee)},set selected_option(v){a(ee,o(v))}})};z(p,h=>{e(N)=="storage"&&h(w)})}U(()=>l.disabled=e(Y)||e(O)),he(l,()=>e(N),h=>a(N,h)),r(g,m)};z(I,g=>{e(j)!=null&&g(se)})}var ie=i(I,2);{var ce=g=>{var m=ft(),l=i(k(m),2);l.__change=[pt,Ie];var p=_(l);ge(p,17,()=>e(C),pe,(h,x)=>{var v=ht(),T={},A=_(v,!0);n(v),U(()=>{T!==(T=e(x))&&(v.value=(v.__value=e(x))==null?"":e(x)),oe(A,e(x))}),r(h,v)});var w=i(p);n(l),U(()=>{l.disabled=e(Y)||e(O),oe(w,` disabled=${(e(Y)||e(O))??""}`)}),he(l,()=>e(L),h=>a(L,h)),r(g,m)};z(ie,g=>{e(N)!=null&&e(C).length>0&&g(ce)})}n(H),n(S),n(y);var D=i(y,2);{var M=g=>{var m=bt(),l=i(_(m),2),p=_(l),w=_(p),h=_(w),x=i(_(h),2);me(x,{get options(){return De},selection_changed:d=>G(),get selected_option(){return e(K)},set selected_option(d){a(K,o(d))}}),n(h);var v=i(h,2),T=i(_(v),2);me(T,{options:Fe,selection_changed:d=>G(),get selected_option(){return e(ae)},set selected_option(d){a(ae,o(d))}}),n(v),n(w);var A=i(w,2);{var de=d=>{var B=mt(),Z=i(k(B),2);fe(Z,{get selected_elements(){return e(P)},get elements(){return e(E)},selection_changed:()=>{G()}}),r(d,B)},_e=d=>{var B=yt(),Z=i(k(B),2);fe(Z,{get selected_elements(){return e(q)},get elements(){return e(V)},selection_changed:Re=>{G()}}),r(d,B)};z(A,d=>{e(K)=="technology"?d(de):d(_e,!1)})}var ve=i(A,4);fe(ve,{get selected_elements(){return e(te)},get elements(){return e(X)},selection_changed:d=>{G()}}),n(p),n(l),n(m),r(g,m)};z(D,g=>{e(R)&&e(N)&&e(L)&&e(E).length>0&&e(V).length>0&&g(M)})}U(()=>b.disabled=e(Y)||e(O)),he(b,()=>e(j),g=>a(j,g)),r(t,c)};z(Ue,t=>{!e(O)&&e(u)&&t(We)})}n(Ee),n(Ce),n(re);var Be=i(re,2),Xe=_(Be);{var Ze=t=>{var c=wt();r(t,c)},$e=t=>{var c=W(),y=k(c);{var S=b=>{var I=Tt();r(b,I)},H=b=>{var I=W(),se=k(I);{var ie=D=>{var M=Nt();r(D,M)},ce=D=>{var M=W(),g=k(M);{var m=p=>{var w=zt();r(p,w)},l=p=>{var w=W(),h=k(w);{var x=T=>{var A=St();r(T,A)},v=T=>{var A=W(),de=k(A);{var _e=d=>{var B=kt();r(d,B)},ve=d=>{var B=W(),Z=k(B);{var Re=Q=>{var tt=At();r(Q,tt)},et=Q=>{ct(Q,{get config(){return e(Pe)},get plot_name(){return e(be)}})};z(Z,Q=>{e(J).length==0?Q(Re):Q(et,!1)},!0)}r(d,B)};z(de,d=>{e(V).length==0?d(_e):d(ve,!1)},!0)}r(T,A)};z(h,T=>{e(J)==null?T(x):T(v,!1)},!0)}r(p,w)};z(g,p=>{e(u)==null?p(m):p(l,!1)},!0)}r(D,M)};z(se,D=>{e(C).length==0?D(ie):D(ce,!1)},!0)}r(b,I)};z(y,b=>{e(E).length==0?b(S):b(H,!1)},!0)}r(t,c)};z(Xe,t=>{e(O)||e(Y)?t(Ze):t($e,!1)})}n(Be),r($,Ae),ot()}rt(["change"]);export{Pt as component};
