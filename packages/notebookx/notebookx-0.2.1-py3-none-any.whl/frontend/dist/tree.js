(()=>{"use strict";var e=function(e,t,n,o){return new(n||(n=Promise))((function(c,d){function i(e){try{r(o.next(e))}catch(e){d(e)}}function a(e){try{r(o.throw(e))}catch(e){d(e)}}function r(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}r((o=o.apply(e,t||[])).next())}))};function t(e){return new URLSearchParams(window.location.search).get(e)||""}function n(e,t){const n=document.getElementById("directory-container");if(!n)return;n.innerHTML="",n.className="directory-listing";const c=document.createDocumentFragment();if(t){const e=document.createElement("a");e.href=`/?path=${encodeURIComponent(t.split("/").slice(0,-1).join("/"))}`,e.textContent=".. (up)",e.className="up-link",c.appendChild(e),c.appendChild(document.createElement("br"))}const d=document.createElement("table");d.className="directory-table",d.appendChild(function(){const e=document.createElement("tr"),t=document.createElement("th"),n=document.createElement("input");return n.type="checkbox",n.addEventListener("change",(()=>{document.querySelectorAll('input[type="checkbox"]').forEach((e=>{e.checked=n.checked})),o()})),t.appendChild(n),e.appendChild(t),["Name","Type","Size (KB)","Last Modified"].forEach((t=>{const n=document.createElement("th");n.textContent=t,e.appendChild(n)})),e}()),e.forEach((e=>d.appendChild(function(e,t){const n=document.createElement("tr"),c=document.createElement("td"),d=document.createElement("input");d.type="checkbox",d.dataset.filepath=t?`${t}/${e.name}`:e.name,d.addEventListener("change",o),c.appendChild(d),n.appendChild(c);const i=document.createElement("td"),a=document.createElement("a");e.isDir?(a.href=`/?path=${encodeURIComponent(t?`${t}/${e.name}`:e.name)}`,a.textContent=`[DIR] ${e.name}`,a.className="dir-link"):(a.href=`/open/${encodeURIComponent(t?`${t}/${e.name}`:e.name)}`,a.textContent=e.name,a.className=e.name.endsWith(".ipynb")?"notebook-link":"file-link"),i.appendChild(a),n.appendChild(i);const r=document.createElement("td");r.textContent=e.type||"unknown",n.appendChild(r);const l=document.createElement("td");l.textContent=e.size?(e.size/1024).toFixed(2):"-",n.appendChild(l);const p=document.createElement("td");return p.textContent=e.lastModified?new Date(1e3*e.lastModified).toLocaleString():"-",n.appendChild(p),n}(e,t)))),c.appendChild(d),n.appendChild(c)}function o(){const e=document.getElementById("delete-button");e&&(e.disabled=!document.querySelector('input[type="checkbox"]:checked'))}document.addEventListener("DOMContentLoaded",(()=>e(void 0,void 0,void 0,(function*(){const o=t("path");try{const e=yield fetch(`/api/files?path=${encodeURIComponent(o)}`);n((yield e.json()).children,o)}catch(e){console.error("Error loading directory:",e)}const c=document.getElementById("delete-button");c&&c.addEventListener("click",(()=>e(void 0,void 0,void 0,(function*(){const e=Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map((e=>e.dataset.filepath));if(e.length&&confirm(`Are you sure you want to delete ${e.length} files?`))try{if(!(yield fetch("/api/delete_files",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:e})})).ok)throw new Error("Failed to delete files");location.reload()}catch(e){console.error("Error deleting files:",e),alert("Error deleting files")}}))))}))));document.addEventListener("DOMContentLoaded",(()=>{return e=void 0,o=void 0,d=function*(){const e=t("path");try{const t=yield fetch(`/api/files?path=${encodeURIComponent(e)}`);n((yield t.json()).children,e)}catch(e){console.error("Error loading directory:",e)}},new((c=void 0)||(c=Promise))((function(t,n){function i(e){try{r(d.next(e))}catch(e){n(e)}}function a(e){try{r(d.throw(e))}catch(e){n(e)}}function r(e){var n;e.done?t(e.value):(n=e.value,n instanceof c?n:new c((function(e){e(n)}))).then(i,a)}r((d=d.apply(e,o||[])).next())}));var e,o,c,d}))})();