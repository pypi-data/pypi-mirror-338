"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[8222],{76137:(e,t,a)=>{a.d(t,{U:()=>n});var r=a(27879),i=a(67877);const n=(e,t)=>{if(!e?.style?.areAxisTitlesVisible)return{};const a={},{mapping:n}=e;return(0,r.W)(t).forEach((([e,t])=>{const r=t?n[t]:void 0,o=[];r?.forEach((t=>{!(0,i.isMeasureInMapping)(t)||"yaxis2"===e&&n.verticalSubplots?.[0]?(0,i.isHierarchyInMapping)(t)&&o.push(t.levelName):o.push(t.caption??t.measureName)})),a[e]={title:{text:o.join(", "),standoff:20}}})),a}},54826:(e,t,a)=>{a.d(t,{n:()=>r});const r=(e,t)=>{const a={};return e.hasTimeAxis&&e.isSorted&&(a[t]={type:"category"}),a}},93125:(e,t,a)=>{a.d(t,{M:()=>r});const r=(e,t)=>{const a={};return[["x"],["y"]].forEach((([r])=>{const{keys:i,captions:n}=e["x"===r?"horizontal":"vertical"];for(let e=0;e<i.length;e++){const i="x"===r?e+1:2*e+1,o=`${r}axis${1===i?"":i}`,l={title:n[e],...t?.fontSize&&{titlefont:{size:t?.fontSize}},...t?.[r]};a[o]=l}})),a}},93955:(e,t,a)=>{a.d(t,{C:()=>n});var r=a(90147),i=a(31529);const n=(e,{axes:t,fontSize:a})=>void 0===a?e:(0,r.produce)(e,(e=>{for(const a of t)a in e||(e[a]={});for(const t in e)t.startsWith("xaxis")||t.startsWith("yaxis")?(0,i.set)(e,[t,"tickfont","size"],a):t.startsWith("polar")&&(0,i.set)(e,[t,"angularaxis","tickfont","size"],a)}))},38222:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var r=a(74389),i=a(58814),n=a.n(i),o=a(30999),l=a.n(o),s=a(93345),c=a(95889),p=a(39352),u=a(40383),d=a(67877),f=a(22737),x=a(93125),h=a(54826),v=a(76137),y=a(93955),m=a(9348);const g={xaxis:"xAxis",yaxis:"values"};var b=a(95714);n().register(l());const w=(0,d.withLoadingOverlay)((0,d.withoutIrrelevantRenders)((0,p.c)((0,s.memo)((e=>{const{cube:t,data:a,metaData:i,widgetState:n}=e,{formatMessage:o}=(0,c.useIntl)(),l=o({id:"aui.total"}),p=(0,s.useMemo)((()=>(0,b.V)({cube:t,data:a,metaData:i,widgetState:n,captionForTotals:l})),[t,a,i,n,l]),d=(0,s.useMemo)((()=>((e,t)=>{if(!e)return{};let a=(0,m.Z)({xaxis:{gridcolor:"transparent"}},(0,f.w)(e.subplots),(0,x.M)(e.subplots,{fontSize:t?.style?.axisLabelFontSize}),(0,h.n)(e,"xaxis"),(0,v.U)(t,g),{showlegend:t?.plotly?.layout?.showlegend??!0});return a=(0,y.C)(a,{axes:["xaxis","yaxis"],fontSize:t?.style?.axisLabelFontSize}),a})(i,n)),[i,n]);return(0,r.Y)(u.Kl,{...e,traces:p,layout:d,cube:t,data:a,metaData:i})})))))},9348:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(90147),i=a(31529);const n=function(e,...t){return(0,r.produce)(e??{},(e=>{(0,i.defaultsDeep)(e,...t)}))}},30999:(e,t,a)=>{e.exports=a(75490)},86612:e=>{e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},83311:(e,t,a)=>{var r=a(1484),i=a(88209),n=a(24765),o=a(74364).fillText,l=a(6176).getLineWidth,s=a(62857).hoverLabelText,c=a(56532).BADNUM;function p(e,t,a,i,n){var l,p,u,d,f,x,h,v=e.cd,y=v[0].trace,m=v[0].t,g="closest"===i,b="waterfall"===y.type,w=e.maxHoverDistance,S=e.maxSpikeDistance;"h"===y.orientation?(l=a,p=t,u="y",d="x",f=_,x=E):(l=t,p=a,u="x",d="y",x=_,f=E);var T=y[u+"period"],k=g||T;function L(e){return D(e,-1)}function M(e){return D(e,1)}function D(e,t){var a=e.w;return e[u]+t*a/2}function C(e){return e[u+"End"]-e[u+"Start"]}var A=g?L:T?function(e){return e.p-C(e)/2}:function(e){return Math.min(L(e),e.p-m.bardelta/2)},I=g?M:T?function(e){return e.p+C(e)/2}:function(e){return Math.max(M(e),e.p+m.bardelta/2)};function O(e,t,a){return n.finiteRange&&(a=0),r.inbox(e-l,t-l,a+Math.min(1,Math.abs(t-e)/h)-1)}function E(e){return O(A(e),I(e),w)}function N(e){var t=e[d];if(b){var a=Math.abs(e.rawS)||0;p>0?t+=a:p<0&&(t-=a)}return t}function _(e){var t=p,a=e.b,i=N(e);return r.inbox(a-t,i-t,w+(i-t)/(i-a)-1)}var z=e[u+"a"],j=e[d+"a"];h=Math.abs(z.r2c(z.range[1])-z.r2c(z.range[0]));var H=r.getDistanceFunction(i,f,x,(function(e){return(f(e)+x(e))/2}));if(r.getClosest(v,H,e),!1!==e.index&&v[e.index].p!==c){k||(A=function(e){return Math.min(L(e),e.p-m.bargroupwidth/2)},I=function(e){return Math.max(M(e),e.p+m.bargroupwidth/2)});var V=v[e.index],B=y.base?V.b+V.s:V.s;e[d+"0"]=e[d+"1"]=j.c2p(V[d],!0),e[d+"LabelVal"]=B;var F=m.extents[m.extents.round(V.p)];e[u+"0"]=z.c2p(g?A(V):F[0],!0),e[u+"1"]=z.c2p(g?I(V):F[1],!0);var R=void 0!==V.orig_p;return e[u+"LabelVal"]=R?V.orig_p:V.p,e.labelLabel=s(z,e[u+"LabelVal"],y[u+"hoverformat"]),e.valueLabel=s(j,e[d+"LabelVal"],y[d+"hoverformat"]),e.baseLabel=s(j,V.b,y[d+"hoverformat"]),e.spikeDistance=(function(e){var t=p,a=e.b,i=N(e);return r.inbox(a-t,i-t,S+(i-t)/(i-a)-1)}(V)+function(e){return O(L(e),M(e),S)}(V))/2,e[u+"Spike"]=z.c2p(V.p,!0),o(V,y,e),e.hovertemplate=y.hovertemplate,e}}function u(e,t){var a=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,i=l(e,t);return n.opacity(a)?a:n.opacity(r)&&i?r:void 0}e.exports={hoverPoints:function(e,t,a,r,n){var o=p(e,t,a,r,n);if(o){var l=o.cd,s=l[0].trace,c=l[o.index];return o.color=u(s,c),i.getComponentMethod("errorbars","hoverInfo")(c,s,o),[o]}},hoverOnBars:p,getTraceColor:u}},97281:e=>{function t(e,t,a,r,i){var n=t.c2p(r?e.s0:e.p0,!0),o=t.c2p(r?e.s1:e.p1,!0),l=a.c2p(r?e.p0:e.s0,!0),s=a.c2p(r?e.p1:e.s1,!0);return i?[(n+o)/2,(l+s)/2]:r?[o,(l+s)/2]:[(n+o)/2,s]}e.exports=function(e,a){var r,i=e.cd,n=e.xaxis,o=e.yaxis,l=i[0].trace,s="funnel"===l.type,c="h"===l.orientation,p=[];if(!1===a)for(r=0;r<i.length;r++)i[r].selected=0;else for(r=0;r<i.length;r++){var u=i[r],d="ct"in u?u.ct:t(u,n,o,c,s);a.contains(d,!1,r,e)?(p.push({pointNumber:r,x:n.c2d(u.x),y:o.c2d(u.y)}),u.selected=1):u.selected=0}return p}},62417:(e,t,a)=>{var r=a(7496),i=a(73817).line,n=a(64094),o=a(46955).axisHoverFormat,l=a(10017).rb,s=a(10017).ay,c=a(84947),p=a(99134).extendFlat,u=a(24765);function d(e){return{marker:{color:p({},r.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+e+" values."}),line:{color:p({},r.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+e+" values."}),width:p({},r.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+e+" values."}),editType:"style"},editType:"style"},editType:"style"}}e.exports={measure:{valType:"data_array",dflt:[],editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),hovertext:r.hovertext,hovertemplate:l({},{keys:c.eventDataKeys}),hoverinfo:p({},n.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:s({editType:"plot"},{keys:c.eventDataKeys.concat(["label"])}),text:r.text,textposition:r.textposition,insidetextanchor:r.insidetextanchor,textangle:r.textangle,textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:r.orientation,offset:r.offset,width:r.width,increasing:d("increasing"),decreasing:d("decreasing"),totals:d("intermediate sums and total"),connector:{line:{color:p({},i.color,{dflt:u.defaultLine}),width:p({},i.width,{editType:"plot"}),dash:i.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup}},20341:(e,t,a)=>{var r=a(62857),i=a(10471),n=a(74364).mergeArray,o=a(94168),l=a(56532).BADNUM;function s(e){return"a"===e||"absolute"===e}function c(e){return"t"===e||"total"===e}e.exports=function(e,t){var a,p,u,d,f,x,h=r.getFromId(e,t.xaxis||"x"),v=r.getFromId(e,t.yaxis||"y");"h"===t.orientation?(a=h.makeCalcdata(t,"x"),u=v.makeCalcdata(t,"y"),d=i(t,v,"y",u),f=!!t.yperiodalignment,x="y"):(a=v.makeCalcdata(t,"y"),u=h.makeCalcdata(t,"x"),d=i(t,h,"x",u),f=!!t.xperiodalignment,x="x"),p=d.vals;for(var y,m=Math.min(p.length,a.length),g=new Array(m),b=0,w=!1,S=0;S<m;S++){var T=a[S]||0,k=!1;(a[S]!==l||c(t.measure[S])||s(t.measure[S]))&&S+1<m&&(a[S+1]!==l||c(t.measure[S+1])||s(t.measure[S+1]))&&(k=!0);var L=g[S]={i:S,p:p[S],s:T,rawS:T,cNext:k};s(t.measure[S])?(b=L.s,L.isSum=!0,L.dir="totals",L.s=b):c(t.measure[S])?(L.isSum=!0,L.dir="totals",L.s=b):(L.isSum=!1,L.dir=L.rawS<0?"decreasing":"increasing",y=L.s,L.s=b+y,b+=y),"totals"===L.dir&&(w=!0),f&&(g[S].orig_p=u[S],g[S][x+"End"]=d.ends[S],g[S][x+"Start"]=d.starts[S]),t.ids&&(L.id=String(t.ids[S])),L.v=(t.base||0)+b}return g.length&&(g[0].hasTotals=w),n(t.text,g,"tx"),n(t.hovertext,g,"htx"),o(g,t),g}},84947:e=>{e.exports={eventDataKeys:["initial","delta","final"]}},15910:(e,t,a)=>{var r=a(95435).setGroupPositions;e.exports=function(e,t){var a,i,n=e._fullLayout,o=e._fullData,l=e.calcdata,s=t.xaxis,c=t.yaxis,p=[],u=[],d=[];for(i=0;i<o.length;i++){var f=o[i];!0===f.visible&&f.xaxis===s._id&&f.yaxis===c._id&&"waterfall"===f.type&&(a=l[i],"h"===f.orientation?d.push(a):u.push(a),p.push(a))}var x={mode:n.waterfallmode,norm:n.waterfallnorm,gap:n.waterfallgap,groupgap:n.waterfallgroupgap};for(r(e,s,c,u,x),r(e,c,s,d,x),i=0;i<p.length;i++){a=p[i];for(var h=0;h<a.length;h++){var v=a[h];!1===v.isSum&&(v.s0+=0===h?0:a[h-1].s),h+1<a.length&&(a[h].nextP0=a[h+1].p0,a[h].nextS0=a[h+1].s0)}}}},44726:(e,t,a)=>{var r=a(74364),i=a(29342),n=a(29151).handleText,o=a(3964),l=a(37514),s=a(62417),c=a(24765),p=a(86612),u=p.INCREASING.COLOR,d=p.DECREASING.COLOR;function f(e,t,a){e(t+".marker.color",a),e(t+".marker.line.color",c.defaultLine),e(t+".marker.line.width")}e.exports={supplyDefaults:function(e,t,a,i){function c(a,i){return r.coerce(e,t,s,a,i)}if(o(e,t,i,c)){l(e,t,i,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",t.x&&!t.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var p=c("textposition");n(e,t,i,c,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==t.textposition&&(c("texttemplate"),t.texttemplate||c("textinfo")),f(c,"increasing",u),f(c,"decreasing",d),f(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else t.visible=!1},crossTraceDefaults:function(e,t){var a,n;function o(e){return r.coerce(n._input,n,s,e)}if("group"===t.waterfallmode)for(var l=0;l<e.length;l++)a=(n=e[l])._input,i(a,n,t,o)}}},57869:e=>{e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"initial"in t&&(e.initial=t.initial),"delta"in t&&(e.delta=t.delta),"final"in t&&(e.final=t.final),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},33144:(e,t,a)=>{var r=a(62857).hoverLabelText,i=a(24765).opacity,n=a(83311).hoverOnBars,o=a(86612),l=o.INCREASING.SYMBOL,s=o.DECREASING.SYMBOL;e.exports=function(e,t,a,o,c){var p=n(e,t,a,o,c);if(p){var u=p.cd,d=u[0].trace,f="h"===d.orientation,x=f?"x":"y",h=f?e.xa:e.ya,v=u[p.index],y=v.isSum?v.b+v.s:v.rawS;p.initial=v.b+v.s-y,p.delta=y,p.final=p.initial+p.delta;var m=k(Math.abs(p.delta));p.deltaLabel=y<0?"("+m+")":m,p.finalLabel=k(p.final),p.initialLabel=k(p.initial);var g=v.hi||d.hoverinfo,b=[];if(g&&"none"!==g&&"skip"!==g){var w="all"===g,S=g.split("+"),T=function(e){return w||-1!==S.indexOf(e)};v.isSum||(!T("final")||T(f?"x":"y")||b.push(p.finalLabel),T("delta")&&(y<0?b.push(p.deltaLabel+" "+s):b.push(p.deltaLabel+" "+l)),T("initial")&&b.push("Initial: "+p.initialLabel))}return b.length&&(p.extraText=b.join("<br>")),p.color=function(e,t){var a=e[t.dir].marker,r=a.color,n=a.line.color,o=a.line.width;return i(r)?r:i(n)&&o?n:void 0}(d,v),[p]}function k(e){return r(h,e,d[x+"hoverformat"])}}},75490:(e,t,a)=>{e.exports={attributes:a(62417),layoutAttributes:a(55196),supplyDefaults:a(44726).supplyDefaults,crossTraceDefaults:a(44726).crossTraceDefaults,supplyLayoutDefaults:a(68843),calc:a(20341),crossTraceCalc:a(15910),plot:a(26331),style:a(81675).style,hoverPoints:a(33144),eventData:a(57869),selectPoints:a(97281),moduleType:"trace",name:"waterfall",basePlotModule:a(10238),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set to *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},55196:e=>{e.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},68843:(e,t,a)=>{var r=a(74364),i=a(55196);e.exports=function(e,t,a){var n=!1;function o(a,n){return r.coerce(e,t,i,a,n)}for(var l=0;l<a.length;l++){var s=a[l];if(s.visible&&"waterfall"===s.type){n=!0;break}}n&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},26331:(e,t,a)=>{var r=a(36279),i=a(74364),n=a(92252),o=a(56532).BADNUM,l=a(10170),s=a(24687).clearMinTextSize;e.exports=function(e,t,a,c){var p=e._fullLayout;s("waterfall",p),l.plot(e,t,a,c,{mode:p.waterfallmode,norm:p.waterfallmode,gap:p.waterfallgap,groupgap:p.waterfallgroupgap}),function(e,t,a,l){var s=t.xaxis,c=t.yaxis;i.makeTraceGroups(l,a,"trace bars").each((function(a){var l=r.select(this),p=a[0].trace,u=i.ensureSingle(l,"g","lines");if(p.connector&&p.connector.visible){var d="h"===p.orientation,f=p.connector.mode,x=u.selectAll("g.line").data(i.identity);x.enter().append("g").classed("line",!0),x.exit().remove();var h=x.size();x.each((function(a,l){if(l===h-1||a.cNext){var p=function(e,t,a,r){var i=[],n=[],o=r?t:a,l=r?a:t;return i[0]=o.c2p(e.s0,!0),n[0]=l.c2p(e.p0,!0),i[1]=o.c2p(e.s1,!0),n[1]=l.c2p(e.p1,!0),i[2]=o.c2p(e.nextS0,!0),n[2]=l.c2p(e.nextP0,!0),r?[i,n]:[n,i]}(a,s,c,d),u=p[0],x=p[1],v="";u[0]!==o&&x[0]!==o&&u[1]!==o&&x[1]!==o&&("spanning"===f&&!a.isSum&&l>0&&(v+=d?"M"+u[0]+","+x[1]+"V"+x[0]:"M"+u[1]+","+x[0]+"H"+u[0]),"between"!==f&&(a.isSum||l<h-1)&&(v+=d?"M"+u[1]+","+x[0]+"V"+x[1]:"M"+u[0]+","+x[1]+"H"+u[1]),u[2]!==o&&x[2]!==o&&(v+=d?"M"+u[1]+","+x[1]+"V"+x[2]:"M"+u[1]+","+x[1]+"H"+u[2])),""===v&&(v="M0,0Z"),i.ensureSingle(r.select(this),"path").attr("d",v).call(n.setClipUrl,t.layerClipId,e)}}))}else u.remove()}))}(e,t,a,c)}},81675:(e,t,a)=>{var r=a(36279),i=a(92252),n=a(24765),o=a(51301).DESELECTDIM,l=a(85576),s=a(24687).resizeText,c=l.styleTextPoints;e.exports={style:function(e,t,a){var l=a||r.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");s(e,l,"waterfall"),l.style("opacity",(function(e){return e[0].trace.opacity})),l.each((function(t){var a=r.select(this),l=t[0].trace;a.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=l[e.dir].marker;r.select(this).call(n.fill,t.color).call(n.stroke,t.line.color).call(i.dashLine,t.line.dash,t.line.width).style("opacity",l.selectedpoints&&!e.selected?o:1)}})),c(a,l,e),a.selectAll(".lines").each((function(){var e=l.connector.line;i.lineGroupStyle(r.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}}}]);