"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[4225],{54225:(e,t,i)=>{i.d(t,{FiltersBarDateRangePicker:()=>v});var n=i(74389),a=i(90923),o=i(24870),r=i.n(o),l=i(93345),d=i(22431),s=i(89393),c=i(2384),m=i(3501),D=i(63459),g=i(67902),p=i(44830);const u=({node:e,isSingleDate:t,timePeriod:i,onTimePeriodChanged:a,pickerRef:o})=>(0,n.FD)("div",{ref:o,style:{display:"flex",paddingLeft:6,paddingRight:10,paddingBottom:8},children:[!t&&a&&(0,n.Y)("div",{style:{paddingTop:"8px"},children:(0,n.Y)(p.g,{timePeriod:i,onTimePeriodChanged:a})}),(0,n.FD)("div",{css:{display:"flex",flexDirection:"column"},children:[e,(0,n.Y)(g.LegendForDatesWithData,{style:{alignSelf:"flex-end"}})]})]});var y=i(85917);const{useToken:h}=a.theme,f=(e,t)=>e?t?114:94:t?194:174,v=({filter:e,onFilterChanged:t,serverKey:i,cube:a,mdxInView:o,filtersAbove:p,queryContext:v,style:P})=>{const{dimensionName:x,hierarchyName:k,levelName:R}=e,{token:C}=h(),[b,N]=(0,l.useState)(!1),S=(0,l.useRef)(null),T=(0,l.useRef)(null);(0,d.A)(T,(e=>{e.target&&e.target instanceof Node&&(S.current?.contains(e.target)||N(!1))}));const{startDate:F,endDate:Y}="timePeriodToDate"===e.type?{...(0,c.P)(e.timePeriod)}:e,w=F&&Y?[r()(F),r()(Y)]:null,_="timePeriodToDate"===e.type?e.timePeriod:void 0,I=(0,m.n)({dimensionName:x,hierarchyName:k,levelIndex:(0,s.Z)({cube:a,dimensionName:x,hierarchyName:k,levelName:R}),serverKey:i,cube:a,mdxInView:o,filters:p,queryContext:v}),E="timePeriodToDate"!==e.type&&e.isSingleDate,L=i=>{const n="dateRange"===e.type?{...e,...i}:{...e,...i,type:"dateRange",isRollingDate:!1};t(n)},A={open:b,onClick:()=>N(!0),style:{paddingInline:C.paddingXS},placement:"bottomLeft",bordered:!1,allowClear:!0,datesWithData:I};return(0,n.FD)(y.o,{ref:S,style:{...P,width:f(E,e.isExclusionFilter)},label:e.levelName,isActive:b,children:[e.isExclusionFilter&&(0,n.Y)(D.IconExclude,{style:{flexShrink:0,marginLeft:C.marginSM,opacity:F?"initial":"0.4"}}),E?(0,n.Y)(g.SingleDatePicker,{...A,value:F?r()(F):null,onChange:e=>{const t=e,i=t?{startDate:t.toDate(),endDate:t.toDate()}:{startDate:void 0,endDate:void 0};L(i)},panelRender:e=>(0,n.Y)(u,{node:e,isSingleDate:!0,pickerRef:T})}):(0,n.Y)(g.DateRangePicker,{...A,allowEmpty:[!0,!0],value:w,onChange:e=>{const[t,i]=e||[],n=t&&i?{startDate:t.toDate(),endDate:i.toDate()}:{startDate:void 0,endDate:void 0};L(n)},panelRender:i=>(0,n.Y)(u,{node:i,isSingleDate:!1,timePeriod:_,onTimePeriodChanged:i=>{const n="timePeriodToDate"===e.type?{...e,timePeriod:i}:{...e,type:"timePeriodToDate",timePeriod:i};t(n)},pickerRef:T})})]})}}}]);