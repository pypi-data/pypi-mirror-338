import{r as t,c as y,ab as i,M as o}from"./index-DRQkzaGL.js";function s(u,r,n){return new Promise((a,e)=>{u.forwardEvent(new CustomEvent("wf-builtin-run",{detail:{callback:a,handler:n?`$runWorkflowTriggerBranchById_${n}`:`$runWorkflowById_${r}`}}),null,!0).catch(e)})}function g(u,r){const n=t(!1);async function a(e){if(!n.value){n.value=!0;try{await s(u,o(r),e)}finally{n.value=!1}}}return{isRunning:i(n),run:a}}function W(u,r){const n=t([]);async function a({workflowId:l,branchId:c}){if(!n.value.includes(l))try{n.value=[l,...n.value],await s(u,l,c)}finally{n.value=n.value.filter(v=>v!==l)}}async function e(){await Promise.all(o(r).map(a))}const f=y(()=>n.value.length>0);return{run:e,isRunning:f,runningWorkflowIds:i(n)}}export{W as a,g as u};
