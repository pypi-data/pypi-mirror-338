function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./SharedMoreDropdown-C-pjfgX8.js","./index-DRQkzaGL.js","./index-DkCAOC-U.css","./floating-ui.vue-CZ60wBMe.js","./SharedMoreDropdown-BWKlox8E.css","./BuilderEmbeddedCodeEditor-Dh2OrZiD.js","./BuilderEmbeddedCodeEditor-DiDqfWdt.css","./BuilderSettings-Bh55XiQY.js","./instancePath-BsbOTTI8.js","./useComponentDescription-Bqruml_0.js","./marked.esm-273vDTCT.js","./BaseTransitionSlideFade-BBIsMEkV.js","./BaseTransitionSlideFade-D8wg9qv6.css","./BuilderSettings-B52fO7OO.css","./BuilderSidebar-BR7TE-pp.js","./BuilderSidebar-BCkRDV_c.css","./ComponentRenderer-BWvdvLxW.js","./ComponentRenderer-Bs0Vl5qh.css","./BuilderInstanceTracker-Dd0ESb0T.js","./BuilderInstanceTracker-BECcXNnW.css","./BuilderInsertionOverlay-DmpRGR8h.js","./BuilderInsertionOverlay-D2XS0ij9.css","./BuilderInsertionLabel-Fv0yA1RU.js","./BuilderInsertionLabel-_YS5WPfq.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as I,i as K,a as V,r as H,c as k,o as n,e as p,f as t,s as F,A as W,_ as M,n as D,M as h,N as me,b as T,q as A,O as We,P as C,Q as ke,j as Ce,l as _e,R as Pe,m as $e,v as Fe,t as L,G as Ie,H as ce,S as Ve,T as de,w as De,U as Ue,V as Ee,X as G,Y as we,Z as se,$ as ue,a0 as xe,a1 as He,a2 as Ne,a3 as Ae,x as ne,E as oe,y as j,z as ie,a4 as Ze,a5 as Ge,a6 as Je,a7 as Oe,a8 as X,L as Y,a9 as be,aa as Xe,ab as Ye,ac as Qe,ad as et,ae as tt,af as ot,ag as nt,ah as at,C as st,ai as lt,aj as it,ak as Me}from"./index-DRQkzaGL.js";import{B as rt}from"./BaseTransitionSlideFade-BBIsMEkV.js";import{marked as dt}from"./marked.esm-273vDTCT.js";const ut="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M34.0187%2028.9434L37.2255%2015.7128H32.7659L30.812%2015.7128L34.0187%2028.9434Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M25.4266%2015.7128H20.967L25.4266%2034.1126L27.4085%2034.1126H31.8681L27.4085%2015.7128H25.4266L25.4266%2015.7128Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.5635%2015.7129H13.1038L13.1039%2015.7132H11.1219L15.5816%2034.113H20.0413L20.0412%2034.1126H22.0231L17.5635%2015.7129Z'%20fill='white'/%3e%3c/svg%3e",ct={class:"BuilderSwitcher"},pt=I({__name:"BuilderSwitcher",setup(e){const s=K(V.builderManager);let o=H(null);const r=v=>{const d=s.getMode();d!=v&&(o.value=v,s.setMode(v),(v=="preview"||d=="workflows"||v=="workflows")&&s.setSelection(null))},i=k(()=>s.getMode());return(v,d)=>(n(),p("div",ct,[t("div",{"data-automation-action":"set-mode-ui",class:W({active:i.value=="ui"}),onClick:d[0]||(d[0]=y=>r("ui"))},d[3]||(d[3]=[t("i",{class:"icon material-symbols-outlined"}," brush ",-1),F(" UI ")]),2),t("div",{"data-automation-action":"set-mode-workflows",class:W({active:i.value=="workflows"}),onClick:d[1]||(d[1]=y=>r("workflows"))},d[4]||(d[4]=[t("i",{class:"icon material-symbols-outlined"}," linked_services ",-1),F(" Blueprints ")]),2),t("div",{class:W({active:i.value=="preview"}),"data-automation-action":"set-mode-preview",onClick:d[2]||(d[2]=y=>r("preview"))},d[5]||(d[5]=[t("i",{class:"icon material-symbols-outlined"}," preview ",-1),F(" Preview ")]),2)]))}}),vt=M(pt,[["__scopeId","data-v-33d00133"]]),ft={class:"BuilderStateExplorer"},mt=I({__name:"BuilderStateExplorer",setup(e){const s=K(V.core);return(o,r)=>(n(),p("div",ft,[D(me,{data:h(s).userState.value,"enable-copy-to-json":!0,"initial-depth":1,"hide-root":!0},null,8,["data"])]))}}),_t=M(mt,[["__scopeId","data-v-eafb7b97"]]),yt={class:"BuilderHeader"},ht={class:"undoRedo"},gt=["data-writer-tooltip","disabled"],wt=["data-writer-tooltip","disabled"],bt=["title"],kt={key:0},Ct=I({__name:"BuilderHeader",setup(e){const s=K(V.core),o=K(V.builderManager),{undo:r,redo:i,getUndoRedoSnapshot:v}=ke(s,o),d=H(!1),y=k(()=>v()),b=()=>{let f="";switch(s.syncHealth.value){case"offline":f+="Offline. Not syncing.";break;case"connected":f+="Online. Syncing...";break;case"idle":f+="Sync not initialised.";break;case"suspended":f+="Sync suspended.";break}return s.featureFlags.value.length>0&&(f+=` Feature flags: ${s.featureFlags.value.join(", ")}`),f};function x(){d.value=!0}return(f,c)=>(n(),p("div",yt,[c[7]||(c[7]=t("img",{src:ut,alt:"Writer Framework logo"},null,-1)),D(vt),t("div",ht,[t("button",{class:"undo","data-writer-tooltip":y.value.isUndoAvailable?`Undo: ${y.value.undoDesc}`:"Nothing to undo",disabled:!y.value.isUndoAvailable,"data-writer-tooltip-placement":"bottom",onClick:c[0]||(c[0]=m=>h(r)())},c[3]||(c[3]=[t("i",{class:"material-symbols-outlined"}," undo ",-1),F(" Undo ")]),8,gt),t("button",{class:"redo","data-writer-tooltip":y.value.isRedoAvailable?`Redo: ${y.value.redoDesc}`:"Nothing to redo",disabled:!y.value.isRedoAvailable,"data-writer-tooltip-placement":"bottom",onClick:c[1]||(c[1]=m=>h(i)())},c[4]||(c[4]=[t("i",{class:"material-symbols-outlined"}," redo ",-1),F(" Redo ")]),8,wt)]),t("div",null,[t("button",{onClick:x},c[5]||(c[5]=[t("i",{class:"material-symbols-outlined"}," mystery ",-1),F(" State Explorer ")])),d.value?(n(),T(We,{key:0,title:"State Explorer","display-close-button":"",onClose:c[2]||(c[2]=m=>d.value=!1)},{default:A(()=>[D(_t)]),_:1})):C("",!0)]),c[8]||(c[8]=t("div",{class:"gap"},null,-1)),t("div",{class:W(["syncHealth",h(s).syncHealth.value]),title:b()},[c[6]||(c[6]=t("i",{class:"material-symbols-outlined icon"},"sync",-1)),h(s).syncHealth.value=="offline"?(n(),p("span",kt,"Offline")):C("",!0)],10,bt)]))}}),$t=M(Ct,[["__scopeId","data-v-a30555f8"]]),Bt={class:"text"},St=200,Lt=4,xt=I({__name:"BuilderTooltip",setup(e){const s=Ce("rootEl"),o=H(!1),r=H(null);let i=null,v=null;const d=H("top"),y=H({top:0,left:0});async function b(){if(!i||(r.value=i.dataset.writerTooltip,!r.value))return;const l=i.dataset.writerTooltipGap?parseInt(i.dataset.writerTooltipGap):Lt;if(o.value=x(i),!o.value)return;await ce();const{x:_,y:a,width:w,height:u}=i.getBoundingClientRect(),{width:g,height:S}=s.value.getBoundingClientRect();switch(d.value){case"top":y.value.top=a-S-l,y.value.left=_+w/2-g/2;break;case"right":y.value.top=a+u/2-S/2,y.value.left=_+w+l;break;case"left":y.value.left=_-g-l,y.value.top=a+u/2-S/2;break;case"bottom":y.value.top=a+u+l,y.value.left=_+w/2-g/2;break}}function x(l){return l.getAttribute("data-writer-tooltip-strategy")==="overflow"?l.scrollWidth>l.clientWidth:!0}function f(l){const a=l.target.closest("[data-writer-tooltip]");if(a)i!==a&&(o.value=!1);else{o.value=!1,i=null;return}i=a,d.value=i.dataset.writerTooltipPlacement??"top",setTimeout(()=>c(a),St)}async function c(l){l===i&&(v==null||v.disconnect(),v=new MutationObserver(b),v.observe(i,{attributes:!0,attributeFilter:["data-writer-tooltip","data-writer-tooltip-placement","data-writer-tooltip-strategy"]}),b())}const m=k(()=>{const{top:l,left:_}=y.value;return{top:`${l}px`,left:`${_}px`}});return _e(()=>{document.documentElement.addEventListener("mouseover",f)}),Pe(()=>{document.documentElement.removeEventListener("mouseover",f),v==null||v.disconnect()}),(l,_)=>$e((n(),p("div",{ref_key:"rootEl",ref:s,class:"BuilderTooltip",style:Ie(m.value)},[t("div",{class:W(["arrow",d.value])},null,2),t("div",Bt,L(r.value),1)],4)),[[Fe,o.value]])}}),Dt=M(xt,[["__scopeId","data-v-7ba01c7c"]]),Tt={class:"BuilderAsyncLoader"},Pt=I({__name:"BuilderAsyncLoader",setup(e){return(s,o)=>(n(),p("div",Tt,[D(Ve)]))}}),le=M(Pt,[["__scopeId","data-v-bb820549"]]),Ft=""+new URL("art-paper-WsD9P5Lu.svg",import.meta.url).href,It="data:image/svg+xml,%3csvg%20width='120'%20height='160'%20viewBox='0%200%20120%20160'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='16.0273'%20y='89.9375'%20width='80.1422'%20height='55.209'%20rx='7.12375'%20fill='%23A95EF8'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M47.9297%20135.352H13.3542C9.41988%20135.352%206.23047%20138.541%206.23047%20142.475V152.27C6.23047%20156.205%209.41987%20159.394%2013.3542%20159.394H97.9487C101.883%20159.394%20105.072%20156.205%20105.072%20152.27V142.475C105.072%20138.541%20101.883%20135.352%2097.9487%20135.352H63.3737C63.3737%20136.103%2063.174%20136.848%2062.7859%20137.542C62.3979%20138.237%2061.8291%20138.868%2061.112%20139.399C60.395%20139.931%2059.5437%20140.352%2058.6068%20140.64C57.6699%20140.928%2056.6658%20141.076%2055.6517%20141.076C54.6376%20141.076%2053.6335%20140.928%2052.6966%20140.64C51.7597%20140.352%2050.9085%20139.931%2050.1914%20139.399C49.4744%20138.868%2048.9056%20138.237%2048.5175%20137.542C48.1295%20136.848%2047.9297%20136.103%2047.9297%20135.352Z'%20fill='%23721CC9'/%3e%3crect%20x='27.6055'%20y='103.295'%20width='56.99'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20x='38.293'%20y='112.199'%20width='35.6187'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20x='46.3047'%20y='121.104'%20width='19.5903'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20y='10.3691'%20width='40.0647'%20height='30.0485'%20rx='7.12375'%20transform='rotate(-15%200%2010.3691)'%20fill='%23EDE2FF'/%3e%3cpath%20d='M15.0475%2021.5308C15.2249%2020.8687%2016.0526%2020.6469%2016.5373%2021.1316L21.9902%2026.5846C22.475%2027.0693%2022.2532%2027.897%2021.5911%2028.0744L14.1421%2030.0703C13.48%2030.2477%2012.8741%2029.6418%2013.0515%2028.9797L15.0475%2021.5308Z'%20fill='%23D4B2F7'/%3e%3cpath%20d='M25.3727%2010.4659C25.5501%209.80376%2026.3777%209.58199%2026.8624%2010.0667L34.9516%2018.1559C35.4363%2018.6406%2035.2145%2019.4682%2034.5524%2019.6456L23.5024%2022.6065C22.8403%2022.7839%2022.2344%2022.178%2022.4118%2021.5159L25.3727%2010.4659Z'%20fill='%23D4B2F7'/%3e%3crect%20x='68.2383'%20y='23.1523'%20width='54.3186'%20height='40.0711'%20rx='7.12375'%20transform='rotate(17.6282%2068.2383%2023.1523)'%20fill='%23D4B2F7'/%3e%3cpath%20d='M72.1976%2052.7145C71.7609%2052.9406%2071.5902%2053.4779%2071.8163%2053.9146C72.0424%2054.3514%2072.5797%2054.5221%2073.0164%2054.296L72.1976%2052.7145ZM82.1128%2048.5839L82.8321%2048.059L82.3818%2047.4419L81.7034%2047.7931L82.1128%2048.5839ZM86.9945%2055.274L86.2752%2055.7989L86.71%2056.3948L87.3764%2056.0784L86.9945%2055.274ZM104.339%2047.7366C104.504%2047.2733%20104.262%2046.764%20103.798%2046.599L96.2487%2043.9102C95.7854%2043.7452%2095.2761%2043.987%2095.1111%2044.4503C94.9461%2044.9136%2095.1879%2045.4229%2095.6512%2045.5879L102.362%2047.9779L99.972%2054.6888C99.807%2055.1521%20100.049%2055.6614%20100.512%2055.8264C100.975%2055.9914%20101.485%2055.7496%20101.65%2055.2863L104.339%2047.7366ZM73.0164%2054.296L82.5222%2049.3746L81.7034%2047.7931L72.1976%2052.7145L73.0164%2054.296ZM81.3935%2049.1087L86.2752%2055.7989L87.7138%2054.7491L82.8321%2048.059L81.3935%2049.1087ZM87.3764%2056.0784L103.882%2048.2423L103.118%2046.6334L86.6126%2054.4696L87.3764%2056.0784Z'%20fill='%23F6EFFD'/%3e%3c/svg%3e",Te=150;function Et(e){const s=H(structuredClone(de(e.sourceFiles.value)));De(e.sourceFiles,(u,g)=>{let S=!1,P=structuredClone(de(s.value));const N=d(g).map(o);for(const E of Ee(u)){const U=G(E,g),O=G(E,u);if(ue(O))continue;if(U===void 0||we(O)){P=xe(E,P,structuredClone(de(O))),S=!0;continue}if(!se(U))continue;const Q=!U.complete&&O.complete,ae=U.complete&&O.complete;if(!Q&&!ae)continue;const pe=o(E);if(N.includes(pe))continue;const ee=G(E,P);se(ee)&&(S=!0,ee.complete=!0,ee.content=O.content)}for(const E of He(P))G(E,u)===void 0&&(P=Ne(E,P),S=!0);S&&(s.value=P)});function o(u){return u.join("/")}const r=Ue(),i=k(()=>Array.from(Ee(s.value))),v=k(()=>d(e.sourceFiles.value));function d(u){return i.value.filter(g=>{const S=G(g,s.value);if(we(S))return!1;if(!se(S))return!0;const P=G(g,u);return se(P)?!S.complete||!P.complete?!1:S.content!==P.content:!0})}const y=k(()=>{if(r.value!==void 0)return G(r.value,s.value)}),b=k({get(){return se(y.value)?y.value.content:""},set(u){if(r.value===void 0)return;const g=G(r.value,s.value);se(g)&&(g.content=u)}});function x(u=1){const g=`new-file-${u}.txt`;return G([g],s.value)?x(u+1):g}async function f(){const u=x();s.value=xe([u],de(s.value)),l([u]),await e.sendCreateSourceFileRequest([u])}const c=k(()=>{var g;return(g=r.value)!=null&&g.length?r.value.at(-1).split(".").at(-1):""}),m=k(()=>{switch(c.value){case"py":return"python";case"md":case"markdown":return"markdown";default:return c.value}});function l(u){r.value=u,se(y.value)&&!y.value.complete&&e.requestSourceFileLoading(u)}async function _(u){if(!(!r.value||!y.value)&&(y.value.type==="file"&&await e.sendCodeSaveRequest(b.value,r.value),u)){const g=[...de(r.value)];r.value=void 0;try{await e.sendRenameSourceFileRequest(g,u)}catch(S){throw r.value=g,S}l(u)}}function a(u){return new Promise((g,S)=>{const P=new FileReader;P.addEventListener("loadend",N=>{const E=N.target.result;if(E instanceof ArrayBuffer){const U=String.fromCharCode.apply(null,new Uint8Array(E));return g(U)}g(E.split(",")[1])}),P.addEventListener("error",()=>{S()}),P.readAsDataURL(u)})}async function w(u){const g=Te*1024*1024;if(u.size>g)throw Error(`Cannot upload file bigger than ${Te}mb`);const S=[u.name];if(G(S,e.sourceFiles.value))throw Error(`The file ${u.name} already exists`);s.value=xe(S,de(s.value),{type:"binary",uploading:!0});const P=await a(u);await e.sendFileUploadRequest(S,P)}return{code:b,sourceFileDraft:s,fileOpen:y,filepathOpen:r,pathsUnsaved:v,openedFileLanguage:m,save:_,upload:w,openFile:l,openNewFile:f,getNewFilename:x}}const At={class:"BuilderDropFileZone"},Mt=I({__name:"BuilderDropFileZone",setup(e){return(s,o)=>(n(),p("div",At,[o[0]||(o[0]=t("img",{src:It,alt:"Drop file illustration"},null,-1)),o[1]||(o[1]=t("h2",null,"Upload files",-1)),t("p",null,"Files can be up to "+L(h(Te))+"mb",1)]))}}),Rt=M(Mt,[["__scopeId","data-v-92e0a561"]]),Wt={class:"BuilderPanel__collapser"},Ut={class:"material-symbols-outlined"},Ot={class:"BuilderPanel__title"},qt={class:"BuilderPanel__titleCompanion"},zt=["data-order"],jt={key:0,class:"BuilderPanel__contents__leftPanel"},Kt={class:"BuilderPanel__actions"},Vt={class:"BuilderPanel__actionsCompanion"},Ht={class:"material-symbols-outlined"},Nt={class:"BuilderPanel__mainContents"},Zt=I({__name:"BuilderPanel",props:{panelId:{},name:{},actions:{},contentsTeleportEl:{},scrollable:{type:Boolean},keyboardShortcutKey:{},enableLeftPanel:{type:Boolean},enableDropFile:{type:Boolean}},emits:{openned:e=>typeof e=="boolean",filesDrop:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:s}){const o=K(V.builderManager),r=["code","log"],i=e,v=s,d=k(()=>i.enableDropFile&&y.value),y=H(!1);function b(a,w){i.enableDropFile&&(a.preventDefault(),y.value=w)}function x(a){if(y.value=!1,!i.enableDropFile)return;a.preventDefault();const w=[];if(a.dataTransfer.items)for(const u of a.dataTransfer.items){if(u.kind!=="file")continue;const g=u.getAsFile();g&&w.push(g)}else for(const u of a.dataTransfer.files)w.push(u);w.length>0&&v("filesDrop",w)}const f=k(()=>!o.openPanels.value.has(i.panelId)),c=k(()=>r.indexOf(i.panelId));function m(a){if(o.openPanels.value.has(a)){o.openPanels.value.delete(a),v("openned",!1);return}o.openPanels.value.add(a),v("openned",!0)}function l(a){const w=Ge(a);if(w&&a.key==i.keyboardShortcutKey.toLowerCase()){a.preventDefault(),m(i.panelId);return}i.actions.forEach(u=>{if(!u.keyboardShortcut)return;const{key:g,modifierKey:S}=u.keyboardShortcut;g.toLowerCase()==a.key&&(!w&&S||(a.preventDefault(),u.callback()))})}function _(a){if(!a)return"";let w=" (";return a.modifierKey&&(w+=Ae()),w+=a.key,w+=")",w}return _e(async()=>{document.addEventListener("keydown",l)}),Pe(()=>{document.removeEventListener("keydown",l)}),(a,w)=>(n(),p("div",{class:W(["BuilderPanel",{collapsed:f.value}])},[t("div",Wt,[D(ne,{variant:"neutral",size:"smallIcon","data-automation-action":"toggle-panel","data-automation-key":a.panelId,"data-writer-tooltip":`Toggle ${a.name} (${h(Ae)()}${a.keyboardShortcutKey})`,onClick:w[0]||(w[0]=u=>m(a.panelId))},{default:A(()=>[t("i",Ut,L(f.value?"expand_less":"expand_more"),1)]),_:1},8,["data-automation-key","data-writer-tooltip"])]),t("div",Ot,L(a.name),1),t("div",qt,[oe(a.$slots,"titleCompanion",{},void 0,!0)]),f.value?C("",!0):(n(),T(Ze,{key:0,to:a.contentsTeleportEl},[t("div",{style:Ie({order:c.value}),"data-order":c.value,class:W(["BuilderPanel__contents",{"BuilderPanel__contents--leftPanel":a.enableLeftPanel,"BuilderPanel__contents--dropingFile":d.value}]),onDrop:x,onDragover:w[1]||(w[1]=u=>b(u,!0)),onDragleave:w[2]||(w[2]=u=>b(u,!1))},[d.value?(n(),T(Rt,{key:0})):(n(),p(j,{key:1},[a.enableLeftPanel?(n(),p("div",jt,[oe(a.$slots,"leftPanel",{},void 0,!0)])):C("",!0),t("div",Kt,[t("div",Vt,[oe(a.$slots,"actionsCompanion",{},void 0,!0)]),(n(!0),p(j,null,ie(a.actions,(u,g)=>(n(),T(ne,{key:g,"data-writer-tooltip":u.name+_(u.keyboardShortcut),"data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",disabled:u.isDisabled,onClick:u.callback},{default:A(()=>[t("i",Ht,L(u.icon),1)]),_:2},1032,["data-writer-tooltip","disabled","onClick"]))),128))]),t("div",Nt,[oe(a.$slots,"default",{},void 0,!0)])],64))],46,zt)],8,["to"]))],2))}}),qe=M(Zt,[["__scopeId","data-v-a30a0b3d"]]),Gt={class:"BuilderTree"},Jt=["draggable","data-automation-key","aria-expanded"],Xt={class:"material-symbols-outlined"},Yt=["data-writer-tooltip"],Qt={key:1,class:"BuilderTree__main__dropdown"},eo={class:"BuilderTree__children"},to=I({__name:"BuilderTree",props:{name:{type:String,required:!0},query:{type:String,required:!1,default:void 0},dataAutomationKey:{type:String,required:!1,default:void 0},hasChildren:{type:Boolean},draggable:{type:Boolean},matched:{type:Boolean},selected:{type:Boolean},disabled:{type:Boolean},dropdownOptions:{type:Array,required:!1,default:void 0}},emits:{expandBranch:()=>!0,select:e=>!!e,dragover:e=>!!e,dragstart:e=>!!e,dragend:e=>!!e,drop:e=>!!e,dropdownSelect:e=>typeof e=="string"},setup(e,{expose:s,emit:o}){const r=X(()=>Y(()=>import("./SharedMoreDropdown-C-pjfgX8.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),i=e,v=o;s({expand:f,toggleCollapse:c});const d=H(!1),y=H(!1),b=k(()=>!i.matched),x=k(()=>!i.hasChildren);function f(){d.value=!1,v("expandBranch")}function c(m){m??(m=!d.value),m!==d.value&&(d.value=m)}return(m,l)=>(n(),p("div",Gt,[t("div",{class:W(["BuilderTree__main",{selected:e.selected,notMatched:b.value,childless:x.value}]),tabindex:"0",draggable:e.draggable,"data-automation-key":e.dataAutomationKey,"aria-expanded":!d.value,onMouseenter:l[2]||(l[2]=_=>y.value=!0),onMouseleave:l[3]||(l[3]=_=>y.value=!1),onClick:l[4]||(l[4]=_=>m.$emit("select",_)),onKeydown:l[5]||(l[5]=Oe(_=>m.$emit("select",_),["enter"])),onDragover:l[6]||(l[6]=_=>m.$emit("dragover",_)),onDragstart:l[7]||(l[7]=_=>m.$emit("dragstart",_)),onDragend:l[8]||(l[8]=_=>m.$emit("dragend",_)),onDrop:l[9]||(l[9]=_=>m.$emit("drop",_))},[e.hasChildren?(n(),T(ne,{key:0,class:"BuilderTree__main__collapser",variant:"neutral",size:"icon",disabled:e.disabled,onClick:l[0]||(l[0]=Je(_=>c(void 0),["stop"]))},{default:A(()=>[t("i",Xt,L(d.value?"expand_more":"expand_less"),1)]),_:1},8,["disabled"])):C("",!0),oe(m.$slots,"nameLeft",{},void 0,!0),t("span",{class:W(["BuilderTree__main__name",{"BuilderTree__main__name--disabled":e.disabled}]),"data-writer-tooltip":e.name,"data-writer-tooltip-strategy":"overflow"},L(e.name),11,Yt),oe(m.$slots,"nameRight",{},void 0,!0),e.dropdownOptions&&y.value?(n(),p("div",Qt,[D(h(r),{options:e.dropdownOptions,"trigger-custom-size":"16px",onSelect:l[1]||(l[1]=_=>m.$emit("dropdownSelect",_))},null,8,["options"])])):C("",!0)],42,Jt),D(rt,null,{default:A(()=>[$e(t("div",eo,[oe(m.$slots,"children",{},void 0,!0)],512),[[Fe,!d.value&&e.hasChildren]])]),_:3})]))}}),oo=M(to,[["__scopeId","data-v-fca510f3"]]),no=I({__name:"WdsStateDot",props:{state:{type:String,required:!0}},setup(e){return(s,o)=>(n(),p("div",{class:W(["WdsStateDotState",`WdsStateDotState--${e.state}`])},null,2))}}),ao=M(no,[["__scopeId","data-v-4eacfc04"]]),so=["width","height","viewBox","aria-valuenow"],lo=["r","cx","cy","stroke","stroke-width"],io=["r","cx","cy","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],ro=I({__name:"WdsProgressLinear",props:{progress:{type:Number,required:!1,default:100},sizePx:{type:Number,required:!1,default:12},strokeWidth:{type:Number,required:!1,default:2}},setup(e){const s=e,o=k(()=>s.sizePx/2),r=k(()=>s.sizePx/2-s.strokeWidth/2),i=k(()=>2*Math.PI*r.value),v=k(()=>i.value*((100-s.progress)/100)),d=k(()=>`0 0 ${s.sizePx} ${s.sizePx}`);return(y,b)=>(n(),p("svg",{width:e.sizePx,height:e.sizePx,viewBox:d.value,style:{transform:"rotate(-90deg)"},role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"},[t("circle",{r:r.value,cx:o.value,cy:o.value,fill:"transparent",stroke:h(be).Blue1,"stroke-width":e.strokeWidth},null,8,lo),t("circle",{r:r.value,cx:o.value,cy:o.value,fill:"transparent",stroke:h(be).Blue5,"stroke-width":e.strokeWidth,"stroke-dasharray":i.value,"stroke-dashoffset":v.value},null,8,io)],8,so))}}),uo=I({__name:"BuilderCodePanelFileUploading",props:{timeMs:{type:Number,required:!0}},setup(e){const s=e,o=H(0);return _e(()=>{let r;const i=v=>{r||(r=v);const d=v-r;o.value=Math.min(d/s.timeMs*100,100),o.value<100&&requestAnimationFrame(i)};requestAnimationFrame(i)}),(r,i)=>(n(),T(ro,{class:"BuilderCodePanelFileUploading",progress:o.value,"size-px":12,"stroke-width":2},null,8,["progress"]))}}),co=M(uo,[["__scopeId","data-v-449f2dac"]]),Re=[{label:"Delete",value:"delete",icon:"delete"}],po=I({__name:"BuilderCodePanelSourceFilesTree",props:{sourceFiles:{type:Object,required:!0},path:{type:Array,default:()=>[]},pathActive:{type:Array,default:()=>[]},pathsUnsaved:{type:Array,default:()=>[]},displayAddFileButton:{type:Boolean}},emits:{select:e=>Array.isArray(e),delete:e=>Array.isArray(e),addFile:()=>!0},setup(e,{emit:s}){const o=e,r=s;function i(l){return l.join("/")}const v=k(()=>i(o.pathActive)),d=k(()=>o.pathsUnsaved.map(i)),y=k(()=>ue(o.sourceFiles)?Object.entries(o.sourceFiles.children).sort((l,_)=>l[0].localeCompare(_[0])):[]);function b(l){const _=G([...o.path,l],o.sourceFiles);return we(_)&&_.uploading}function x(l){const _=i([...o.path,l]);return d.value.includes(_)}function f(l){return i([...o.path,l])===v.value}function c(l){if(!ue(o.sourceFiles)||b(l))return;const _=o.sourceFiles.children[l];ue(_)||r("select",[...o.path,l])}function m(l,_){l==="delete"&&r("delete",[...o.path,_])}return(l,_)=>(n(),p("div",null,[(n(!0),p(j,null,ie(y.value,([a,w])=>(n(),T(oo,{key:a,name:a,matched:"","has-children":h(ue)(w),selected:f(a),disabled:b(a),"right-click-options":Re,"dropdown-options":h(ue)(w)||h(we)(w)?Re:void 0,onSelect:u=>c(a),onDropdownSelect:u=>m(u,a)},Xe({children:A(()=>[D(ze,{"source-files":w,"path-active":e.pathActive,"paths-unsaved":e.pathsUnsaved,path:[...e.path,a],onSelect:_[0]||(_[0]=u=>l.$emit("select",u)),onDelete:_[1]||(_[1]=u=>l.$emit("delete",u))},null,8,["source-files","path-active","paths-unsaved","path"])]),_:2},[b(a)||x(a)?{name:"nameLeft",fn:A(()=>[b(a)?(n(),T(co,{key:0,"time-ms":2e3})):x(a)?(n(),T(ao,{key:1,state:"newDraft"})):C("",!0)]),key:"0"}:void 0]),1032,["name","has-children","selected","disabled","dropdown-options","onSelect","onDropdownSelect"]))),128))]))}}),ze=M(po,[["__scopeId","data-v-42a4456e"]]),fe=Ue([]);function je(){function e(o){fe.value=fe.value.filter(r=>r.id!==o)}function s(o){const r=new Date().getTime();fe.value=[...fe.value,{...o,id:r}],o.closable||setTimeout(()=>e(r),o.delayMs??3e3)}return{pushToast:s,removeToast:e,toasts:Ye(fe)}}const vo=["disabled"],fo={key:0,class:"material-symbols-outlined"},mo={class:"WdsButtonLink__text"},_o={key:1,class:"material-symbols-outlined"},yo=I({__name:"WdsButtonLink",props:{variant:{type:String,default:"primary"},weight:{type:String,default:"default"},leftIcon:{type:String,required:!1,default:void 0},rightIcon:{type:String,required:!1,default:void 0},text:{type:String,required:!0},disbaled:{type:Boolean}},setup(e){const s=e,o=k(()=>[`WdsButtonLink--variant-${s.variant}`,`WdsButtonLink--weight-${s.weight}`]);return(r,i)=>(n(),p("button",{class:W(["WdsButtonLink",o.value]),disabled:e.disbaled,role:"button"},[e.leftIcon?(n(),p("i",fo,L(e.leftIcon),1)):C("",!0),t("span",mo,L(e.text),1),e.rightIcon?(n(),p("i",_o,L(e.rightIcon),1)):C("",!0)],10,vo))}}),Ke=M(yo,[["__scopeId","data-v-27c92b97"]]),ho={class:"BuilderCodePanelFileUploadBtn"},go=I({__name:"BuilderCodePanelFileUploadBtn",emits:{selected:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:s}){const o=Ce("input"),r=s;function i(){var v;(v=o.value.files)!=null&&v.length&&r("selected",o.value.files)}return(v,d)=>(n(),p("form",ho,[$e(t("input",{ref_key:"input",ref:o,type:"file",multiple:"true",onChange:i},null,544),[[Fe,!1]]),D(Ke,{"left-icon":"upload",text:"Upload",onClick:d[0]||(d[0]=y=>h(o).click())})]))}}),wo={class:"BuilderCodePanel__tree"},bo={class:"BuilderCodePanel__tree__actions"},ko={key:1,class:"BuilderCodePanel__noPreview"},Co={class:"BuilderCodePanel__actionsCompanion"},$o=I({__name:"BuilderCodePanel",props:{contentsTeleportEl:{}},setup(e){const s=X(()=>Y(()=>import("./SharedMoreDropdown-C-pjfgX8.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)),o=X({loader:()=>Y(()=>import("./BuilderEmbeddedCodeEditor-Dh2OrZiD.js").then($=>$.a),__vite__mapDeps([5,1,2,6]),import.meta.url),loadingComponent:le}),r=K(V.core),i=[{label:"Rename file",value:"rename",icon:"edit"},{label:"Delete file",value:"delete",icon:"delete"}],{sourceFileDraft:v,openFile:d,upload:y,openNewFile:b,code:x,openedFileLanguage:f,filepathOpen:c,fileOpen:m,pathsUnsaved:l,save:_}=Et(r);async function a($){await Promise.all([...$].map(w))}async function w($){try{await y($),g({type:"success",message:`File ${$.name} uploaded`})}catch(q){g({type:"error",message:q.message})}}const u=k(()=>{var $;return($=m.value)==null?void 0:$.type}),{pushToast:g}=je(),S=tt();function P($){const q=new AbortController;_e(()=>{document.addEventListener("keydown",async Z=>{const Se=Z.metaKey||Z.ctrlKey,B=Z.key==="s"||Z.key==="S";!Se||!B||(Z.preventDefault(),await $())},{signal:q.signal})}),Pe(q.abort)}P(ve);const N=Ce("filenameEl"),E=H(""),U=H(!1),O=k(()=>{var $;return(($=c.value)==null?void 0:$.join("/"))??""}),Q=k(()=>O.value!=="main.py"),ae=k(()=>O.value!==E.value),pe=k(()=>U.value||O.value==="main.py"),ee=k(()=>ae.value?!1:c.value===void 0?!0:!l.value.map($=>$.join("/")).includes(O.value));De(c,()=>{var $;E.value=(($=c.value)==null?void 0:$.join("/"))??""}),De(r.sessionTimestamp,()=>{U.value=!1});function Be($){$&&c.value===void 0&&d(["main.py"])}async function ye(){var $;O.value!=="main.py"&&(await ce(),($=N.value)==null||$.focus())}async function te($){switch($){case"rename":return ye();case"delete":await ge(c.value)}}async function he(){await b(),ye()}async function ge($){await r.sendDeleteSourceFileRequest($),g({type:"success",message:"The file was deleted"}),c.value.join("/").startsWith($.join("/"))&&d(["main.py"])}async function ve(){if(c.value===void 0)return g({type:"error",message:"There is no file open"});if(ee.value)return g({type:"info",message:"There are not file changes to save"});U.value=!0;try{await _(ae.value?E.value.split("/"):void 0),g({type:"success",message:"The file was saved"})}catch($){S.error("The file hasn't been saved.",$),g({type:"error",message:"The file hasn't been saved"});return}finally{U.value=!1}}return($,q)=>(n(),T(qe,{"panel-id":"code",name:"Code","contents-teleport-el":$.contentsTeleportEl,actions:[],scrollable:!1,"enable-left-panel":"","keyboard-shortcut-key":"J",class:"BuilderCodePanel","enable-drop-file":"",onFilesDrop:a,onOpenned:Be},{leftPanel:A(()=>[t("div",wo,[D(ze,{"path-active":h(c),"paths-unsaved":h(l),"source-files":h(v),onAddFile:he,onSelect:h(d),onDelete:ge},null,8,["path-active","paths-unsaved","source-files","onSelect"]),t("div",bo,[D(Ke,{"left-icon":"add",text:"Add file",onClick:he}),D(go,{onSelected:a})])])]),actionsCompanion:A(()=>[t("div",Co,[D(Qe,{ref_key:"filenameEl",ref:N,modelValue:E.value,"onUpdate:modelValue":q[1]||(q[1]=Z=>E.value=Z),disabled:!Q.value,class:"BuilderCodePanel__actionsCompanion__filename",autofocus:"",variant:"ghost",onKeydown:Oe(ve,["enter"])},null,8,["modelValue","disabled"]),D(ne,{variant:"primary",size:"small",disabled:U.value||ee.value,class:"BuilderCodePanel__actionsCompanion__saveBtn",onClick:ve},{default:A(()=>q[3]||(q[3]=[t("i",{class:"material-symbols-outlined"},"keyboard_backspace",-1),F(" Save file ")])),_:1},8,["disabled"]),D(h(s),{disabled:pe.value,options:i,onSelect:te},null,8,["disabled"])])]),default:A(()=>[u.value==="file"?(n(),T(h(o),{key:0,modelValue:h(x),"onUpdate:modelValue":q[0]||(q[0]=Z=>et(x)?x.value=Z:null),variant:"full",language:h(f),disabled:U.value},null,8,["modelValue","language","disabled"])):C("",!0),u.value==="binary"?(n(),p("div",ko,q[2]||(q[2]=[t("img",{class:"BuilderCodePanel__noPreview__img",src:Ft},null,-1),t("p",{class:"BuilderCodePanel__noPreview__title"},"Can’t Preview File",-1),t("p",{class:"BuilderCodePanel__noPreview__desc"}," Non-text files are not available to view here ",-1)]))):C("",!0)]),_:1},8,["contents-teleport-el"]))}}),Bo=M($o,[["__scopeId","data-v-38ac6bfd"]]),So={class:"BuiderLogWorkflowExecutionTrace"},Lo={key:0,class:"trace"},xo={class:"type"},Do={key:0},To={key:1},Po={class:"main"},Fo={key:0},Io={key:1},Eo={key:2},Ao={key:3},Mo={class:"details"},Ro={class:"data","data-automation-key":"result"},Wo={key:1,class:"nothing"},Uo={class:"data","data-automation-key":"return-value"},Oo={class:"environment"},qo={class:"data"},zo={key:1,class:"nothing"},jo={class:"callStack"},Ko={class:"eyebrow"},Vo=I({__name:"BuilderLogWorkflowExecutionTrace",props:{executionItem:{}},emits:["closeModal"],setup(e,{emit:s}){const o=K(V.core),r=K(V.builderManager),i=s,{goToComponentParentPage:v}=ke(o,r),d=e,y=k(()=>{var c;const f=((c=d.executionItem.executionEnvironment)==null?void 0:c.call_stack)??[];return Object.fromEntries(f.map(m=>[m,o.getComponentById(m)]))}),b=k(()=>{var f;return((f=d.executionItem.executionEnvironment)==null?void 0:f.trace)??[]});async function x(f){i("closeModal"),r.setMode("workflows"),await ce(),v(f),await ce(),r.setSelection(f,void 0,"log")}return(f,c)=>{var m,l,_;return n(),p("div",So,[b.value.length>0?(n(),p("div",Lo,[(n(!0),p(j,null,ie(b.value,(a,w)=>(n(),p("div",{key:w,class:"traceEntry"},[t("div",xo,[a.type=="functionCall"?(n(),p("span",Do,"⚡️")):C("",!0),a.type=="reasoning"?(n(),p("span",To,"🧠")):C("",!0)]),t("div",Po,[a.thought?(n(),p("div",Fo,[c[0]||(c[0]=t("strong",null,"Thought.",-1)),F(" "+L(a.thought),1)])):C("",!0),a.action?(n(),p("div",Io,[c[1]||(c[1]=t("strong",null,"Action.",-1)),F(" "+L(a.action),1)])):C("",!0),a.name?(n(),p("div",Eo,L(a.name),1)):C("",!0),a.parameters?(n(),p("div",Ao,[D(me,{"hide-root":!0,data:a.parameters,"initial-depth":1,class:"data"},null,8,["data"])])):C("",!0)])]))),128))])):C("",!0),t("div",Mo,[t("div",null,[c[2]||(c[2]=t("h3",null,"Result",-1)),c[3]||(c[3]=t("p",null," The value resulting of the execution of this block. This value is added to the execution environment of the direct dependents of this block. There, it's accessible via @{result}. ",-1)),t("div",Ro,[(m=f.executionItem)!=null&&m.result?(n(),T(me,{key:0,data:f.executionItem.result,"initial-depth":1,class:"data"},null,8,["data"])):(n(),p("div",Wo,"No result."))])]),t("div",null,[c[4]||(c[4]=t("h3",null,"Return value",-1)),c[5]||(c[5]=t("p",null," The value being returned, which is used to determine the result of 'Run workflow' blocks and 'Chat completion' tool calls. ",-1)),t("div",Uo,[(l=f.executionItem)!=null&&l.returnValue?(n(),T(me,{key:0,data:f.executionItem.returnValue,"initial-depth":1,class:"data"},null,8,["data"])):(n(),p(j,{key:1},[F(" No return value. ")],64))])])]),t("div",Oo,[c[6]||(c[6]=t("h3",null,"Execution environment",-1)),c[7]||(c[7]=t("p",null," The following values were made available to this block during execution time. These values are accessible via the same template syntax i.e. @{my_var}, as state elements. ",-1)),t("div",qo,[(_=f.executionItem)!=null&&_.executionEnvironment?(n(),T(me,{key:0,data:f.executionItem.executionEnvironment,"initial-depth":1,class:"data"},null,8,["data"])):(n(),p("div",zo,"Empty execution environment."))])]),t("div",jo,[c[9]||(c[9]=t("h3",null,"Call stack",-1)),(n(!0),p(j,null,ie(y.value,(a,w)=>{var u,g,S;return n(),p("div",{key:w,class:W(["component",{active:w==f.executionItem.componentId}])},[t("div",null,[t("div",Ko,[w==f.executionItem.componentId?(n(),p(j,{key:0},[F(" This block · ")],64)):C("",!0),F(" "+L(((u=h(o).getComponentDefinition(a==null?void 0:a.type))==null?void 0:u.name)??"Unavailable component")+" · Id: "+L(w),1)]),F(" "+L(((g=a==null?void 0:a.content)==null?void 0:g.alias)??((S=h(o).getComponentDefinition(a==null?void 0:a.type))==null?void 0:S.name)??"Unavailable component"),1)]),a?(n(),T(ne,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:P=>x(w)},{default:A(()=>c[8]||(c[8]=[t("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])):C("",!0)],2)}),128))])])}}}),Ho=M(Vo,[["__scopeId","data-v-8081ae36"]]),No={class:"BuilderListItem"},Zo=["viewBox"],Go=["d","stroke"],Jo=["d","stroke"],Xo={class:"BuilderListItem__content"},Yo=I({__name:"BuilderListItem",props:{isLast:{type:Boolean,required:!1},height:{type:Number,required:!1,default:1e3},color:{type:String,required:!1,default:be.Blue2},colorLast:{type:String,required:!1,default:be.Blue2}},setup(e){const s=e,o=k(()=>s.height/2),r=k(()=>`0 0 17 ${s.height}`),i=k(()=>["M1 0",`V${o.value-8}`,`C1 ${o.value-4}.4183 4.58172 ${o.value} 9 ${o.value}`,"H17"].join(" ")),v=k(()=>[`M1 ${o.value-8}`,`V${s.height}`].join(" "));return(d,y)=>(n(),p("div",No,[(n(),p("svg",{viewBox:r.value,fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMax meet",class:"BuilderListItem__anchor"},[e.isLast?C("",!0):(n(),p("path",{key:0,d:v.value,stroke:e.colorLast,"stroke-width":"1"},null,8,Go)),t("path",{d:i.value,stroke:e.color,"stroke-width":"1"},null,8,Jo)],8,Zo)),t("div",Xo,[oe(d.$slots,"default",{},void 0,!0)])]))}}),Qo=M(Yo,[["__scopeId","data-v-33f3edcd"]]),en={class:"BuilderLogWorkflowExecution"},tn={class:"name"},on={key:0},nn={class:"eyebrow"},an={class:"outcome"},sn={class:"result"},ln={class:"time"},rn={key:0,class:"message markdown"},dn=I({__name:"BuilderLogWorkflowExecution",props:{executionLog:{}},setup(e){const s=K(V.core),o=K(V.builderManager),{goToComponentParentPage:r}=ke(s,o),i=e,v=H(null),d=k(()=>({summary:[...i.executionLog.summary.filter(f=>!!f.outcome).map(f=>({...f,component:s.getComponentById(f.componentId),componentDef:s.getComponentById(f.componentId)?s.getComponentDefinition(s.getComponentById(f.componentId).type):void 0}))]}));async function y(x){o.setMode("workflows"),await ce(),r(x),await ce(),o.setSelection(x,void 0,"log")}function b(x){return x<0?"N/A":x<.1?"< 0.1s":`${x.toFixed(2)}s`}return(x,f)=>{const c=ot("dompurify-html");return n(),p("div",en,[(n(!0),p(j,null,ie(d.value.summary,(m,l)=>(n(),T(Qo,{key:l,"is-last":l+1===d.value.summary.length},{default:A(()=>{var _,a,w,u,g,S,P,N,E,U,O,Q;return[t("div",{class:W(["itemWrapper",{"itemWrapper--first":l===0,"itemWrapper--last":l+1===d.value.summary.length}])},[t("div",{class:W(["item",{selected:h(o).isComponentIdSelected(m.componentId)}])},[t("div",tn,[(a=(_=m.component)==null?void 0:_.content)!=null&&a.alias?(n(),p("div",on,[t("div",nn,L(((w=m.componentDef)==null?void 0:w.name)??"Unavailable component"),1),F(" "+L((g=(u=m.component)==null?void 0:u.content)==null?void 0:g.alias),1)])):(n(),p(j,{key:1},[F(L(((S=m.componentDef)==null?void 0:S.name)??"Unavailable component"),1)],64)),m.component?(n(),T(ne,{key:2,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:ae=>y(m.componentId)},{default:A(()=>f[1]||(f[1]=[t("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])):C("",!0)]),t("div",an,[m.outcome!=="in_progress"?(n(),p(j,{key:0},[t("div",{class:W(["ball",(E=(N=(P=m.componentDef)==null?void 0:P.outs)==null?void 0:N[m.outcome])==null?void 0:E.style])},null,2),F(" "+L(((Q=(O=(U=m.componentDef)==null?void 0:U.outs)==null?void 0:O[m.outcome])==null?void 0:Q.name)??m.outcome),1)],64)):(n(),p(j,{key:1},[f[2]||(f[2]=t("div",{class:"ballContainer"},[t("div",{class:"ball inProgress"})],-1)),f[3]||(f[3]=F(" In progress... "))],64))]),t("div",sn,[v.value==l?(n(),T(We,{key:0,title:"Trace",size:"wide",actions:[{desc:"Done",fn:()=>v.value=null}]},{default:A(()=>[D(Ho,{"execution-item":m,onCloseModal:f[0]||(f[0]=()=>v.value=null)},null,8,["execution-item"])]),_:2},1032,["actions"])):C("",!0),m.result||m.returnValue||m.executionEnvironment?(n(),T(ne,{key:1,variant:"special",size:"small",onClick:()=>v.value=l},{default:A(()=>f[4]||(f[4]=[t("i",{class:"material-symbols-outlined"},"find_in_page",-1),F(" Trace ")])),_:2},1032,["onClick"])):C("",!0)]),t("div",ln,L(b(m.executionTimeInSeconds)),1),m.message?$e((n(),p("div",rn,null,512)),[[c,h(dt).parse(m.message)]]):C("",!0)],2)],2)]}),_:2},1032,["is-last"]))),128))])}}}),un=M(dn,[["__scopeId","data-v-f959931a"]]),cn={class:"BuilderLogIndicator"},pn={key:0,class:"number error"},vn={key:1,class:"number info"},fn=I({__name:"BuilderLogIndicator",setup(e){const s=K(V.builderManager),o=k(()=>s.getLogEntries().reduce((r,i)=>(i.type in r||(r[i.type]=0),r[i.type]++,r),{}));return(r,i)=>(n(),p("div",cn,[o.value.error>0?(n(),p("div",pn,[i[0]||(i[0]=t("div",{class:"icon"},[t("i",{class:"material-symbols-outlined"},"error")],-1)),F(" "+L(o.value.error??0),1)])):C("",!0),o.value.info>0?(n(),p("div",vn,[i[1]||(i[1]=t("div",{class:"icon"},[t("i",{class:"material-symbols-outlined"},"info")],-1)),F(" "+L(o.value.info??0),1)])):C("",!0)]))}}),mn=M(fn,[["__scopeId","data-v-34a7a9ff"]]),_n={key:0,class:"entries"},yn={class:"icon"},hn={key:0,class:"material-symbols-outlined"},gn={key:1,class:"material-symbols-outlined"},wn={class:"title"},bn={class:"time"},kn={class:"content"},Cn={key:0,class:"codeContainer"},$n={key:1,class:"emptyMessage"},Bn=I({__name:"BuilderLogPanel",props:{contentsTeleportEl:{}},setup(e){const s=K(V.builderManager),o=[{icon:"delete",name:"Clear log",callback:()=>{s.clearLogEntries()},keyboardShortcut:{modifierKey:!0,key:"L"}}],r=k(()=>s.getLogEntries());return(i,v)=>(n(),T(qe,{"panel-id":"log",name:"Log","contents-teleport-el":i.contentsTeleportEl,actions:o,scrollable:!0,"keyboard-shortcut-key":"K",class:"BuilderLogPanel"},{titleCompanion:A(()=>[D(mn)]),default:A(()=>[r.value.length>0?(n(),p("div",_n,[(n(!0),p(j,null,ie(r.value,(d,y)=>(n(),p(j,{key:y},[t("div",{class:W(["entry",d.type])},[t("div",yn,[d.type=="error"?(n(),p("i",hn,"error")):(n(),p("i",gn,"info"))]),t("div",wn,L(d.title)+L(d.repeated>0?` · Repeated ${d.repeated} times`:""),1),t("div",bn,L(d.timestampReceived.toLocaleTimeString()),1),t("div",kn,[F(L(d.message)+" ",1),d.code?(n(),p("div",Cn,[t("code",null,L(d.code),1)])):C("",!0)])],2),d.workflowExecution?(n(),T(un,{key:0,"execution-log":d.workflowExecution},null,8,["execution-log"])):C("",!0)],64))),128))])):C("",!0),r.value.length==0?(n(),p("div",$n,v[0]||(v[0]=[t("div",null,[F(" Exceptions and other relevant messages will be shown here."),t("br"),F("Also, you can include print statements in event handlers to create log entries. ")],-1)]))):C("",!0)]),_:1},8,["contents-teleport-el"]))}}),Sn=M(Bn,[["__scopeId","data-v-59a5e90d"]]),Ln={class:"switches"},xn=I({__name:"BuilderPanelSwitcher",setup(e){const s=K(V.builderManager),o=Ce("screenEl");return(r,i)=>(n(),p("div",{class:W(["BuilderPanelSwitcher",{openPanels:h(s).openPanels.value.size>0}])},[t("div",{ref_key:"screenEl",ref:o,class:"screen"},null,512),t("div",Ln,[D(Bo,{"contents-teleport-el":h(o)},null,8,["contents-teleport-el"]),D(Sn,{"contents-teleport-el":h(o)},null,8,["contents-teleport-el"])])],2))}}),Dn=M(xn,[["__scopeId","data-v-75a489c0"]]),Tn={class:"WdsToast__icon"},Pn={class:"material-symbols-outlined"},Fn={class:"material-symbols-outlined"},In=I({__name:"WdsToast",props:{type:{type:String,required:!0},message:{type:String,required:!0},closable:{type:Boolean},action:{type:Object,required:!1,default:void 0}},emits:{close:()=>!0},setup(e){const s=e,o=k(()=>{switch(s.type){case"info":return"info";case"success":return"check";case"error":return"close";default:return"question_mark"}});return(r,i)=>(n(),p("div",{class:W(["WdsToast",`WdsToast--${e.type}`])},[t("div",Tn,[t("span",Pn,L(o.value),1)]),t("p",null,L(e.message),1),e.action?(n(),p("button",{key:0,class:"WdsToast__action",onClick:i[0]||(i[0]=(...v)=>e.action.func&&e.action.func(...v))},[F(L(e.action.label)+" ",1),t("span",Fn,L(e.action.icon),1)])):C("",!0),e.closable?(n(),T(ne,{key:1,class:"WdsToast__close",variant:"neutral",size:"smallIcon",onClick:i[1]||(i[1]=v=>r.$emit("close"))},{default:A(()=>i[2]||(i[2]=[t("span",{class:"material-symbols-outlined"},"close",-1)])),_:1})):C("",!0)],2))}}),En=M(In,[["__scopeId","data-v-e8cc4657"]]),An={class:"BuilderToasts"},Mn=I({__name:"BuilderToasts",setup(e){const{toasts:s,removeToast:o}=je();return(r,i)=>(n(),p("div",An,[D(nt,{name:"list",tag:"div"},{default:A(()=>[(n(!0),p(j,null,ie(h(s),v=>(n(),T(En,{key:v.id,class:"BuilderToasts__toast",closable:v.closable,message:v.message,type:v.type,action:v.action,onClick:d=>h(o)(v.id)},null,8,["closable","message","type","action","onClick"]))),128))]),_:1})]))}}),Rn=M(Mn,[["__scopeId","data-v-42b26df9"]]),Wn={key:0,class:"sidebar"},Un={class:"builderMain"},On={class:"rendererWrapper"},qn=I({__name:"BuilderApp",setup(e){at(B=>({bfcacb52:h(b).getMode()!=="preview"?"var(--builderSidebarWidth)":"0px"}));const s=X({loader:()=>Y(()=>import("./BuilderSettings-Bh55XiQY.js"),__vite__mapDeps([7,1,2,8,9,5,6,10,11,12,13]),import.meta.url),loadingComponent:le}),o=X({loader:()=>Y(()=>import("./BuilderSidebar-BR7TE-pp.js"),__vite__mapDeps([14,1,2,9,11,12,10,15]),import.meta.url),loadingComponent:le}),r=X({loader:()=>Y(()=>import("./ComponentRenderer-BWvdvLxW.js"),__vite__mapDeps([16,1,2,8,17]),import.meta.url),loadingComponent:le}),i=X({loader:()=>Y(()=>import("./BuilderInstanceTracker-Dd0ESb0T.js"),__vite__mapDeps([18,1,2,19]),import.meta.url),loadingComponent:le}),v=X({loader:()=>Y(()=>import("./BuilderInsertionOverlay-DmpRGR8h.js"),__vite__mapDeps([20,1,2,21]),import.meta.url),loadingComponent:le}),d=X({loader:()=>Y(()=>import("./BuilderInsertionLabel-Fv0yA1RU.js"),__vite__mapDeps([22,1,2,23]),import.meta.url),loadingComponent:le}),y=K(V.core),b=K(V.builderManager),{candidateId:x,candidateInstancePath:f,isCandidacyConfirmed:c,dropComponent:m,assignInsertionCandidacy:l,removeInsertionCandidacy:_}=lt(y),{createAndInsertComponent:a,undo:w,redo:u,moveComponent:g,moveComponentUp:S,moveComponentDown:P,cutComponent:N,isPasteAllowed:E,isCopyAllowed:U,isCutAllowed:O,isDeleteAllowed:Q,isGoToParentAllowed:ae,pasteComponent:pe,copyComponent:ee,removeComponentSubtree:Be,goToParent:ye}=ke(y,b),te=k(()=>b.getMode()),he=k(()=>b.firstSelectedId.value);function ge(B){if(B.key=="Escape"){b.setSelection(null);return}const z=it()?B.metaKey:B.ctrlKey;if(B.target.closest("textarea, input, select"))return;if(B.key=="z"&&z){B.preventDefault(),w();return}if(B.key=="y"&&z){B.preventDefault(),u();return}if(!b.isSingleSelectionActive.value||!b.firstSelectedItem.value)return;const{componentId:R,instancePath:re}=b.firstSelectedItem.value;if(B.key=="Delete"){if(!Q(R))return;Be(R);return}if(B.key=="ArrowUp"&&z&&B.shiftKey){if(!ae(R))return;ye(R,re);return}if(B.key=="ArrowUp"&&z){S(R);return}if(B.key=="ArrowDown"&&z){P(R);return}if(B.key=="v"&&z){if(!E(R))return;pe(R);return}if(B.key=="c"&&z){if(!U(R))return;ee(R);return}if(B.key=="x"&&z){if(!O(R))return;N(R);return}}function ve(B){te.value!=="preview"&&l(B)}function $(B){if(te.value==="preview")return;b.setSelection(null);const z=m(B);if(!z)return;const{draggedType:J,draggedId:R,parentId:re,position:Le}=z;R?g(R,re,Le):a(J,re,Le)}function q(B){if(te.value==="preview"||B.target.closest("[data-writer-unselectable]"))return;const J=B.target.closest("[data-writer-id]");if(!J)return;const R=J.dataset.writerId,re=J.dataset.writerInstancePath;b.isComponentIdSelected(R)&&b.selectionStatus.value!==Me.Multiple||(B.preventDefault(),B.stopPropagation(),b.handleSelectionFromEvent(B,R,re,"click"))}const Z=B=>{if(te.value==="preview")return;const J=B.target.closest("[data-writer-id]").dataset.writerId,{type:R}=y.getComponentById(J);b.selectionStatus.value===Me.Multiple&&(b.setSelection(J,void 0,"click"),b.isSettingsBarCollapsed.value=!0),B.dataTransfer.setData(`application/json;writer=${R},${J}`,"{}")};function Se(B){b.setSelection(null),_(B)}return _e(()=>{document.addEventListener("keydown",ge)}),(B,z)=>(n(),p("div",{class:"BuilderApp",tabindex:"-1",style:Ie(h(st))},[t("div",{class:W(["mainGrid",{openPanels:h(b).openPanels.value.size>0}])},[D($t,{class:"builderHeader"}),te.value!=="preview"?(n(),p("div",Wn,[D(h(o))])):C("",!0),t("div",Un,[t("div",On,[D(h(r),{class:W(["componentRenderer",{settingsOpen:h(b).isSingleSelectionActive}]),onDragover:ve,onDragstart:Z,onDragend:Se,onDrop:$,onClickCapture:q},null,8,["class"])]),h(b).isSingleSelectionActive?(n(),T(h(s),{key:he.value??"noneSelected"})):C("",!0)]),D(Dn,{class:"panelSwitcher"})],2),te.value!=="preview"?(n(),p(j,{key:0},[h(x)&&!h(c)?(n(),p(j,{key:0},[(n(),T(h(i),{key:h(f),class:"insertionOverlayTracker","is-off-bounds-allowed":!0,"instance-path":h(f),"match-size":!0},{default:A(()=>[D(h(v))]),_:1},8,["instance-path"])),(n(),T(h(i),{key:h(f),class:"insertionLabelTracker","instance-path":h(f),"vertical-offset-pixels":-48},{default:A(()=>[D(h(d),null,{default:A(()=>[F(L(h(y).getComponentDefinition(h(y).getComponentById(h(x)).type).name),1)]),_:1})]),_:1},8,["instance-path"]))],64)):C("",!0)],64)):C("",!0),z[0]||(z[0]=t("div",{id:"modal"},null,-1)),D(Dt,{id:"tooltip"}),D(Rn)],4))}}),zn=M(qn,[["__scopeId","data-v-3f1c20fd"]]),Hn=Object.freeze(Object.defineProperty({__proto__:null,default:zn},Symbol.toStringTag,{value:"Module"}));export{le as B,oo as T,Ke as W,Qo as a,Hn as b,je as u};
